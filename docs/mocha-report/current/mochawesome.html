<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:304,&quot;tests&quot;:763,&quot;passes&quot;:763,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-02-19T06:50:48.852Z&quot;,&quot;end&quot;:&quot;2025-02-19T06:53:54.937Z&quot;,&quot;duration&quot;:186085,&quot;testsRegistered&quot;:763,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;bad848d2-aeb3-466c-bac5-c592f3a1b1de&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: beforeAll in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook: beforeAll in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:427,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;run before all hook\&quot;);\nif (!process.env.TEST_DB_TYPE) process.env.TEST_DB_TYPE = \&quot;sql\&quot;;\nif (process.env.TEST_DB_TYPE === \&quot;sql\&quot;) {\n    require(\&quot;../models/sql/init\&quot;).then(() =&gt; {\n        done();\n    });\n} else if (process.env.TEST_DB_TYPE === \&quot;mongodb\&quot;) {\n    const mongoose = require(\&quot;mongoose\&quot;);\n    mongoose.connection.on(\&quot;connected\&quot;, () =&gt; {\n        console.log(\&quot;connected to mongodb\&quot;);\n        done();\n    });\n    require(\&quot;../models/mongodb/index\&quot;);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebea701f-c7fb-4cc4-8836-e393722f9e8a&quot;,&quot;parentUUID&quot;:&quot;bad848d2-aeb3-466c-bac5-c592f3a1b1de&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;title&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\convert-image\\convertInstanceImage.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\convert-image\\convertInstanceImage.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; \&quot;before all\&quot; hook in \&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1561,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;)\n);\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/forStore/PDF/pdf.dcm\&quot;)\n);\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/forStore/PDF/pdf2.dcm\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2d74e9b-f64a-4b47-85c0-8c4d56d0d101&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should convert instance to type: JPEG (image/jpeg)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: JPEG (image/jpeg)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:254,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc0660ea-97cb-48bb-86d7-3e0c3a59d3b4&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: GIF (image/gif)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: GIF (image/gif)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:271,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af30d62d-9de1-440c-ba31-9226e15ae0b0&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: BMP (image/bmp)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: BMP (image/bmp)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:310,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ba09a73-53b1-4b82-864a-49643dcff8aa&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: JPG (image/jp2)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: JPG (image/jp2)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:789,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11ba6c0f-f5f5-45f0-a366-edf5593eb762&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: PNG (image/png)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: PNG (image/png)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:236,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bbfde4d-6154-41f2-aabf-e0f60e675aff&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: TIFF (image/tiff)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: TIFF (image/tiff)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:378,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6562acfc-f262-4420-85a3-21ea73cd9515&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: MP4 (video/mp4)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: MP4 (video/mp4)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:239,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f5ffc8c-69fc-4f23-80ca-cb9c66cd6433&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: AVI (video/x-msvideo)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: AVI (video/x-msvideo)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:212,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89aa72a6-4df6-47d1-9566-053bef8aa7c0&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: MPG (video/mpeg)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: MPG (video/mpeg)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ca252ad-0b06-4864-87d2-f6110a4ca1a0&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert instance to type: H265 (video/H265)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should convert instance to type: H265 (video/H265)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30ad46a7-bb99-4a81-b840-30b12067bc34&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should covert instance to PDF&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should covert instance to PDF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${PDF_STUDY_UID}/series/${PDF_SERIES_UID}/instances/${PDF_INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e929c02c-e5cf-40f9-ac7d-26578e82beb8&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when using invalid media type in accept header&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should raise 400 (Bad Request) when using invalid media type in accept header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b41acca0-64e3-4389-b86e-2e9e5c18817b&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when instance not exist&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert instance &#x27;/dicom-web/:studyUID/series/:seriesUID/instances/:instanceUID/convert-image&#x27; Should raise 404 (Not Found) when instance not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}2486/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d03eb13a-6611-40ff-b16a-aa73d03a49c4&quot;,&quot;parentUUID&quot;:&quot;a0da7be2-5d8c-4165-b2f9-ded774a275c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc0660ea-97cb-48bb-86d7-3e0c3a59d3b4&quot;,&quot;af30d62d-9de1-440c-ba31-9226e15ae0b0&quot;,&quot;0ba09a73-53b1-4b82-864a-49643dcff8aa&quot;,&quot;11ba6c0f-f5f5-45f0-a366-edf5593eb762&quot;,&quot;9bbfde4d-6154-41f2-aabf-e0f60e675aff&quot;,&quot;6562acfc-f262-4420-85a3-21ea73cd9515&quot;,&quot;9f5ffc8c-69fc-4f23-80ca-cb9c66cd6433&quot;,&quot;89aa72a6-4df6-47d1-9566-053bef8aa7c0&quot;,&quot;6ca252ad-0b06-4864-87d2-f6110a4ca1a0&quot;,&quot;30ad46a7-bb99-4a81-b840-30b12067bc34&quot;,&quot;e929c02c-e5cf-40f9-ac7d-26578e82beb8&quot;,&quot;b41acca0-64e3-4389-b86e-2e9e5c18817b&quot;,&quot;d03eb13a-6611-40ff-b16a-aa73d03a49c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3265,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;title&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\convert-image\\convertSeriesImages.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\convert-image\\convertSeriesImages.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; \&quot;before all\&quot; hook in \&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:235,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;)\n);\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/forStore/PDF/pdf.dcm\&quot;)\n);\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/forStore/PDF/pdf2.dcm\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdd4181e-bc6b-4986-a33d-d1e5642c96ac&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: JPEG (image/jpeg)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: JPEG (image/jpeg)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e218995b-fd5f-4290-82a5-b439f4f48a3a&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: GIF (image/gif)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: GIF (image/gif)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3cbe3b1-832d-4981-93c8-9cab741a4318&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: BMP (image/bmp)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: BMP (image/bmp)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:279,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;194631de-09e1-4226-9852-68a06c8e1cb3&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: JPG (image/jp2)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: JPG (image/jp2)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:295,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7435855-3f0b-4908-a5a2-3e9b9e3712ad&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: PNG (image/png)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: PNG (image/png)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:232,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84f47702-cb37-4548-ae37-9d3bf9c76111&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: TIFF (image/tiff)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: TIFF (image/tiff)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:298,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9e47531-2027-4e50-9c25-19753f0e3228&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: MP4 (video/mp4)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: MP4 (video/mp4)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:224,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;574ebcfb-b577-4109-8eb2-22179d4a6ef3&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: AVI (video/x-msvideo)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: AVI (video/x-msvideo)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;846dde3b-21ed-45b8-9a27-ac75b284c976&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: MPG (video/mpeg)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: MPG (video/mpeg)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:215,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ba037fb-0619-41a9-a175-7b7160f352aa&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert series&#x27; instances to type: H265 (video/H265)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should convert series&#x27; instances to type: H265 (video/H265)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:345,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59a27b99-ec9b-42af-a6f5-1691a5b2e3b2&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should covert series&#x27; instances to PDF&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should covert series&#x27; instances to PDF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${PDF_STUDY_UID}/series/${PDF_SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ba17fe4-75fc-4cc4-8846-7a10a5d55f91&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when using invalid media type in accept header&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should raise 400 (Bad Request) when using invalid media type in accept header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cf86591-b943-4bf7-8151-c4934cfc614d&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when series not exist&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert series&#x27; instances &#x27;/dicom-web/:studyUID/series/:seriesUID/convert-image&#x27; Should raise 404 (Not Found) when series not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}2486/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;782b2bb6-3f43-4fec-90d3-2e14a2e1c36b&quot;,&quot;parentUUID&quot;:&quot;2a78eec8-b656-47cf-a9b8-1518d60055af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e218995b-fd5f-4290-82a5-b439f4f48a3a&quot;,&quot;a3cbe3b1-832d-4981-93c8-9cab741a4318&quot;,&quot;194631de-09e1-4226-9852-68a06c8e1cb3&quot;,&quot;d7435855-3f0b-4908-a5a2-3e9b9e3712ad&quot;,&quot;84f47702-cb37-4548-ae37-9d3bf9c76111&quot;,&quot;a9e47531-2027-4e50-9c25-19753f0e3228&quot;,&quot;574ebcfb-b577-4109-8eb2-22179d4a6ef3&quot;,&quot;846dde3b-21ed-45b8-9a27-ac75b284c976&quot;,&quot;0ba037fb-0619-41a9-a175-7b7160f352aa&quot;,&quot;59a27b99-ec9b-42af-a6f5-1691a5b2e3b2&quot;,&quot;9ba17fe4-75fc-4cc4-8846-7a10a5d55f91&quot;,&quot;3cf86591-b943-4bf7-8151-c4934cfc614d&quot;,&quot;782b2bb6-3f43-4fec-90d3-2e14a2e1c36b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2482,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;title&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\convert-image\\convetStudyImages.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\convert-image\\convetStudyImages.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; \&quot;before all\&quot; hook in \&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:224,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;)\n);\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/forStore/PDF/pdf.dcm\&quot;)\n);\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/forStore/PDF/pdf2.dcm\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;358634c4-a624-4622-870c-a32ada338811&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: JPEG (image/jpeg)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: JPEG (image/jpeg)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:142,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38b01d91-8fc5-4b9e-a387-17f445238b3c&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: GIF (image/gif)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: GIF (image/gif)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d085e0cf-5ece-4825-841a-94180dab397c&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: BMP (image/bmp)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: BMP (image/bmp)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:297,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6832b0d7-0ff1-4c31-9ba5-6971239499ab&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: JPG (image/jp2)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: JPG (image/jp2)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:238,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7085c9f0-430a-4557-a30f-85b8cadb556f&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: PNG (image/png)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: PNG (image/png)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;810e2da6-715d-4074-8e7c-9aedb90b161a&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: TIFF (image/tiff)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: TIFF (image/tiff)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:292,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88936bf2-e61e-4349-90ec-edb986369558&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: MP4 (video/mp4)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: MP4 (video/mp4)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:222,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3add6be6-ffd5-4087-9727-c9dc09939de8&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: AVI (video/x-msvideo)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: AVI (video/x-msvideo)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:196,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;390e8ff0-74ba-4ea8-aa6e-261f582e7623&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: MPG (video/mpeg)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: MPG (video/mpeg)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:195,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6abf9073-22ef-47d6-8c4e-36cad361f0aa&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to type: H265 (video/H265)&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to type: H265 (video/H265)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: value\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2cf0f5c-51de-441e-a5f6-a7f64d85006f&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should covert study&#x27;s instances to PDF&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should covert study&#x27;s instances to PDF&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${PDF_STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fe972b9-0550-4ceb-94fa-6b9827a3b735&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when using invalid media type in accept header&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should raise 400 (Bad Request) when using invalid media type in accept header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd591eb0-5b3b-4927-8ddf-a0eb2a07535f&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when study not exist&quot;,&quot;fullTitle&quot;:&quot;Convert Images convert study&#x27;s instances &#x27;/dicom-web/:studyUID/convert-image&#x27; Should raise 404 (Not Found) when study not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}2486/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7343683-b02a-4660-b4e1-0dc234f1423f&quot;,&quot;parentUUID&quot;:&quot;095e3a17-2a4b-467a-a056-c7c89e6b100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38b01d91-8fc5-4b9e-a387-17f445238b3c&quot;,&quot;d085e0cf-5ece-4825-841a-94180dab397c&quot;,&quot;6832b0d7-0ff1-4c31-9ba5-6971239499ab&quot;,&quot;7085c9f0-430a-4557-a30f-85b8cadb556f&quot;,&quot;810e2da6-715d-4074-8e7c-9aedb90b161a&quot;,&quot;88936bf2-e61e-4349-90ec-edb986369558&quot;,&quot;3add6be6-ffd5-4087-9727-c9dc09939de8&quot;,&quot;390e8ff0-74ba-4ea8-aa6e-261f582e7623&quot;,&quot;6abf9073-22ef-47d6-8c4e-36cad361f0aa&quot;,&quot;a2cf0f5c-51de-441e-a5f6-a7f64d85006f&quot;,&quot;8fe972b9-0550-4ceb-94fa-6b9827a3b735&quot;,&quot;cd591eb0-5b3b-4927-8ddf-a0eb2a07535f&quot;,&quot;a7343683-b02a-4660-b4e1-0dc234f1423f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2364,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e658c31c-cf8c-456c-817f-e19aaf8d6502&quot;,&quot;title&quot;:&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\convert-image\\withUser\\convertStudyImagesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\convert-image\\withUser\\convertStudyImagesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27; \&quot;before all\&quot; hook in \&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:247,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(\n    resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;),\n    TEST_USERS[0]\n);\nawait storeInstanceWithUserForTest(\n    resolve(__dirname, \&quot;../../../../testData/forStore/PDF/pdf.dcm\&quot;),\n    TEST_USERS[1]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3179b984-711a-4013-85f9-959ebc6296e3&quot;,&quot;parentUUID&quot;:&quot;e658c31c-cf8c-456c-817f-e19aaf8d6502&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should convert study&#x27;s instance to &#x27;png&#x27; with user &#x27;test&#x27; successfully&quot;,&quot;fullTitle&quot;:&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instance to &#x27;png&#x27; with user &#x27;test&#x27; successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;image/png\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new ConvertImageController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5ea74b1-b821-42b8-8d19-ec9bccd0f04a&quot;,&quot;parentUUID&quot;:&quot;e658c31c-cf8c-456c-817f-e19aaf8d6502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should convert study&#x27;s instances to &#x27;pdf&#x27; with user &#x27;test&#x27; successfully&quot;,&quot;fullTitle&quot;:&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27; Should convert study&#x27;s instances to &#x27;pdf&#x27; with user &#x27;test&#x27; successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${PDF_STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    },\n    params: {\n        studyUID: PDF_STUDY_UID\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new ConvertImageController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b29b3107-af53-4ad6-90e1-b66635f06271&quot;,&quot;parentUUID&quot;:&quot;e658c31c-cf8c-456c-817f-e19aaf8d6502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27; when convert study&#x27;s instances to &#x27;png&#x27;&quot;,&quot;fullTitle&quot;:&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27; Should return 404 with user &#x27;oTest&#x27; when convert study&#x27;s instances to &#x27;png&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;image/png\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new ConvertImageController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44168de5-4506-422f-ad35-9ec69699dc26&quot;,&quot;parentUUID&quot;:&quot;e658c31c-cf8c-456c-817f-e19aaf8d6502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27; when convert study&#x27;s instances to &#x27;pdf&#x27;&quot;,&quot;fullTitle&quot;:&quot;convert study&#x27;s instances to image with user &#x27;/dicom-web/:studyUID/convert-image&#x27; Should return 404 with user &#x27;oTest&#x27; when convert study&#x27;s instances to &#x27;pdf&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${PDF_STUDY_UID}/convert-image`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/pdf\&quot;\n    },\n    params: {\n        studyUID: PDF_STUDY_UID\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new ConvertImageController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4342f02f-1e1d-42d9-b009-c04350e6e6dd&quot;,&quot;parentUUID&quot;:&quot;e658c31c-cf8c-456c-817f-e19aaf8d6502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5ea74b1-b821-42b8-8d19-ec9bccd0f04a&quot;,&quot;b29b3107-af53-4ad6-90e1-b66635f06271&quot;,&quot;44168de5-4506-422f-ad35-9ec69699dc26&quot;,&quot;4342f02f-1e1d-42d9-b009-c04350e6e6dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:154,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c462682a-680a-435e-a42c-5e02f00d1e19&quot;,&quot;title&quot;:&quot;delete dicom with reason&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;delete dicom with reason\&quot;&quot;,&quot;fullTitle&quot;:&quot;delete dicom with reason \&quot;before each\&quot; hook in \&quot;delete dicom with reason\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1719,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c066af4-6095-4436-b987-026a5ccddeca&quot;,&quot;parentUUID&quot;:&quot;c462682a-680a-435e-a42c-5e02f00d1e19&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b3a45de5-7dad-49ab-ba11-0f5d2fea0cd3&quot;,&quot;title&quot;:&quot;instance level&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete instance with reason and expect 4 instances in series&quot;,&quot;fullTitle&quot;:&quot;delete dicom with reason instance level Should delete instance with reason and expect 4 instances in series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nexpect(res.statusCode).to.equal(200);\nlet getReasonRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/delete-reason/${INSTANCE_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(getReasonRes.statusCode).to.equal(200);\n\nlet reason = await getReasonRes.json();\nexpect(reason).have.property(\&quot;uid\&quot;).to.be.equal(INSTANCE_UID);\nexpect(reason).have.property(\&quot;reason\&quot;).to.be.equal(\&quot;test\&quot;);\nexpect(reason).have.property(\&quot;deleteBy\&quot;).to.be.equal(\&quot;NONE\&quot;);\nlet queryRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(queryRes.statusCode).to.equal(200);\nlet instances = await queryRes.json();\nexpect(instances).to.be.an(\&quot;array\&quot;).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a16c2cf3-037d-43ad-ae4b-d26b8eb3b9a3&quot;,&quot;parentUUID&quot;:&quot;b3a45de5-7dad-49ab-ba11-0f5d2fea0cd3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a16c2cf3-037d-43ad-ae4b-d26b8eb3b9a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;266811e3-0b92-4e64-8731-fab825e327a5&quot;,&quot;title&quot;:&quot;series level&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete series with reason and expect 2 series in study&quot;,&quot;fullTitle&quot;:&quot;delete dicom with reason series level Should delete series with reason and expect 2 series in study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nexpect(res.statusCode).to.equal(200);\nlet getReasonRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/delete-reason/${SERIES_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(getReasonRes.statusCode).to.equal(200);\nlet reason = await getReasonRes.json();\nexpect(reason).have.property(\&quot;uid\&quot;).to.be.equal(SERIES_UID);\nexpect(reason).have.property(\&quot;reason\&quot;).to.be.equal(\&quot;test\&quot;);\nexpect(reason).have.property(\&quot;deleteBy\&quot;).to.be.equal(\&quot;NONE\&quot;);\nlet queryRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(queryRes.statusCode).to.equal(200);\nlet series = await queryRes.json();\nexpect(series).to.be.an(\&quot;array\&quot;).have.lengthOf(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84c634bb-1d01-4c2c-932b-abbe93d691ee&quot;,&quot;parentUUID&quot;:&quot;266811e3-0b92-4e64-8731-fab825e327a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84c634bb-1d01-4c2c-932b-abbe93d691ee&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7f1e3851-1ffc-4d2d-8051-6901c7b5f3a6&quot;,&quot;title&quot;:&quot;study level&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\deleteWithReason.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete study with reason and expect 3 studies&quot;,&quot;fullTitle&quot;:&quot;delete dicom with reason study level Should delete study with reason and expect 3 studies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nexpect(res.statusCode).to.equal(200);\nlet getReasonRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/delete-reason/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(getReasonRes.statusCode).to.equal(200);\nlet reason = await getReasonRes.json();\nexpect(reason).have.property(\&quot;uid\&quot;).to.be.equal(STUDY_UID);\nexpect(reason).have.property(\&quot;reason\&quot;).to.be.equal(\&quot;test\&quot;);\nexpect(reason).have.property(\&quot;deleteBy\&quot;).to.be.equal(\&quot;NONE\&quot;);\nlet queryRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(queryRes.statusCode).to.equal(200);\nlet series = await queryRes.json();\nexpect(series).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae4aa703-9b2f-4efe-8f98-ebea027020eb&quot;,&quot;parentUUID&quot;:&quot;7f1e3851-1ffc-4d2d-8051-6901c7b5f3a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae4aa703-9b2f-4efe-8f98-ebea027020eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a078a4fc-6030-47b0-8646-276567ecc28b&quot;,&quot;title&quot;:&quot;MWL-RS change filtered modality worklist status&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\changeFilteredMWLStatus.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\changeFilteredMWLStatus.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS change filtered modality worklist status\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change filtered modality worklist status \&quot;before all\&quot; hook in \&quot;MWL-RS change filtered modality worklist status\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1669,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [testMwlItem]\n});\nlet clonedMwlItem = structuredClone(testMwlItem);\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepID][\&quot;Value\&quot;][0] = \&quot;SPS-USA\&quot;;\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] = \&quot;USA\&quot;;\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [clonedMwlItem]\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffb1e506-3a74-4de3-9c11-f401021f9529&quot;,&quot;parentUUID&quot;:&quot;a078a4fc-6030-47b0-8646-276567ecc28b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should change filtered modality worklist status&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change filtered modality worklist status Should change filtered modality worklist status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems/status/READY?ScheduledProcedureStepSequence.ScheduledStationName=USA\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nlet mwlItems = await response.json();\nexpect(mwlItems).to.be.a(\&quot;array\&quot;);\nexpect(mwlItems).have.lengthOf(2);\nlet usaMwlItem = mwlItems.find(mwlItem =&gt; mwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] === \&quot;USA\&quot;);\nexpect(usaMwlItem)\n.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;READY\&quot;);\nlet ggMwlItem = mwlItems.find(mwlItem =&gt; mwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] === \&quot;GG\&quot;);\nexpect(ggMwlItem)\n.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;SCHEDULED\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;023d9621-19f8-4342-9bc5-63917e261bf9&quot;,&quot;parentUUID&quot;:&quot;a078a4fc-6030-47b0-8646-276567ecc28b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;023d9621-19f8-4342-9bc5-63917e261bf9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;56a303fd-6573-4c2f-b2f4-c358f8217f80&quot;,&quot;title&quot;:&quot;MWL-RS change MWL status&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\changeMWLStatus.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\changeMWLStatus.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS change MWL status\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change MWL status \&quot;before all\&quot; hook in \&quot;MWL-RS change MWL status\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1808,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [testMwlItem]\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;351fa02f-9619-4b60-807e-26d379a87343&quot;,&quot;parentUUID&quot;:&quot;56a303fd-6573-4c2f-b2f4-c358f8217f80&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should change MWL status SCHEDULED to READY&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change MWL status Should change MWL status SCHEDULED to READY&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/mwlitems/${mwlUID}/${spsID}/status/READY`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.a(\&quot;object\&quot;);\nexpect(data).to.have.property(\&quot;0020000D\&quot;).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.equal(mwlUID);\nexpect(data).to.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;READY\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa336020-adfe-4fa6-abe7-d27f2e9d6cc6&quot;,&quot;parentUUID&quot;:&quot;56a303fd-6573-4c2f-b2f4-c358f8217f80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when mwl not exist&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change MWL status Should raise 404 (Not Found) when mwl not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/mwlitems/1/1/status/READY`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b826b25-9b63-4293-a840-3a1e0d319bca&quot;,&quot;parentUUID&quot;:&quot;56a303fd-6573-4c2f-b2f4-c358f8217f80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa336020-adfe-4fa6-abe7-d27f2e9d6cc6&quot;,&quot;3b826b25-9b63-4293-a840-3a1e0d319bca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7d1d541e-b3d0-437f-9d0e-161a0c2c9321&quot;,&quot;title&quot;:&quot;MWL-RS count MWL&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\countMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\countMWL.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS count MWL\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS count MWL \&quot;before all\&quot; hook in \&quot;MWL-RS count MWL\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1664,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [testMwlItem]\n});\nlet clonedMwlItem = structuredClone(testMwlItem);\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepID][\&quot;Value\&quot;][0] = \&quot;SPS-USA\&quot;;\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] = \&quot;USA\&quot;;\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [clonedMwlItem]\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7da48fc-8982-4951-b36e-1b7827bbd167&quot;,&quot;parentUUID&quot;:&quot;7d1d541e-b3d0-437f-9d0e-161a0c2c9321&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should count modality worklist and expect 2&quot;,&quot;fullTitle&quot;:&quot;MWL-RS count MWL Should count modality worklist and expect 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/mwlitems/count\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.have.property(\&quot;count\&quot;).to.be.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe05c36e-6cc8-4902-bf94-4c1e098753d4&quot;,&quot;parentUUID&quot;:&quot;7d1d541e-b3d0-437f-9d0e-161a0c2c9321&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe05c36e-6cc8-4902-bf94-4c1e098753d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;title&quot;:&quot;MWL-RS create modality worklist&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\createMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\createMWL.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS create modality worklist\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist \&quot;before all\&quot; hook in \&quot;MWL-RS create modality worklist\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2220,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ed36de5-48ac-499d-90d1-e715307f6cab&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create modality worklist&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should create modality worklist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([testMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data).to.have.property(dictionary.keyword.PatientID).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.a(\&quot;string\&quot;);\nexpect(data).to.have.property(dictionary.keyword.PatientName).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.a(\&quot;object\&quot;);\nexpect(data).to.have.property(dictionary.keyword.ScheduledProcedureStepSequence).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.an(\&quot;object\&quot;);\nexpect(data[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0])\n    .to.have.property(dictionary.keyword.ScheduledStationAETitle)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;).to.be.a(\&quot;string\&quot;);\nexpect(data[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0])\n    .to.have.property(dictionary.keyword.ScheduledProcedureStepStartDate)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;).to.be.a(\&quot;string\&quot;);\nexpect(data[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0])\n    .to.have.property(dictionary.keyword.ScheduledProcedureStepStartTime)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;).to.be.a(\&quot;string\&quot;);\nexpect(data[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0])\n    .to.have.property(dictionary.keyword.Modality)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;).to.be.a(\&quot;string\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0362fa81-5848-47af-899b-ba94491ee917&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update modality worklist&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should update modality worklist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\nclonedMwlItem[\&quot;00401001\&quot;][\&quot;Value\&quot;][0] = \&quot;U-RPI\&quot;;\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .to.have.property(dictionary.keyword.RequestedProcedureID)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .to.be.equal(\&quot;U-RPI\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;076a5843-60d3-4526-8c61-a5dbd147fed8&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should assign default &#x27;ScheduledProcedureStepStatus&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should assign default &#x27;ScheduledProcedureStepStatus&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\ndelete clonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepStatus];\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .to.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .to.be.equal(\&quot;SCHEDULED\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00626409-34b6-4d63-bc36-a582155c4c02&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should assign default &#x27;ScheduledProcedureStepID&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should assign default &#x27;ScheduledProcedureStepID&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\ndelete clonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepID];\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .to.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .have.property(dictionary.keyword.ScheduledProcedureStepID)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .to.include(\&quot;SPS\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5691cfd4-f58d-4d1a-84c6-ae3a39769d08&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should assign default &#x27;ScheduledProcedureStepID&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should assign default &#x27;ScheduledProcedureStepID&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\ndelete clonedMwlItem[dictionary.keyword.RequestedProcedureID];\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .to.have.property(dictionary.keyword.RequestedProcedureID)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .to.include(\&quot;RP\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7caec285-4d9c-4f22-a6ce-f5f8cb157530&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should assign default &#x27;StudyInstanceUID&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should assign default &#x27;StudyInstanceUID&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\ndelete clonedMwlItem[dictionary.keyword.StudyInstanceUID];\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .to.have.property(dictionary.keyword.StudyInstanceUID)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b933080-bbd9-4fff-9848-ad208f3687f2&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should assign default &#x27;AccessionNumber&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should assign default &#x27;AccessionNumber&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\ndelete clonedMwlItem[dictionary.keyword.AccessionNumber];\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .to.have.property(dictionary.keyword.AccessionNumber)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdf1c4c4-66df-4996-8ccd-4cc19b4619b7&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should using 00080060 when sps.00080060 is empty&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should using 00080060 when sps.00080060 is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedMwlItem = structuredClone(testMwlItem);\ndelete clonedMwlItem[\&quot;00400100\&quot;][\&quot;Value\&quot;][0][\&quot;00080060\&quot;];\nclonedMwlItem[\&quot;00080060\&quot;][\&quot;Value\&quot;][0] = \&quot;OT\&quot;;\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedMwlItem])\n});\nexpect(response.statusCode).to.equal(201);\nlet data = await response.json();\nexpect(data)\n    .have.property(\&quot;00400100\&quot;)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .have.property(\&quot;00080060\&quot;)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .to.be.equal(\&quot;OT\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05994132-a974-4466-b1c7-f05c8317c1a7&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when patient not exist&quot;,&quot;fullTitle&quot;:&quot;MWL-RS create modality worklist Should raise 404 (Not Found) when patient not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([testMwlItem])\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c265d11-c2d7-46bb-90f5-597a4c152f03&quot;,&quot;parentUUID&quot;:&quot;83744faf-7a23-4433-834e-f61587369c7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0362fa81-5848-47af-899b-ba94491ee917&quot;,&quot;076a5843-60d3-4526-8c61-a5dbd147fed8&quot;,&quot;00626409-34b6-4d63-bc36-a582155c4c02&quot;,&quot;5691cfd4-f58d-4d1a-84c6-ae3a39769d08&quot;,&quot;7caec285-4d9c-4f22-a6ce-f5f8cb157530&quot;,&quot;6b933080-bbd9-4fff-9848-ad208f3687f2&quot;,&quot;cdf1c4c4-66df-4996-8ccd-4cc19b4619b7&quot;,&quot;05994132-a974-4466-b1c7-f05c8317c1a7&quot;,&quot;9c265d11-c2d7-46bb-90f5-597a4c152f03&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:61,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;fb448d5c-b1f2-4854-80db-2947c64b6321&quot;,&quot;title&quot;:&quot;MWL-RS delete&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\deleteMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\deleteMWL.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS delete\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS delete \&quot;before all\&quot; hook in \&quot;MWL-RS delete\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1634,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [testMwlItem]\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b517e84-95ae-4eff-bc61-5d05557fa47a&quot;,&quot;parentUUID&quot;:&quot;fb448d5c-b1f2-4854-80db-2947c64b6321&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete mwlitem&quot;,&quot;fullTitle&quot;:&quot;MWL-RS delete should delete mwlitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let beforeDeletingFetchMwlRes = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(beforeDeletingFetchMwlRes.statusCode).to.equal(200);\nlet beforeDeletingFetchMwlData = await beforeDeletingFetchMwlRes.json();\nexpect(beforeDeletingFetchMwlData).to.be.an(\&quot;array\&quot;);\nexpect(beforeDeletingFetchMwlData).have.lengthOf(1);\nconst deleteRes = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/mwlitems/${studyUID}/${spsID}`\n});\nexpect(deleteRes.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53f6e074-cfef-40e1-bf3c-8113c56cc9f7&quot;,&quot;parentUUID&quot;:&quot;fb448d5c-b1f2-4854-80db-2947c64b6321&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should raise 404 when mwlitem not exist&quot;,&quot;fullTitle&quot;:&quot;MWL-RS delete should raise 404 when mwlitem not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const deleteRes = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/mwlitems/${studyUID}/${spsID}`\n});\nexpect(deleteRes.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dda9e3b1-2744-4eb1-9efe-91391e9d2507&quot;,&quot;parentUUID&quot;:&quot;fb448d5c-b1f2-4854-80db-2947c64b6321&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53f6e074-cfef-40e1-bf3c-8113c56cc9f7&quot;,&quot;dda9e3b1-2744-4eb1-9efe-91391e9d2507&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7daba5a4-cfd3-43ec-82cf-a6bfc1c12d88&quot;,&quot;title&quot;:&quot;MWL-RS search modality worklist&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS search modality worklist\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist \&quot;before all\&quot; hook in \&quot;MWL-RS search modality worklist\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1619,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([testMwlItem])\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5b2ddd2-fc6c-48ee-aa31-71908b8e3ce8&quot;,&quot;parentUUID&quot;:&quot;7daba5a4-cfd3-43ec-82cf-a6bfc1c12d88&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should get modality worklist&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist Should get modality worklist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n            method: \&quot;GET\&quot;,\n            url: \&quot;/dicom-web/mwlitems\&quot;,\n            headers: {\n                \&quot;Accept\&quot;: \&quot;application/dicom+json\&quot;\n            }\n        });\n        expect(response.statusCode).to.be.equal(200);\n        let data = await response.json();\n        expect(data).to.be.an(\&quot;array\&quot;);\n        expect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3840d71-1402-4d80-98dd-b8a3281bf6e6&quot;,&quot;parentUUID&quot;:&quot;7daba5a4-cfd3-43ec-82cf-a6bfc1c12d88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;55c47393-56e6-486d-82c2-3c19187a150c&quot;,&quot;title&quot;:&quot;query parameters&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4305e288-8b2d-4156-9a3a-2618aa0c22af&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;StudyInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;StudyInstanceUID=1.2.276.0.7230010.3.2.102&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;StudyInstanceUID&#x27; Should query modality worklist with param &#x27;StudyInstanceUID=1.2.276.0.7230010.3.2.102&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0174d9a7-18f4-4dd8-89d9-4e023cc62b39&quot;,&quot;parentUUID&quot;:&quot;4305e288-8b2d-4156-9a3a-2618aa0c22af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;StudyInstanceUID=1.2.3.4&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;StudyInstanceUID&#x27; Should query modality worklist with param &#x27;StudyInstanceUID=1.2.3.4&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eaa7b4aa-d322-4e76-8830-6bbb121b2a8d&quot;,&quot;parentUUID&quot;:&quot;4305e288-8b2d-4156-9a3a-2618aa0c22af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0174d9a7-18f4-4dd8-89d9-4e023cc62b39&quot;,&quot;eaa7b4aa-d322-4e76-8830-6bbb121b2a8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;dba386d7-7bd8-4190-90af-b02a45785aae&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;StudyDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;StudyDate=19870714&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;StudyDate&#x27; Should query modality worklist with param &#x27;StudyDate=19870714&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb882676-7e60-420d-bb12-e05925c7550f&quot;,&quot;parentUUID&quot;:&quot;dba386d7-7bd8-4190-90af-b02a45785aae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;StudyDate=19900101&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;StudyDate&#x27; Should query modality worklist with param &#x27;StudyDate=19900101&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09278f16-444b-44c8-8a57-e8aef60150bf&quot;,&quot;parentUUID&quot;:&quot;dba386d7-7bd8-4190-90af-b02a45785aae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb882676-7e60-420d-bb12-e05925c7550f&quot;,&quot;09278f16-444b-44c8-8a57-e8aef60150bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7348deb5-b5ba-45c1-aab3-64ecf278781b&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;AccessionNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;AccessionNumber=acc-123456&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;AccessionNumber&#x27; Should query modality worklist with param &#x27;AccessionNumber=acc-123456&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04746afc-133f-4d9b-88e3-7d2073b4ff8c&quot;,&quot;parentUUID&quot;:&quot;7348deb5-b5ba-45c1-aab3-64ecf278781b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;AccessionNumber=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;AccessionNumber&#x27; Should query modality worklist with param &#x27;AccessionNumber=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1311c10e-2143-437a-b062-ad15edc06f32&quot;,&quot;parentUUID&quot;:&quot;7348deb5-b5ba-45c1-aab3-64ecf278781b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04746afc-133f-4d9b-88e3-7d2073b4ff8c&quot;,&quot;1311c10e-2143-437a-b062-ad15edc06f32&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;8e3981de-8c9b-4fb6-89c5-7b386d8604c2&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;RequestedProcedureID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;RequestedProcedureID=RP488M9439&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;RequestedProcedureID&#x27; Should query modality worklist with param &#x27;RequestedProcedureID=RP488M9439&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f52d76e7-4b67-4a22-96f1-aa96bc0f04a2&quot;,&quot;parentUUID&quot;:&quot;8e3981de-8c9b-4fb6-89c5-7b386d8604c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;RequestedProcedureID=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;RequestedProcedureID&#x27; Should query modality worklist with param &#x27;RequestedProcedureID=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71ab9a97-5c18-42e4-aff8-3a4efaedef2e&quot;,&quot;parentUUID&quot;:&quot;8e3981de-8c9b-4fb6-89c5-7b386d8604c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f52d76e7-4b67-4a22-96f1-aa96bc0f04a2&quot;,&quot;71ab9a97-5c18-42e4-aff8-3a4efaedef2e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;154ca712-ed30-4b55-9dcf-e240dc6ebd8d&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;AdmissionID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;AdmissionID=A-987&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;AdmissionID&#x27; Should query modality worklist with param &#x27;AdmissionID=A-987&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6047f56b-737b-479e-9705-3723a381c3fd&quot;,&quot;parentUUID&quot;:&quot;154ca712-ed30-4b55-9dcf-e240dc6ebd8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;AdmissionID=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;AdmissionID&#x27; Should query modality worklist with param &#x27;AdmissionID=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bfe1306-d30e-417d-9281-3b69e4191909&quot;,&quot;parentUUID&quot;:&quot;154ca712-ed30-4b55-9dcf-e240dc6ebd8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6047f56b-737b-479e-9705-3723a381c3fd&quot;,&quot;7bfe1306-d30e-417d-9281-3b69e4191909&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;972e490d-143d-4ce4-9d80-21c3730cc032&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;InstitutionName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;InstitutionName=HELL&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;InstitutionName&#x27; Should query modality worklist with param &#x27;InstitutionName=HELL&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;622bd937-6075-4427-8033-8bff94129fb0&quot;,&quot;parentUUID&quot;:&quot;972e490d-143d-4ce4-9d80-21c3730cc032&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;InstitutionName=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;InstitutionName&#x27; Should query modality worklist with param &#x27;InstitutionName=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bfe2f7a-4a65-4faf-8373-3ff0b79b932d&quot;,&quot;parentUUID&quot;:&quot;972e490d-143d-4ce4-9d80-21c3730cc032&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;622bd937-6075-4427-8033-8bff94129fb0&quot;,&quot;0bfe2f7a-4a65-4faf-8373-3ff0b79b932d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;b5161fec-3e98-492b-926e-cbc63e80db0d&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;InstitutionalDepartmentName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;InstitutionalDepartmentName=FLOOR18&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;InstitutionalDepartmentName&#x27; Should query modality worklist with param &#x27;InstitutionalDepartmentName=FLOOR18&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c659904f-6239-4343-8aa3-acc823a035ea&quot;,&quot;parentUUID&quot;:&quot;b5161fec-3e98-492b-926e-cbc63e80db0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;InstitutionalDepartmentName=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;InstitutionalDepartmentName&#x27; Should query modality worklist with param &#x27;InstitutionalDepartmentName=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bce302c7-6a65-456b-85f5-75e218784bd0&quot;,&quot;parentUUID&quot;:&quot;b5161fec-3e98-492b-926e-cbc63e80db0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c659904f-6239-4343-8aa3-acc823a035ea&quot;,&quot;bce302c7-6a65-456b-85f5-75e218784bd0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;08b291b9-1fdb-4f72-b6f4-3afabcf8f6b9&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=123456789&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=123456789&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e048fb08-ad23-4314-a4d8-8808104721e7&quot;,&quot;parentUUID&quot;:&quot;08b291b9-1fdb-4f72-b6f4-3afabcf8f6b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99d91513-3140-44f2-8f76-a948bd040f5f&quot;,&quot;parentUUID&quot;:&quot;08b291b9-1fdb-4f72-b6f4-3afabcf8f6b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e048fb08-ad23-4314-a4d8-8808104721e7&quot;,&quot;99d91513-3140-44f2-8f76-a948bd040f5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a04c4cc4-ab73-487b-977b-7388bf731f9f&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID=29c737e3-b739-4169-aca7-eea07a808643&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID=29c737e3-b739-4169-aca7-eea07a808643&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52d641b7-4f0a-4c87-924c-7b5489e5052c&quot;,&quot;parentUUID&quot;:&quot;a04c4cc4-ab73-487b-977b-7388bf731f9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;529f79b4-692d-4560-8532-2316c705aa5b&quot;,&quot;parentUUID&quot;:&quot;a04c4cc4-ab73-487b-977b-7388bf731f9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;52d641b7-4f0a-4c87-924c-7b5489e5052c&quot;,&quot;529f79b4-692d-4560-8532-2316c705aa5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5c32c165-1235-4675-990a-15208db5eccb&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType=UUID&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType&#x27; Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType=UUID&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e0a2851-518f-4c8b-9d8e-7200d60d2acf&quot;,&quot;parentUUID&quot;:&quot;5c32c165-1235-4675-990a-15208db5eccb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType&#x27; Should query modality worklist with param &#x27;IssuerOfAccessionNumberSequence.UniversalEntityIDType=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6487797f-a471-4fae-8a9e-bc4c319b15fa&quot;,&quot;parentUUID&quot;:&quot;5c32c165-1235-4675-990a-15208db5eccb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e0a2851-518f-4c8b-9d8e-7200d60d2acf&quot;,&quot;6487797f-a471-4fae-8a9e-bc4c319b15fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e7789a83-3d0a-4dbd-8158-44592e234faa&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=987654321&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=987654321&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;120e0ad6-3653-4e76-a46a-814667a6fdce&quot;,&quot;parentUUID&quot;:&quot;e7789a83-3d0a-4dbd-8158-44592e234faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6539caec-3a46-4bfa-9396-e00802750d59&quot;,&quot;parentUUID&quot;:&quot;e7789a83-3d0a-4dbd-8158-44592e234faa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;120e0ad6-3653-4e76-a46a-814667a6fdce&quot;,&quot;6539caec-3a46-4bfa-9396-e00802750d59&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;30f2e26e-f191-4a10-ad0a-d337d721c14e&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=a8f1bce0-efbf-4dea-a85b-84976b5020d0&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=a8f1bce0-efbf-4dea-a85b-84976b5020d0&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41dfae8e-08dc-4056-b89b-430c8a6e12e5&quot;,&quot;parentUUID&quot;:&quot;30f2e26e-f191-4a10-ad0a-d337d721c14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID&#x27; Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0221740-75c6-481f-bca1-378f1f2ceb1a&quot;,&quot;parentUUID&quot;:&quot;30f2e26e-f191-4a10-ad0a-d337d721c14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41dfae8e-08dc-4056-b89b-430c8a6e12e5&quot;,&quot;a0221740-75c6-481f-bca1-378f1f2ceb1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e6a76ee7-94cd-4540-9a19-07c050f2b964&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=UUID&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType&#x27; Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=UUID&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;120c779a-f61f-4fd0-9dc0-28b82bfbb6fe&quot;,&quot;parentUUID&quot;:&quot;e6a76ee7-94cd-4540-9a19-07c050f2b964&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType&#x27; Should query modality worklist with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;325cd3de-67e2-431b-8dc0-049d9c10555d&quot;,&quot;parentUUID&quot;:&quot;e6a76ee7-94cd-4540-9a19-07c050f2b964&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;120c779a-f61f-4fd0-9dc0-28b82bfbb6fe&quot;,&quot;325cd3de-67e2-431b-8dc0-049d9c10555d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1efaf21d-08e2-40b0-be44-077e55bad971&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle=WORKLIST&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle=WORKLIST&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2236ebfa-d671-4e21-9933-56864ef67d59&quot;,&quot;parentUUID&quot;:&quot;1efaf21d-08e2-40b0-be44-077e55bad971&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationAETitle=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2f6db3c-b482-4b4b-af5a-8ae86fab16bd&quot;,&quot;parentUUID&quot;:&quot;1efaf21d-08e2-40b0-be44-077e55bad971&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2236ebfa-d671-4e21-9933-56864ef67d59&quot;,&quot;f2f6db3c-b482-4b4b-af5a-8ae86fab16bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2c384dd7-6fec-42c8-be4b-76e54474c9e6&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName=GG&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName=GG&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;babd86a6-09d0-4146-a82f-30af56f1d956&quot;,&quot;parentUUID&quot;:&quot;2c384dd7-6fec-42c8-be4b-76e54474c9e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName=foobar&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledStationName=foobar&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad50ec91-8753-4a3f-b0d0-ecc163d55530&quot;,&quot;parentUUID&quot;:&quot;2c384dd7-6fec-42c8-be4b-76e54474c9e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;babd86a6-09d0-4146-a82f-30af56f1d956&quot;,&quot;ad50ec91-8753-4a3f-b0d0-ecc163d55530&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3678be9a-294a-45ea-be5f-b330d1a7b1af&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate=20231021&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate=20231021&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e900469-9bc7-4102-bd83-bf92b8c73a1f&quot;,&quot;parentUUID&quot;:&quot;3678be9a-294a-45ea-be5f-b330d1a7b1af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate=19990101&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartDate=19990101&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3cb5ef1-dd41-4c7e-b7e9-a70f4e1c61da&quot;,&quot;parentUUID&quot;:&quot;3678be9a-294a-45ea-be5f-b330d1a7b1af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e900469-9bc7-4102-bd83-bf92b8c73a1f&quot;,&quot;c3cb5ef1-dd41-4c7e-b7e9-a70f4e1c61da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7c51fba8-93b5-436b-91cf-56aa0ec3169b&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate=20231212&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate=20231212&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c73cbd3b-73c4-4837-9078-a53b36698a47&quot;,&quot;parentUUID&quot;:&quot;7c51fba8-93b5-436b-91cf-56aa0ec3169b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate=19990101&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndDate=19990101&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc18017b-f861-4ed1-95bf-0a4ffccdb289&quot;,&quot;parentUUID&quot;:&quot;7c51fba8-93b5-436b-91cf-56aa0ec3169b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c73cbd3b-73c4-4837-9078-a53b36698a47&quot;,&quot;dc18017b-f861-4ed1-95bf-0a4ffccdb289&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;dcd7dad9-5c82-4736-a406-8adb23a866cb&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime=003525.475&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime=003525.475&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ff6e9ed-ea4e-4ac3-b5df-3c9c7fd9755e&quot;,&quot;parentUUID&quot;:&quot;dcd7dad9-5c82-4736-a406-8adb23a866cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime=013525&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStartTime=013525&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;347742ec-964f-4991-8245-d72221b8d361&quot;,&quot;parentUUID&quot;:&quot;dcd7dad9-5c82-4736-a406-8adb23a866cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ff6e9ed-ea4e-4ac3-b5df-3c9c7fd9755e&quot;,&quot;347742ec-964f-4991-8245-d72221b8d361&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c9e652ab-99da-4b23-a895-7ba71d21c987&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime=123525.475&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime=123525.475&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8544c14-8247-4331-bde6-7fbf9707e898&quot;,&quot;parentUUID&quot;:&quot;c9e652ab-99da-4b23-a895-7ba71d21c987&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime=003525&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepEndTime=003525&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0097eddf-d04a-49d6-a57f-2b040dd89c94&quot;,&quot;parentUUID&quot;:&quot;c9e652ab-99da-4b23-a895-7ba71d21c987&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a8544c14-8247-4331-bde6-7fbf9707e898&quot;,&quot;0097eddf-d04a-49d6-a57f-2b040dd89c94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;abbe4037-8104-4dc9-8f80-dc1e2bd8d44a&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName=ENT00373&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName=ENT00373&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb498ee8-a504-4169-bb08-2d31e0401278&quot;,&quot;parentUUID&quot;:&quot;abbe4037-8104-4dc9-8f80-dc1e2bd8d44a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName=ENT123&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledPerformingPhysicianName=ENT123&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45d33faf-5f07-4ba3-adf1-8960eb5e20e9&quot;,&quot;parentUUID&quot;:&quot;abbe4037-8104-4dc9-8f80-dc1e2bd8d44a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb498ee8-a504-4169-bb08-2d31e0401278&quot;,&quot;45d33faf-5f07-4ba3-adf1-8960eb5e20e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1f143f61-a8bf-4b96-a7fd-15ccf94378dc&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription=EXAM-DESC&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription=EXAM-DESC&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07b11e14-b5c5-4c42-b005-1db96122c0d2&quot;,&quot;parentUUID&quot;:&quot;1f143f61-a8bf-4b96-a7fd-15ccf94378dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription=ENT123&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepDescription=ENT123&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;913020bc-35b3-40a3-869c-e10978ba080a&quot;,&quot;parentUUID&quot;:&quot;1f143f61-a8bf-4b96-a7fd-15ccf94378dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07b11e14-b5c5-4c42-b005-1db96122c0d2&quot;,&quot;913020bc-35b3-40a3-869c-e10978ba080a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ef0da078-1b3b-4bc3-8011-533a642fd569&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID=SPS-00000002&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID=SPS-00000002&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;572a7ff6-0e04-455d-9a37-c9b83b12136b&quot;,&quot;parentUUID&quot;:&quot;ef0da078-1b3b-4bc3-8011-533a642fd569&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID=ENT123&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepID=ENT123&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c6a1c4d-dba5-4a05-bb93-4ef7d949c91a&quot;,&quot;parentUUID&quot;:&quot;ef0da078-1b3b-4bc3-8011-533a642fd569&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;572a7ff6-0e04-455d-9a37-c9b83b12136b&quot;,&quot;6c6a1c4d-dba5-4a05-bb93-4ef7d949c91a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d0cb737a-0cc6-4bb2-b188-fbbdbf4386d2&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus=SCHEDULED&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus=SCHEDULED&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a3f1d63-bc8f-43e9-baa6-1fb534a8448c&quot;,&quot;parentUUID&quot;:&quot;d0cb737a-0cc6-4bb2-b188-fbbdbf4386d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus=COMPLETED&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus&#x27; Should query modality worklist with param &#x27;ScheduledProcedureStepSequence.ScheduledProcedureStepStatus=COMPLETED&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4acacffa-7918-4905-923a-434226cc6fe0&quot;,&quot;parentUUID&quot;:&quot;d0cb737a-0cc6-4bb2-b188-fbbdbf4386d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a3f1d63-bc8f-43e9-baa6-1fb534a8448c&quot;,&quot;4acacffa-7918-4905-923a-434226cc6fe0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;30f05bc8-1876-4027-8bf6-93893ca281d6&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;PatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\searchMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;PatientID=123456&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;PatientID&#x27; Should query modality worklist with param &#x27;PatientID=123456&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8a9c8c5-7c6c-4c7b-8701-82943bd87e68&quot;,&quot;parentUUID&quot;:&quot;30f05bc8-1876-4027-8bf6-93893ca281d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query modality worklist with param &#x27;PatientID=111111&#x27; and get modality worklist successfully&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist query parameters query modality worklist with param &#x27;PatientID&#x27; Should query modality worklist with param &#x27;PatientID=111111&#x27; and get modality worklist successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/mwlitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;944f62cc-370d-4401-8b9c-ddf426236326&quot;,&quot;parentUUID&quot;:&quot;30f05bc8-1876-4027-8bf6-93893ca281d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8a9c8c5-7c6c-4c7b-8701-82943bd87e68&quot;,&quot;944f62cc-370d-4401-8b9c-ddf426236326&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;e3840d71-1402-4d80-98dd-b8a3281bf6e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;19fcd90a-ec7f-421a-8ec4-28d23bcd1d1c&quot;,&quot;title&quot;:&quot;MWL-RS change filtered modality worklist status for user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\withUser\\changeFilteredMWLStatusWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\withUser\\changeFilteredMWLStatusWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS change filtered modality worklist status for user\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change filtered modality worklist status for user \&quot;before all\&quot; hook in \&quot;MWL-RS change filtered modality worklist status for user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:132,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[0]);\nlet clonedMwlItem = structuredClone(testMwlItem);\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepID][\&quot;Value\&quot;][0] = \&quot;SPS-USA\&quot;;\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] = \&quot;USA\&quot;;\nawait TestMwlUtils.ByUser.createMockMwlItem(clonedMwlItem, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;daf58c77-d5fe-443f-8532-195a6c3aa35c&quot;,&quot;parentUUID&quot;:&quot;19fcd90a-ec7f-421a-8ec4-28d23bcd1d1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should change filtered modality worklist status for user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change filtered modality worklist status for user Should change filtered modality worklist status for user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: \&quot;/dicom-web/mwlitems/status/READY?ScheduledProcedureStepSequence.ScheduledStationName=USA\&quot;,\n    method: \&quot;POST\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        status: \&quot;READY\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait ChangeFilteredMwlItemStatusController(request, response);\n\nlet queryRequest = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nawait GetMwlItemController(queryRequest, queryResponse);\nexpect(queryResponse.statusCode).to.equal(200);\nlet mwlItems = await queryResponse._getJSONData();\nexpect(mwlItems).to.be.a(\&quot;array\&quot;);\nexpect(mwlItems).have.lengthOf(2);\nlet usaMwlItem = mwlItems.find(mwlItem =&gt; mwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] === \&quot;USA\&quot;);\nexpect(usaMwlItem)\n.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;READY\&quot;);\nlet ggMwlItem = mwlItems.find(mwlItem =&gt; mwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] === \&quot;GG\&quot;);\nexpect(ggMwlItem)\n.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;SCHEDULED\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f513323-a355-4c61-b7a3-c1a1f29ba2ef&quot;,&quot;parentUUID&quot;:&quot;19fcd90a-ec7f-421a-8ec4-28d23bcd1d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 when search modality worklist by user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change filtered modality worklist status for user Should return 404 when search modality worklist by user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait GetMwlItemController(request, response);\nexpect(response.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af357993-04a4-45cb-be94-0af4c12433c0&quot;,&quot;parentUUID&quot;:&quot;19fcd90a-ec7f-421a-8ec4-28d23bcd1d1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f513323-a355-4c61-b7a3-c1a1f29ba2ef&quot;,&quot;af357993-04a4-45cb-be94-0af4c12433c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5b7be94c-b1bb-4240-b81b-3502a4b79e0d&quot;,&quot;title&quot;:&quot;MWL-RS change MWL status for user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\withUser\\changeMWLStatusWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\withUser\\changeMWLStatusWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS change MWL status for user\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change MWL status for user \&quot;before all\&quot; hook in \&quot;MWL-RS change MWL status for user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:230,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[2]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[0]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[2]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58ea8c7d-a6bc-4a1d-8935-813f10c7dc60&quot;,&quot;parentUUID&quot;:&quot;5b7be94c-b1bb-4240-b81b-3502a4b79e0d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should change MWL status SCHEDULED to READY for user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change MWL status for user Should change MWL status SCHEDULED to READY for user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/mwlitems/${mwlUID}/${spsID}/status/READY`,\n    method: \&quot;POST\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        studyUID: mwlUID,\n        spsID: spsID,\n        status: \&quot;READY\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait ChangeMwlItemStatusController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nawait GetMwlItemController(queryRequest, queryResponse);\nexpect(queryResponse.statusCode).to.equal(200);\nlet mwlItems = await queryResponse._getJSONData();\nexpect(mwlItems).to.be.a(\&quot;array\&quot;);\nexpect(mwlItems).have.lengthOf(1);\nexpect(mwlItems[0])\n.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;READY\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bddfd808-1311-409f-8bd1-4ad2aab8b470&quot;,&quot;parentUUID&quot;:&quot;5b7be94c-b1bb-4240-b81b-3502a4b79e0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 when search modality worklist by user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS change MWL status for user Should return 404 when search modality worklist by user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait GetMwlItemController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet mwlItems = await response._getJSONData();\nexpect(mwlItems).to.be.a(\&quot;array\&quot;);\nexpect(mwlItems).have.lengthOf(1);\nexpect(mwlItems[0])\n.have.property(dictionary.keyword.ScheduledProcedureStepSequence)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.have.property(dictionary.keyword.ScheduledProcedureStepStatus)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;)\n.to.be.equal(\&quot;SCHEDULED\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cd9b3cc-a65d-4759-bed9-d329a7721e66&quot;,&quot;parentUUID&quot;:&quot;5b7be94c-b1bb-4240-b81b-3502a4b79e0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bddfd808-1311-409f-8bd1-4ad2aab8b470&quot;,&quot;7cd9b3cc-a65d-4759-bed9-d329a7721e66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1fd545e7-779f-4fc7-82e1-b334832c5bc8&quot;,&quot;title&quot;:&quot;MWL-RS count MWL with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\withUser\\countMWLWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\withUser\\countMWLWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS count MWL with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS count MWL with user \&quot;before all\&quot; hook in \&quot;MWL-RS count MWL with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:237,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\nawait storeInstanceWithUserForTest(dicomFile, TEST_USERS[2]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[0]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[2]);\nlet clonedMwlItem = structuredClone(testMwlItem);\nclonedMwlItem[dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0] = await UIDUtils.createUID();\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepID][\&quot;Value\&quot;][0] = \&quot;SPS-USA\&quot;;\nclonedMwlItem[dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledStationName][\&quot;Value\&quot;][0] = \&quot;USA\&quot;;\nawait TestMwlUtils.ByUser.createMockMwlItem(clonedMwlItem, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db20f37d-0af8-469a-9c41-d4905cb5c310&quot;,&quot;parentUUID&quot;:&quot;1fd545e7-779f-4fc7-82e1-b334832c5bc8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should count MWL with user and expect 2&quot;,&quot;fullTitle&quot;:&quot;MWL-RS count MWL with user Should count MWL with user and expect 2&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: \&quot;/dicom-web/mwlitems/count\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CountMwlItemController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet data = response._getJSONData();\nexpect(data).to.have.property(\&quot;count\&quot;).to.be.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64df1f0b-a6fb-4737-b1f1-2aacbd628b5e&quot;,&quot;parentUUID&quot;:&quot;1fd545e7-779f-4fc7-82e1-b334832c5bc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64df1f0b-a6fb-4737-b1f1-2aacbd628b5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;fd51a2b0-4f76-4f5b-bbb3-7fa9610f3497&quot;,&quot;title&quot;:&quot;MWL-RS delete with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\withUser\\deleteMWLWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\withUser\\deleteMWLWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS delete with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS delete with user \&quot;before all\&quot; hook in \&quot;MWL-RS delete with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor(let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\nawait storeInstanceWithUserForTest(dicomFile, TEST_USERS[2]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[0]);\nawait TestMwlUtils.ByUser.createMockMwlItem(testMwlItem, TEST_USERS[2]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aca8348c-e4c4-4d96-b642-3d22a5806681&quot;,&quot;parentUUID&quot;:&quot;fd51a2b0-4f76-4f5b-bbb3-7fa9610f3497&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete mwlitem&quot;,&quot;fullTitle&quot;:&quot;MWL-RS delete with user should delete mwlitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let searchBeforeDeleteRequest = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet searchBeforeDeleteResponse = createResponse();\nawait GetMwlItemController(searchBeforeDeleteRequest, searchBeforeDeleteResponse);\nexpect(searchBeforeDeleteResponse.statusCode).to.equal(200);\nlet searchBeforeDeleteData = searchBeforeDeleteResponse._getJSONData();\nexpect(searchBeforeDeleteData).to.be.an(\&quot;array\&quot;);\nexpect(searchBeforeDeleteData).have.lengthOf(1);\nlet studyUID = searchBeforeDeleteData[0][dictionary.keyword.StudyInstanceUID][\&quot;Value\&quot;][0];\nlet spsID = searchBeforeDeleteData[0][dictionary.keyword.ScheduledProcedureStepSequence][\&quot;Value\&quot;][0][dictionary.keyword.ScheduledProcedureStepID][\&quot;Value\&quot;][0];\nlet deleteRequest = createRequest({\n    url: `/dicom-web/mwlitems/${studyUID}/${spsID}`,\n    method: \&quot;DELETE\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        studyUID,\n        spsID\n    },\n    user: TEST_USERS[0]\n});\nlet deleteResponse = createResponse();\nawait DeleteMwlItemController(deleteRequest, deleteResponse);\nexpect(deleteResponse.statusCode).to.equal(200);\nlet searchAfterDeleteRequest = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet searchAfterDeleteResponse = createResponse();\nawait GetMwlItemController(searchAfterDeleteRequest, searchAfterDeleteResponse);\nexpect(searchAfterDeleteResponse.statusCode).to.equal(204);\nlet searchUser2Request = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[2]\n});\nlet searchUser2Response = createResponse();\nawait GetMwlItemController(searchUser2Request, searchUser2Response);\nexpect(searchUser2Response.statusCode).to.equal(200);\nlet searchUser2Data = searchUser2Response._getJSONData();\nexpect(searchUser2Data).to.be.an(\&quot;array\&quot;);\nexpect(searchUser2Data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d13f7859-1965-4438-909a-ff9b3a92b6d7&quot;,&quot;parentUUID&quot;:&quot;fd51a2b0-4f76-4f5b-bbb3-7fa9610f3497&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d13f7859-1965-4438-909a-ff9b3a92b6d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;63fba93a-d7d8-4fd8-a8b6-edded6142ebd&quot;,&quot;title&quot;:&quot;MWL-RS search modality worklist with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\MWL-RS\\withUser\\searchMWLWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\MWL-RS\\withUser\\searchMWLWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;MWL-RS search modality worklist with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist with user \&quot;before all\&quot; hook in \&quot;MWL-RS search modality worklist with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);\nlet request = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;POST\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [structuredClone(testMwlItem)],\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateMwlItemController(request, response);\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72b0f95c-3699-4dfa-b790-1c3f2fef1dc2&quot;,&quot;parentUUID&quot;:&quot;63fba93a-d7d8-4fd8-a8b6-edded6142ebd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should search modality worklist with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist with user Should search modality worklist with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetMwlItemController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;905fcaad-af43-4015-833e-ac7c8092eb37&quot;,&quot;parentUUID&quot;:&quot;63fba93a-d7d8-4fd8-a8b6-edded6142ebd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 when search modality worklist by user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;MWL-RS search modality worklist with user Should return 404 when search modality worklist by user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    method: \&quot;GET\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait GetMwlItemController(request, response);\nexpect(response.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f31f03ed-a63f-4bbe-8912-e9a6822b8585&quot;,&quot;parentUUID&quot;:&quot;63fba93a-d7d8-4fd8-a8b6-edded6142ebd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;905fcaad-af43-4015-833e-ac7c8092eb37&quot;,&quot;f31f03ed-a63f-4bbe-8912-e9a6822b8585&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7048d8c7-c76f-4095-bb0f-b3e0a0ed1afd&quot;,&quot;title&quot;:&quot;PAM-RS create patient &#x27;/dicom-web/patients&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\PAM-RS\\createPatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\PAM-RS\\createPatient.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;PAM-RS create patient &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;PAM-RS create patient &#x27;/dicom-web/patients&#x27; \&quot;before all\&quot; hook in \&quot;PAM-RS create patient &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54b0fab1-0800-4a0b-8254-2d5da78302e2&quot;,&quot;parentUUID&quot;:&quot;7048d8c7-c76f-4095-bb0f-b3e0a0ed1afd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create patient&quot;,&quot;fullTitle&quot;:&quot;PAM-RS create patient &#x27;/dicom-web/patients&#x27; Should create patient&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: structuredClone(testPatient)\n});\nexpect(response.statusCode).to.equal(201);\nlet createdPatient = await response.json();\nexpect(createdPatient).to.be.a(\&quot;object\&quot;);\nexpect(createdPatient).have.property(\&quot;00100010\&quot;).to.be.deep.equal(testPatient[\&quot;00100010\&quot;]);\nexpect(createdPatient).have.property(\&quot;00100020\&quot;).to.be.deep.equal(testPatient[\&quot;00100020\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31a7e547-ee18-452a-aa6c-1a21df086e83&quot;,&quot;parentUUID&quot;:&quot;7048d8c7-c76f-4095-bb0f-b3e0a0ed1afd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31a7e547-ee18-452a-aa6c-1a21df086e83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;b7246d80-fead-4d8c-9148-bf475e6cd0dd&quot;,&quot;title&quot;:&quot;PAM-RS update patient &#x27;/dicom-web/patients&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\PAM-RS\\updatePatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\PAM-RS\\updatePatient.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;PAM-RS update patient &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;PAM-RS update patient &#x27;/dicom-web/patients&#x27; \&quot;before all\&quot; hook in \&quot;PAM-RS update patient &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: structuredClone(testPatient)\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9f74ec8-acaf-4b9b-a463-7e432375faf3&quot;,&quot;parentUUID&quot;:&quot;b7246d80-fead-4d8c-9148-bf475e6cd0dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should update patient&quot;,&quot;fullTitle&quot;:&quot;PAM-RS update patient &#x27;/dicom-web/patients&#x27; Should update patient&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedPatient = structuredClone(testPatient);\nclonedPatient[\&quot;00100010\&quot;][\&quot;Value\&quot;][0][\&quot;Alphabetic\&quot;] = \&quot;nobody\&quot;;\nlet response = await inject(app, {\n    method: \&quot;put\&quot;,\n    url: `/dicom-web/patients/${patientID}`,\n    body: clonedPatient\n});\nexpect(response.statusCode).to.equal(200);\nlet updatedPatient = await response.json();\nexpect(updatedPatient).to.be.a(\&quot;object\&quot;);\nexpect(updatedPatient)\n.have.property(\&quot;00100010\&quot;)\n.have.property(\&quot;Value\&quot;)\n.to.be.deep.equal([{ \&quot;Alphabetic\&quot;: \&quot;nobody\&quot; }]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92f1d36c-48aa-4a1c-a064-1b8dce810aa4&quot;,&quot;parentUUID&quot;:&quot;b7246d80-fead-4d8c-9148-bf475e6cd0dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92f1d36c-48aa-4a1c-a064-1b8dce810aa4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;87033447-899a-4958-956c-3e63cfcd7927&quot;,&quot;title&quot;:&quot;PAM-RS create patient with user &#x27;/dicom-web/patients&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\PAM-RS\\withUser\\createPatientWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\PAM-RS\\withUser\\createPatientWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;PAM-RS create patient with user &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;PAM-RS create patient with user &#x27;/dicom-web/patients&#x27; \&quot;before all\&quot; hook in \&quot;PAM-RS create patient with user &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d25a75f0-eada-43a3-97c6-4f732c6c3c10&quot;,&quot;parentUUID&quot;:&quot;87033447-899a-4958-956c-3e63cfcd7927&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create patient with user&quot;,&quot;fullTitle&quot;:&quot;PAM-RS create patient with user &#x27;/dicom-web/patients&#x27; Should create patient with user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: structuredClone(testPatient)\n});\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet createPatientService = new CreatePatientService(request, response);\nawait createPatientService.create();\nrequest = createRequest({\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: structuredClone(testPatient)\n});\nrequest.user = TEST_USERS[1];\nresponse = createResponse();\ncreatePatientService = new CreatePatientService(request, response);\nawait createPatientService.create();\nif (process.env.TEST_DB_TYPE === \&quot;sql\&quot;) {\n    let patient = await PatientModel.findAll({ where: { x00100020: testPatient[\&quot;00100020\&quot;].Value[0] } });\n    // because of two users have same group, so the patient will be created only once\n    expect(patient).to.be.an(\&quot;array\&quot;).to.have.lengthOf(1);\n    expect(patient[0].user_id).to.be.not.equal(null);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff176ea9-4629-4c65-a223-9796fd0a6e6a&quot;,&quot;parentUUID&quot;:&quot;87033447-899a-4958-956c-3e63cfcd7927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create 2 patients with different group&quot;,&quot;fullTitle&quot;:&quot;PAM-RS create patient with user &#x27;/dicom-web/patients&#x27; should create 2 patients with different group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: structuredClone(testPatient)\n});\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet createPatientService = new CreatePatientService(request, response);\nawait createPatientService.create();\nrequest.user = TEST_USERS[2];\nresponse = createResponse();\ncreatePatientService = new CreatePatientService(request, response);\nawait createPatientService.create();\nif (process.env.TEST_DB_TYPE === \&quot;sql\&quot;) {\n    let patient = await PatientModel.findAll({ where: { x00100020: testPatient[\&quot;00100020\&quot;].Value[0] } });\n    expect(patient).to.be.an(\&quot;array\&quot;).to.have.lengthOf(2);\n    expect(patient[0].user_id).to.be.not.equal(patient[1].user_id);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5abfd27-149e-451d-95bc-5da25e6b7193&quot;,&quot;parentUUID&quot;:&quot;87033447-899a-4958-956c-3e63cfcd7927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff176ea9-4629-4c65-a223-9796fd0a6e6a&quot;,&quot;a5abfd27-149e-451d-95bc-5da25e6b7193&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3ca3b363-82f8-44f5-acb0-76ac70b456aa&quot;,&quot;title&quot;:&quot;Query instance by label name&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\label\\queryInstanceByLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\label\\queryInstanceByLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Query instance by label name\&quot;&quot;,&quot;fullTitle&quot;:&quot;Query instance by label name \&quot;before all\&quot; hook in \&quot;Query instance by label name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1658,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${INSTANCE_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd25925e-9b1a-4754-b662-ec8880013c82&quot;,&quot;parentUUID&quot;:&quot;3ca3b363-82f8-44f5-acb0-76ac70b456aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instance by label&quot;,&quot;fullTitle&quot;:&quot;Query instance by label name Should query instance by label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?labelName=test`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\n\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);\nexpect(data[0][\&quot;0020000D\&quot;][\&quot;Value\&quot;][0]).to.equal(STUDY_UID);\nexpect(data[0][\&quot;0020000E\&quot;][\&quot;Value\&quot;][0]).to.equal(SERIES_UID);\nexpect(data[0][\&quot;00080018\&quot;][\&quot;Value\&quot;][0]).to.equal(INSTANCE_UID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddf5cbf1-132e-4cdf-adac-f064cf827b20&quot;,&quot;parentUUID&quot;:&quot;3ca3b363-82f8-44f5-acb0-76ac70b456aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ddf5cbf1-132e-4cdf-adac-f064cf827b20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9f31fa2d-ae9d-48ab-b9a1-3b59bb93a2aa&quot;,&quot;title&quot;:&quot;Query series by label name&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\label\\querySeriesByLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\label\\querySeriesByLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Query series by label name\&quot;&quot;,&quot;fullTitle&quot;:&quot;Query series by label name \&quot;before all\&quot; hook in \&quot;Query series by label name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1688,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${SERIES_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9386c381-a737-4f2b-bc9f-4e111684f3e8&quot;,&quot;parentUUID&quot;:&quot;9f31fa2d-ae9d-48ab-b9a1-3b59bb93a2aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series by label&quot;,&quot;fullTitle&quot;:&quot;Query series by label name Should query series by label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?labelName=test`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\n\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);\nexpect(data[0][\&quot;0020000D\&quot;][\&quot;Value\&quot;][0]).to.equal(STUDY_UID);\nexpect(data[0][\&quot;0020000E\&quot;][\&quot;Value\&quot;][0]).to.equal(SERIES_UID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbef33c3-9b83-4909-ba52-baf8cf029558&quot;,&quot;parentUUID&quot;:&quot;9f31fa2d-ae9d-48ab-b9a1-3b59bb93a2aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbef33c3-9b83-4909-ba52-baf8cf029558&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;cc73469b-9e51-44bd-9989-1d02f81998f3&quot;,&quot;title&quot;:&quot;Query studies by label name&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\label\\queryStudiesByLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\label\\queryStudiesByLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Query studies by label name\&quot;&quot;,&quot;fullTitle&quot;:&quot;Query studies by label name \&quot;before all\&quot; hook in \&quot;Query studies by label name\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2225,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b01a0c5-fe5f-418f-8f3b-03771ea09967&quot;,&quot;parentUUID&quot;:&quot;cc73469b-9e51-44bd-9989-1d02f81998f3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies by label&quot;,&quot;fullTitle&quot;:&quot;Query studies by label name Should query studies by label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?labelName=test`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\n\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);\nexpect(data[0][\&quot;0020000D\&quot;][\&quot;Value\&quot;][0]).to.equal(STUDY_UID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ad2b90e-256c-4a8c-a3a2-b6c94fd98853&quot;,&quot;parentUUID&quot;:&quot;cc73469b-9e51-44bd-9989-1d02f81998f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ad2b90e-256c-4a8c-a3a2-b6c94fd98853&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;37617724-74e9-42c6-abde-808da95ec06a&quot;,&quot;title&quot;:&quot;query instances&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query instances\&quot;&quot;,&quot;fullTitle&quot;:&quot;query instances \&quot;before all\&quot; hook in \&quot;query instances\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1630,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee99d1a8-4fed-4929-8c1a-37bb7e2ee101&quot;,&quot;parentUUID&quot;:&quot;37617724-74e9-42c6-abde-808da95ec06a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;query instances\&quot;&quot;,&quot;fullTitle&quot;:&quot;query instances \&quot;after all\&quot; hook in \&quot;query instances\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9616f82-cb46-493c-892a-535acdc125a1&quot;,&quot;parentUUID&quot;:&quot;37617724-74e9-42c6-abde-808da95ec06a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fb854e6c-42b4-4711-b41c-216a9610bd62&quot;,&quot;title&quot;:&quot;query instances with &#x27;SOPClassUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;SOPClassUID=1.2.840.10008.5.1.4.1.1.7&#x27; and get 5 instances successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;SOPClassUID&#x27; Should query instances with param &#x27;SOPClassUID=1.2.840.10008.5.1.4.1.1.7&#x27; and get 5 instances successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63327d01-5ffb-4f33-b4eb-276d34e6c0d7&quot;,&quot;parentUUID&quot;:&quot;fb854e6c-42b4-4711-b41c-216a9610bd62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;SOPClassUID=foobar&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;SOPClassUID&#x27; Should query instances with param &#x27;SOPClassUID=foobar&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d884ce3-b3be-4644-86fd-b2bda194f00d&quot;,&quot;parentUUID&quot;:&quot;fb854e6c-42b4-4711-b41c-216a9610bd62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63327d01-5ffb-4f33-b4eb-276d34e6c0d7&quot;,&quot;6d884ce3-b3be-4644-86fd-b2bda194f00d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0ec8e91a-69f2-42ad-bf07-38030164766b&quot;,&quot;title&quot;:&quot;query instances with &#x27;SOPInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;SOPInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.146366877811836789535656349132&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;SOPInstanceUID&#x27; Should query instances with param &#x27;SOPInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.146366877811836789535656349132&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c97ba249-7792-4616-bfff-b61c7107dd88&quot;,&quot;parentUUID&quot;:&quot;0ec8e91a-69f2-42ad-bf07-38030164766b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;SOPInstanceUID=foobar&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;SOPInstanceUID&#x27; Should query instances with param &#x27;SOPInstanceUID=foobar&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45db2252-2a50-4b54-8b43-5a28eee11cf7&quot;,&quot;parentUUID&quot;:&quot;0ec8e91a-69f2-42ad-bf07-38030164766b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c97ba249-7792-4616-bfff-b61c7107dd88&quot;,&quot;45db2252-2a50-4b54-8b43-5a28eee11cf7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;45b1dfcb-9cc7-46b7-bf53-fcabee930556&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentDate&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentDate=19990416&#x27; and get 9 instances successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;ContentDate Should query instances with param &#x27;ContentDate=19990416&#x27; and get 9 instances successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8fde727-b272-4c61-800a-309fa263c8fa&quot;,&quot;parentUUID&quot;:&quot;45b1dfcb-9cc7-46b7-bf53-fcabee930556&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentDate=19990909&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;ContentDate Should query instances with param &#x27;ContentDate=19990909&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74073b6b-c956-4478-8be9-0390f1e527df&quot;,&quot;parentUUID&quot;:&quot;45b1dfcb-9cc7-46b7-bf53-fcabee930556&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8fde727-b272-4c61-800a-309fa263c8fa&quot;,&quot;74073b6b-c956-4478-8be9-0390f1e527df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9abf3af8-a52e-4c2c-adcb-1f8b12d9d389&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentTime=140241&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;ContentTime&#x27; Should query instances with param &#x27;ContentTime=140241&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f63b98b8-8bf3-4a2a-aff6-8a7752ad4ea2&quot;,&quot;parentUUID&quot;:&quot;9abf3af8-a52e-4c2c-adcb-1f8b12d9d389&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentTime=140248&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;ContentTime&#x27; Should query instances with param &#x27;ContentTime=140248&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aeadea8f-af6d-49c9-9b00-652e967e6dd3&quot;,&quot;parentUUID&quot;:&quot;9abf3af8-a52e-4c2c-adcb-1f8b12d9d389&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f63b98b8-8bf3-4a2a-aff6-8a7752ad4ea2&quot;,&quot;aeadea8f-af6d-49c9-9b00-652e967e6dd3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6f28c7d2-3da5-4af5-a598-9ad2510e2fcb&quot;,&quot;title&quot;:&quot;query instances with &#x27;InstanceNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;InstanceNumber=72&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;InstanceNumber&#x27; Should query instances with param &#x27;InstanceNumber=72&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e309f0ca-2197-4a4a-a849-6b73a3cb1761&quot;,&quot;parentUUID&quot;:&quot;6f28c7d2-3da5-4af5-a598-9ad2510e2fcb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;InstanceNumber=12345678910&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with &#x27;InstanceNumber&#x27; Should query instances with param &#x27;InstanceNumber=12345678910&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d4d2403-c1d4-47da-8f33-a8fae87926ab&quot;,&quot;parentUUID&quot;:&quot;6f28c7d2-3da5-4af5-a598-9ad2510e2fcb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e309f0ca-2197-4a4a-a849-6b73a3cb1761&quot;,&quot;0d4d2403-c1d4-47da-8f33-a8fae87926ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;bf8db8b8-4d7a-4122-8227-b912011f8dfa&quot;,&quot;title&quot;:&quot;query instances with sequence parameters&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query instances with sequence parameters\&quot;&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters \&quot;before all\&quot; hook in \&quot;query instances with sequence parameters\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await storeInstanceForTest(\n    resolve(\n        __dirname,\n        \&quot;../../../testData/dicomFiles/1-01-mod-vo\&quot;\n    )\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8fe5b3f-c6b6-42b1-8db7-4238b5dd8d65&quot;,&quot;parentUUID&quot;:&quot;bf8db8b8-4d7a-4122-8227-b912011f8dfa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b73119a6-33f1-459a-a6da-300909f7388c&quot;,&quot;title&quot;:&quot;query instances with &#x27;ConceptNameCodeSequence.CodeValue&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodeValue=Test&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodeValue&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodeValue=Test&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11d89afe-785a-4432-8373-5011dd04b677&quot;,&quot;parentUUID&quot;:&quot;b73119a6-33f1-459a-a6da-300909f7388c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodeValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodeValue&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodeValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;424d6849-fc1f-4660-983f-275bfb9bc0ef&quot;,&quot;parentUUID&quot;:&quot;b73119a6-33f1-459a-a6da-300909f7388c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11d89afe-785a-4432-8373-5011dd04b677&quot;,&quot;424d6849-fc1f-4660-983f-275bfb9bc0ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ce4719c1-b8d1-4534-a7a8-948ef0e9d8f8&quot;,&quot;title&quot;:&quot;query instances with &#x27;ConceptNameCodeSequence.CodingSchemeDesignator&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeDesignator=LFUCK&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodingSchemeDesignator&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeDesignator=LFUCK&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87e81cd0-7083-4817-ac39-a4b469e0c20e&quot;,&quot;parentUUID&quot;:&quot;ce4719c1-b8d1-4534-a7a8-948ef0e9d8f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeDesignator=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodingSchemeDesignator&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeDesignator=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8a63977-2fb1-482d-b2f2-51b009644c94&quot;,&quot;parentUUID&quot;:&quot;ce4719c1-b8d1-4534-a7a8-948ef0e9d8f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87e81cd0-7083-4817-ac39-a4b469e0c20e&quot;,&quot;d8a63977-2fb1-482d-b2f2-51b009644c94&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3d9818e6-b8a9-4071-bf04-a278f348330e&quot;,&quot;title&quot;:&quot;query instances with &#x27;ConceptNameCodeSequence.CodingSchemeVersion&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeVersion=v1.0&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodingSchemeVersion&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeVersion=v1.0&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5299a587-33c5-4ed3-ab67-09812faaf695&quot;,&quot;parentUUID&quot;:&quot;3d9818e6-b8a9-4071-bf04-a278f348330e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeVersion=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodingSchemeVersion&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodingSchemeVersion=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d0b38f0-3b68-4dbb-b486-4d95ff020254&quot;,&quot;parentUUID&quot;:&quot;3d9818e6-b8a9-4071-bf04-a278f348330e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5299a587-33c5-4ed3-ab67-09812faaf695&quot;,&quot;1d0b38f0-3b68-4dbb-b486-4d95ff020254&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0a3d77d1-7d8e-43f2-9c3c-d43347a4cd40&quot;,&quot;title&quot;:&quot;query instances with &#x27;ConceptNameCodeSequence.CodeMeaning&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodeMeaning=For Test&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodeMeaning&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodeMeaning=For Test&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c679ca71-f50a-450d-9a29-b841d027ddf6&quot;,&quot;parentUUID&quot;:&quot;0a3d77d1-7d8e-43f2-9c3c-d43347a4cd40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ConceptNameCodeSequence.CodeMeaning=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ConceptNameCodeSequence.CodeMeaning&#x27; Should query instances with param &#x27;ConceptNameCodeSequence.CodeMeaning=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed1bb64f-8264-4e4f-9d46-d4f2b176f355&quot;,&quot;parentUUID&quot;:&quot;0a3d77d1-7d8e-43f2-9c3c-d43347a4cd40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c679ca71-f50a-450d-9a29-b841d027ddf6&quot;,&quot;ed1bb64f-8264-4e4f-9d46-d4f2b176f355&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e15c96d1-6ca4-407e-875f-69443a02465a&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ValueType&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ValueType=TEXT&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ValueType&#x27; Should query instances with param &#x27;ContentSequence.ValueType=TEXT&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9086fe39-f440-4025-9fe9-f32d83cb7b6b&quot;,&quot;parentUUID&quot;:&quot;e15c96d1-6ca4-407e-875f-69443a02465a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ValueType=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ValueType&#x27; Should query instances with param &#x27;ContentSequence.ValueType=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad1d260e-8a6e-487a-810c-cb98ffb1cf7f&quot;,&quot;parentUUID&quot;:&quot;e15c96d1-6ca4-407e-875f-69443a02465a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9086fe39-f440-4025-9fe9-f32d83cb7b6b&quot;,&quot;ad1d260e-8a6e-487a-810c-cb98ffb1cf7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;769b2ce9-bb83-4ac0-a45a-01ec4dff1dc8&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.RelationshipType&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.RelationshipType=CONTAINS&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.RelationshipType&#x27; Should query instances with param &#x27;ContentSequence.RelationshipType=CONTAINS&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;773e5ac8-c3e9-49a1-9bcb-b6098a75e4b0&quot;,&quot;parentUUID&quot;:&quot;769b2ce9-bb83-4ac0-a45a-01ec4dff1dc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.RelationshipType=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.RelationshipType&#x27; Should query instances with param &#x27;ContentSequence.RelationshipType=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecab81c3-abf5-49b1-ad4d-26f10ea28291&quot;,&quot;parentUUID&quot;:&quot;769b2ce9-bb83-4ac0-a45a-01ec4dff1dc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;773e5ac8-c3e9-49a1-9bcb-b6098a75e4b0&quot;,&quot;ecab81c3-abf5-49b1-ad4d-26f10ea28291&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;893cc31c-7d15-4744-bbd5-c3520c0f33a1&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.TextValue&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.TextValue=Test&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.TextValue&#x27; Should query instances with param &#x27;ContentSequence.TextValue=Test&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4753f200-b77c-4091-b081-de5f9ff3e7a8&quot;,&quot;parentUUID&quot;:&quot;893cc31c-7d15-4744-bbd5-c3520c0f33a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.TextValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.TextValue&#x27; Should query instances with param &#x27;ContentSequence.TextValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9048a7e-1601-42c6-96bd-f7201f413e24&quot;,&quot;parentUUID&quot;:&quot;893cc31c-7d15-4744-bbd5-c3520c0f33a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4753f200-b77c-4091-b081-de5f9ff3e7a8&quot;,&quot;b9048a7e-1601-42c6-96bd-f7201f413e24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;636fc2a9-9e51-412d-a480-22c24520065a&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue=Test 2&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue=Test 2&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b43d0c30-2e3c-4b18-978e-d6ef31e8d854&quot;,&quot;parentUUID&quot;:&quot;636fc2a9-9e51-412d-a480-22c24520065a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec34959c-194d-4946-adb9-a197f2804cd5&quot;,&quot;parentUUID&quot;:&quot;636fc2a9-9e51-412d-a480-22c24520065a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b43d0c30-2e3c-4b18-978e-d6ef31e8d854&quot;,&quot;ec34959c-194d-4946-adb9-a197f2804cd5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a1439fe4-ad6e-4774-b468-e0bf6f333198&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator=LFUCK2&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator=LFUCK2&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d1f6c11-442f-49a3-8757-8e8f4d26b922&quot;,&quot;parentUUID&quot;:&quot;a1439fe4-ad6e-4774-b468-e0bf6f333198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeDesignator=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2e723c8-9e86-4a00-9060-0f8714d65a91&quot;,&quot;parentUUID&quot;:&quot;a1439fe4-ad6e-4774-b468-e0bf6f333198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d1f6c11-442f-49a3-8757-8e8f4d26b922&quot;,&quot;a2e723c8-9e86-4a00-9060-0f8714d65a91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d417e671-97bf-40ca-a18d-203ee28f91da&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion=v2.0&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion=v2.0&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5b190e1-0c41-4710-89b4-7bd721a06caa&quot;,&quot;parentUUID&quot;:&quot;d417e671-97bf-40ca-a18d-203ee28f91da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodingSchemeVersion=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d55e2acf-7726-408a-832c-ff27f1d400b0&quot;,&quot;parentUUID&quot;:&quot;d417e671-97bf-40ca-a18d-203ee28f91da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a5b190e1-0c41-4710-89b4-7bd721a06caa&quot;,&quot;d55e2acf-7726-408a-832c-ff27f1d400b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;49086821-f325-4335-af45-450df92ba82d&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning=For Test 2&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning=For Test 2&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68ec0ba6-3533-4c53-8bb5-86f6b3e04b44&quot;,&quot;parentUUID&quot;:&quot;49086821-f325-4335-af45-450df92ba82d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning&#x27; Should query instances with param &#x27;ContentSequence.ConceptNameCodeSequence.CodeMeaning=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;690930d0-9879-4cfa-a8f5-05a87e579ea0&quot;,&quot;parentUUID&quot;:&quot;49086821-f325-4335-af45-450df92ba82d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68ec0ba6-3533-4c53-8bb5-86f6b3e04b44&quot;,&quot;690930d0-9879-4cfa-a8f5-05a87e579ea0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;8c4b70ae-7117-4549-8757-3d9b2a3deab0&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptCodeSequence.CodeValue&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeValue=Test 2&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodeValue&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeValue=Test 2&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;753fdd04-d358-404d-8ff6-6b0843e673ae&quot;,&quot;parentUUID&quot;:&quot;8c4b70ae-7117-4549-8757-3d9b2a3deab0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodeValue&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeValue=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6de6f7c4-ad0d-4262-85b2-2b4b6b146ea7&quot;,&quot;parentUUID&quot;:&quot;8c4b70ae-7117-4549-8757-3d9b2a3deab0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;753fdd04-d358-404d-8ff6-6b0843e673ae&quot;,&quot;6de6f7c4-ad0d-4262-85b2-2b4b6b146ea7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1222d0d2-68b8-4a95-a22f-0ab80a657874&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator=LFUCK2&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator=LFUCK2&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc21932c-b5f1-49d6-aa02-ad402f63792e&quot;,&quot;parentUUID&quot;:&quot;1222d0d2-68b8-4a95-a22f-0ab80a657874&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeDesignator=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9244d615-584d-4f06-8842-2afef5808f45&quot;,&quot;parentUUID&quot;:&quot;1222d0d2-68b8-4a95-a22f-0ab80a657874&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc21932c-b5f1-49d6-aa02-ad402f63792e&quot;,&quot;9244d615-584d-4f06-8842-2afef5808f45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c1d6b3b1-1b40-4832-87d6-adbed5aeda9d&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion=v2.0&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion=v2.0&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4360fa62-58d6-4c27-b9b0-2717118a69f1&quot;,&quot;parentUUID&quot;:&quot;c1d6b3b1-1b40-4832-87d6-adbed5aeda9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodingSchemeVersion=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67aed62c-80bb-4559-a77b-84b7b64b79fa&quot;,&quot;parentUUID&quot;:&quot;c1d6b3b1-1b40-4832-87d6-adbed5aeda9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4360fa62-58d6-4c27-b9b0-2717118a69f1&quot;,&quot;67aed62c-80bb-4559-a77b-84b7b64b79fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3563281e-84b7-4e17-bcfa-b9a110078300&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning=For Test 2&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning=For Test 2&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be61098f-02e4-47ed-9a29-3e87e1fe305f&quot;,&quot;parentUUID&quot;:&quot;3563281e-84b7-4e17-bcfa-b9a110078300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning&#x27; Should query instances with param &#x27;ContentSequence.ConceptCodeSequence.CodeMeaning=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;993f94bd-e24c-4401-bdc4-879dadf5772a&quot;,&quot;parentUUID&quot;:&quot;3563281e-84b7-4e17-bcfa-b9a110078300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be61098f-02e4-47ed-9a29-3e87e1fe305f&quot;,&quot;993f94bd-e24c-4401-bdc4-879dadf5772a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c6c14885-b4af-4472-a003-983be95a2906&quot;,&quot;title&quot;:&quot;query instances with &#x27;VerifyingObserverSequence.VerifyingObserverName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerifyingObserverName=fakeName&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerifyingObserverName&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerifyingObserverName=fakeName&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae1d41e0-08a1-49c3-8e4c-f411b8962aa7&quot;,&quot;parentUUID&quot;:&quot;c6c14885-b4af-4472-a003-983be95a2906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerifyingObserverName=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerifyingObserverName&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerifyingObserverName=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0a20f6b-5727-4b8f-8d60-07014105f3d2&quot;,&quot;parentUUID&quot;:&quot;c6c14885-b4af-4472-a003-983be95a2906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae1d41e0-08a1-49c3-8e4c-f411b8962aa7&quot;,&quot;a0a20f6b-5727-4b8f-8d60-07014105f3d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;80dee2a0-6fec-4645-9b09-7a29ab100a7a&quot;,&quot;title&quot;:&quot;query instances with &#x27;VerifyingObserverSequence.VerificationDateTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerificationDateTime=20200201-&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerificationDateTime&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerificationDateTime=20200201-&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be6d26c8-3a3c-4c75-bdcc-c371f3bc5da2&quot;,&quot;parentUUID&quot;:&quot;80dee2a0-6fec-4645-9b09-7a29ab100a7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerificationDateTime=19990101&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerificationDateTime&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerificationDateTime=19990101&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;937d4707-c89b-4383-8d07-80a3fba67759&quot;,&quot;parentUUID&quot;:&quot;80dee2a0-6fec-4645-9b09-7a29ab100a7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerificationDateTime=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerificationDateTime&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerificationDateTime=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;839d3038-0adc-4600-85a4-d1d38dadff4c&quot;,&quot;parentUUID&quot;:&quot;80dee2a0-6fec-4645-9b09-7a29ab100a7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be6d26c8-3a3c-4c75-bdcc-c371f3bc5da2&quot;,&quot;937d4707-c89b-4383-8d07-80a3fba67759&quot;,&quot;839d3038-0adc-4600-85a4-d1d38dadff4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c8c6e83f-1e2a-48b1-b850-f8c3b58e813d&quot;,&quot;title&quot;:&quot;query instances with &#x27;VerifyingObserverSequence.VerifyingOrganization&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerifyingOrganization=Test Org&#x27; and get 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerifyingOrganization&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerifyingOrganization=Test Org&#x27; and get 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ffdc86c-4171-4dd6-8b66-7ac6eba1040c&quot;,&quot;parentUUID&quot;:&quot;c8c6e83f-1e2a-48b1-b850-f8c3b58e813d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query instances with param &#x27;VerifyingObserverSequence.VerifyingOrganization=aaa&#x27; and get 0 instance successfully&quot;,&quot;fullTitle&quot;:&quot;query instances query instances with sequence parameters query instances with &#x27;VerifyingObserverSequence.VerifyingOrganization&#x27; Should query instances with param &#x27;VerifyingObserverSequence.VerifyingOrganization=aaa&#x27; and get 0 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/instances?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (code) {\n    expect(response.statusCode).to.equal(code);\n    return;\n}\nif (expectCount === 0) {\n    if (response.statusCode === 200) {\n        let data = await response.json();\n        console.log(data);\n    }\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a2c9b36-4821-4960-8a96-e59dd693e39a&quot;,&quot;parentUUID&quot;:&quot;c8c6e83f-1e2a-48b1-b850-f8c3b58e813d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ffdc86c-4171-4dd6-8b66-7ac6eba1040c&quot;,&quot;4a2c9b36-4821-4960-8a96-e59dd693e39a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d246e97a-1c66-4928-ac9c-06b4cfc4b7a0&quot;,&quot;title&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; \&quot;before all\&quot; hook in \&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: structuredClone(testPatient)\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61f776da-688d-4d48-bf34-b848bc6d9ed4&quot;,&quot;parentUUID&quot;:&quot;d246e97a-1c66-4928-ac9c-06b4cfc4b7a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should search patients&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; Should search patients&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;\n});\nexpect(response.statusCode).to.equal(200);\nlet patients = await response.json();\nexpect(patients).to.be.an(\&quot;array\&quot;);\nexpect(patients).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7aaa420-06a4-4cfb-ba3d-60b60c73dae7&quot;,&quot;parentUUID&quot;:&quot;d246e97a-1c66-4928-ac9c-06b4cfc4b7a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0d570150-5d7d-46a9-9dd1-608e892e396a&quot;,&quot;title&quot;:&quot;query with params&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;00bdf637-9d83-403a-9426-2a1a4e3f29fd&quot;,&quot;title&quot;:&quot;query with param &#x27;PatientName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientName=John^Doe&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientName&#x27; Should query patients with param &#x27;PatientName=John^Doe&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57a65cc0-4c54-4fe3-b8f6-eb812f11b623&quot;,&quot;parentUUID&quot;:&quot;00bdf637-9d83-403a-9426-2a1a4e3f29fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientName=foo&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientName&#x27; Should query patients with param &#x27;PatientName=foo&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcfd11b6-ab66-4ec8-b0c6-0a07ce67c75b&quot;,&quot;parentUUID&quot;:&quot;00bdf637-9d83-403a-9426-2a1a4e3f29fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientName=John*&amp;PatientName=*Doe&#x27; and get 1 patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientName&#x27; Should query patients with param &#x27;PatientName=John*&amp;PatientName=*Doe&#x27; and get 1 patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?PatientName=John*&amp;PatientName=*Doe`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\n        \nexpect(response.statusCode).to.equal(200);\n        \nlet data = await response.json();\n        \nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;832e24cb-781c-4ad7-bfff-790eb9554e44&quot;,&quot;parentUUID&quot;:&quot;00bdf637-9d83-403a-9426-2a1a4e3f29fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57a65cc0-4c54-4fe3-b8f6-eb812f11b623&quot;,&quot;dcfd11b6-ab66-4ec8-b0c6-0a07ce67c75b&quot;,&quot;832e24cb-781c-4ad7-bfff-790eb9554e44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;09141e68-b557-4978-b7f2-8fdbc90889e1&quot;,&quot;title&quot;:&quot;query with param &#x27;PatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientID=12345&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientID&#x27; Should query patients with param &#x27;PatientID=12345&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc53f1af-7fe3-48fb-b7dc-31c431f0e28e&quot;,&quot;parentUUID&quot;:&quot;09141e68-b557-4978-b7f2-8fdbc90889e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientID=foo&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientID&#x27; Should query patients with param &#x27;PatientID=foo&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5895ad0-a50e-4e91-a40b-ffb5bd0e2fdb&quot;,&quot;parentUUID&quot;:&quot;09141e68-b557-4978-b7f2-8fdbc90889e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc53f1af-7fe3-48fb-b7dc-31c431f0e28e&quot;,&quot;d5895ad0-a50e-4e91-a40b-ffb5bd0e2fdb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;eb01600b-9e00-4c34-9e3d-59de17ac6449&quot;,&quot;title&quot;:&quot;query with param &#x27;PatientBirthDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientBirthDate=19800101&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientBirthDate&#x27; Should query patients with param &#x27;PatientBirthDate=19800101&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb90a1b2-73f1-4510-8ee0-7928e621277b&quot;,&quot;parentUUID&quot;:&quot;eb01600b-9e00-4c34-9e3d-59de17ac6449&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query patients with param &#x27;PatientBirthDate=19000101&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;PatientBirthDate&#x27; Should query patients with param &#x27;PatientBirthDate=19000101&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43afeb16-133b-4656-80a8-9f7259bede8e&quot;,&quot;parentUUID&quot;:&quot;eb01600b-9e00-4c34-9e3d-59de17ac6449&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb90a1b2-73f1-4510-8ee0-7928e621277b&quot;,&quot;43afeb16-133b-4656-80a8-9f7259bede8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d6179d4f-93e8-477a-8f3d-9ce823d3ff9f&quot;,&quot;title&quot;:&quot;query with param &#x27;IssuerOfPatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryPatients.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query patients with param &#x27;IssuerOfPatientID=Issuer ID&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;IssuerOfPatientID&#x27; Should query patients with param &#x27;IssuerOfPatientID=Issuer ID&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77b4081b-9256-45d6-96f8-33cdff5d4f05&quot;,&quot;parentUUID&quot;:&quot;d6179d4f-93e8-477a-8f3d-9ce823d3ff9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query patients with param &#x27;IssuerOfPatientID=foo&#x27; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;QIDO-RS search patient &#x27;/dicom-web/patients&#x27; query with params query with param &#x27;IssuerOfPatientID&#x27; Should query patients with param &#x27;IssuerOfPatientID=foo&#x27; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/patients?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79cbb513-e141-4b45-9159-c4dfb39a21c7&quot;,&quot;parentUUID&quot;:&quot;d6179d4f-93e8-477a-8f3d-9ce823d3ff9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77b4081b-9256-45d6-96f8-33cdff5d4f05&quot;,&quot;79cbb513-e141-4b45-9159-c4dfb39a21c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;f7aaa420-06a4-4cfb-ba3d-60b60c73dae7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;620ba5b0-8087-44eb-8015-1d89ea21be6e&quot;,&quot;title&quot;:&quot;query series&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query series\&quot;&quot;,&quot;fullTitle&quot;:&quot;query series \&quot;before all\&quot; hook in \&quot;query series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1758,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../testData/dicomFiles/1-01-mod-vo\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1aa6111-0880-4f76-a71a-3aeee45dcbb5&quot;,&quot;parentUUID&quot;:&quot;620ba5b0-8087-44eb-8015-1d89ea21be6e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;query series\&quot;&quot;,&quot;fullTitle&quot;:&quot;query series \&quot;after all\&quot; hook in \&quot;query series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d50a1fc4-71fe-46d3-aa02-a36399175ad5&quot;,&quot;parentUUID&quot;:&quot;620ba5b0-8087-44eb-8015-1d89ea21be6e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series successfully and get 9 series&quot;,&quot;fullTitle&quot;:&quot;query series Should query series successfully and get 9 series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(9);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;565b7aff-f6e8-45ed-ab22-fdd280106aa6&quot;,&quot;parentUUID&quot;:&quot;620ba5b0-8087-44eb-8015-1d89ea21be6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2bec2b65-5f9d-4e1e-85e1-9cda1e02bb71&quot;,&quot;title&quot;:&quot;query series with param &#x27;PerformingPhysicianName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;PerformingPhysicianName=cName&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;PerformingPhysicianName&#x27; Should query series with param &#x27;PerformingPhysicianName=cName&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f2163f6-db4c-44d5-8264-3a40f7271509&quot;,&quot;parentUUID&quot;:&quot;2bec2b65-5f9d-4e1e-85e1-9cda1e02bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;PerformingPhysicianName=dName&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;PerformingPhysicianName&#x27; Should query series with param &#x27;PerformingPhysicianName=dName&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85dfc9aa-c362-4ad9-bb5b-17791bf11ff4&quot;,&quot;parentUUID&quot;:&quot;2bec2b65-5f9d-4e1e-85e1-9cda1e02bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;PerformingPhysicianName=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;PerformingPhysicianName&#x27; Should query series with param &#x27;PerformingPhysicianName=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd447341-2750-422a-8618-49de6d775aa5&quot;,&quot;parentUUID&quot;:&quot;2bec2b65-5f9d-4e1e-85e1-9cda1e02bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f2163f6-db4c-44d5-8264-3a40f7271509&quot;,&quot;85dfc9aa-c362-4ad9-bb5b-17791bf11ff4&quot;,&quot;dd447341-2750-422a-8618-49de6d775aa5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:48,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a91e0020-9220-49f3-abb0-556e24674e60&quot;,&quot;title&quot;:&quot;query series with param &#x27;OperatorsName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;OperatorsName=pyName&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;OperatorsName&#x27; Should query series with param &#x27;OperatorsName=pyName&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bec75543-ce26-4cbd-88d8-9f8bd4f08145&quot;,&quot;parentUUID&quot;:&quot;a91e0020-9220-49f3-abb0-556e24674e60&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;OperatorsName=py&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;OperatorsName&#x27; Should query series with param &#x27;OperatorsName=py&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acb3a909-34ae-474e-8fc9-a949a2da2e7c&quot;,&quot;parentUUID&quot;:&quot;a91e0020-9220-49f3-abb0-556e24674e60&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;OperatorsName=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;OperatorsName&#x27; Should query series with param &#x27;OperatorsName=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7f1ff49-b69a-4bd6-92e7-5553ede56066&quot;,&quot;parentUUID&quot;:&quot;a91e0020-9220-49f3-abb0-556e24674e60&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bec75543-ce26-4cbd-88d8-9f8bd4f08145&quot;,&quot;acb3a909-34ae-474e-8fc9-a949a2da2e7c&quot;,&quot;c7f1ff49-b69a-4bd6-92e7-5553ede56066&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a2a62eb4-49a5-4575-9d02-e014cf8f1919&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.AccessionNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.AccessionNumber=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.AccessionNumber&#x27; Should query series with param &#x27;RequestAttributesSequence.AccessionNumber=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41bad36d-a155-48e3-a8f8-b87f28f15235&quot;,&quot;parentUUID&quot;:&quot;a2a62eb4-49a5-4575-9d02-e014cf8f1919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.AccessionNumber=123456789&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.AccessionNumber&#x27; Should query series with param &#x27;RequestAttributesSequence.AccessionNumber=123456789&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fd6dce7-7848-4d46-a21c-fb649036bb1c&quot;,&quot;parentUUID&quot;:&quot;a2a62eb4-49a5-4575-9d02-e014cf8f1919&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41bad36d-a155-48e3-a8f8-b87f28f15235&quot;,&quot;9fd6dce7-7848-4d46-a21c-fb649036bb1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f114c60f-5b1b-43c4-8c7d-35bae8beefcc&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID&#x27; Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;393f23d8-b7d7-452e-a6e8-3f51a60d296d&quot;,&quot;parentUUID&quot;:&quot;f114c60f-5b1b-43c4-8c7d-35bae8beefcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=fuckyou&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID&#x27; Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.LocalNamespaceEntityID=fuckyou&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c53c177-d096-4098-a6f9-3595a4754d77&quot;,&quot;parentUUID&quot;:&quot;f114c60f-5b1b-43c4-8c7d-35bae8beefcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;393f23d8-b7d7-452e-a6e8-3f51a60d296d&quot;,&quot;9c53c177-d096-4098-a6f9-3595a4754d77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1f920279-9075-4f0c-bddd-f1a01284f673&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID&#x27; Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;922cbe79-c582-4ac2-85f1-0724306a1948&quot;,&quot;parentUUID&quot;:&quot;1f920279-9075-4f0c-bddd-f1a01284f673&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID=b459025d-58f8-45c1-8ea9-0dc108fabc4c&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID&#x27; Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityID=b459025d-58f8-45c1-8ea9-0dc108fabc4c&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7d5f79c-8719-4bfa-890e-d0bdfccc82dd&quot;,&quot;parentUUID&quot;:&quot;1f920279-9075-4f0c-bddd-f1a01284f673&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;922cbe79-c582-4ac2-85f1-0724306a1948&quot;,&quot;a7d5f79c-8719-4bfa-890e-d0bdfccc82dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6040ab97-bbd0-4172-b2b0-d4612d33df70&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType&#x27; Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9ae7a5c-45b9-4e42-ad8a-113d2c292bec&quot;,&quot;parentUUID&quot;:&quot;6040ab97-bbd0-4172-b2b0-d4612d33df70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType=UUID&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType&#x27; Should query series with param &#x27;RequestAttributesSequence.IssuerOfAccessionNumberSequence.UniversalEntityIDType=UUID&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1da5a3f-ef57-4cda-8e95-2d88dc8f3624&quot;,&quot;parentUUID&quot;:&quot;6040ab97-bbd0-4172-b2b0-d4612d33df70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9ae7a5c-45b9-4e42-ad8a-113d2c292bec&quot;,&quot;c1da5a3f-ef57-4cda-8e95-2d88dc8f3624&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;646a2525-a5a2-48ba-8957-f8c40f183e9a&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.StudyInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.StudyInstanceUID=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.StudyInstanceUID&#x27; Should query series with param &#x27;RequestAttributesSequence.StudyInstanceUID=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14e12176-5c7f-4585-9434-7dbe4f16539b&quot;,&quot;parentUUID&quot;:&quot;646a2525-a5a2-48ba-8957-f8c40f183e9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.StudyInstanceUID=1.2.826.0.1.3680043.8.498.11038417314486293343745968896540168442&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.StudyInstanceUID&#x27; Should query series with param &#x27;RequestAttributesSequence.StudyInstanceUID=1.2.826.0.1.3680043.8.498.11038417314486293343745968896540168442&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d265ff54-9111-47e2-8ebc-82460ef0de86&quot;,&quot;parentUUID&quot;:&quot;646a2525-a5a2-48ba-8957-f8c40f183e9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14e12176-5c7f-4585-9434-7dbe4f16539b&quot;,&quot;d265ff54-9111-47e2-8ebc-82460ef0de86&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a5dad9a4-b6b2-4442-8cc1-afcec141c2ac&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID&#x27; Should query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37216ae4-fc9b-4399-877e-8145601b6364&quot;,&quot;parentUUID&quot;:&quot;a5dad9a4-b6b2-4442-8cc1-afcec141c2ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID=aaa&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID&#x27; Should query series with param &#x27;RequestAttributesSequence.ScheduledProcedureStepID=aaa&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bc2364f-3089-402e-8bb4-7ba2f03bd79f&quot;,&quot;parentUUID&quot;:&quot;a5dad9a4-b6b2-4442-8cc1-afcec141c2ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37216ae4-fc9b-4399-877e-8145601b6364&quot;,&quot;4bc2364f-3089-402e-8bb4-7ba2f03bd79f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;385f8856-03bf-48f0-984d-bd16b536039a&quot;,&quot;title&quot;:&quot;query series with param &#x27;RequestAttributesSequence.RequestedProcedureID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.RequestedProcedureID=foobar&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.RequestedProcedureID&#x27; Should query series with param &#x27;RequestAttributesSequence.RequestedProcedureID=foobar&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d7302bf-6e68-4fa2-a61f-3a51465c5242&quot;,&quot;parentUUID&quot;:&quot;385f8856-03bf-48f0-984d-bd16b536039a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query series with param &#x27;RequestAttributesSequence.RequestedProcedureID=bbb&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query series query series with param &#x27;RequestAttributesSequence.RequestedProcedureID&#x27; Should query series with param &#x27;RequestAttributesSequence.RequestedProcedureID=bbb&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1c6d9ed-ebd4-486a-b50f-2a5519bf70c6&quot;,&quot;parentUUID&quot;:&quot;385f8856-03bf-48f0-984d-bd16b536039a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d7302bf-6e68-4fa2-a61f-3a51465c5242&quot;,&quot;b1c6d9ed-ebd4-486a-b50f-2a5519bf70c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;565b7aff-f6e8-45ed-ab22-fdd280106aa6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;653eabca-c302-45df-badf-42e5e227a322&quot;,&quot;title&quot;:&quot;query series with param instance delete status&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\querySeriesWithParamInstanceDeleteStatus.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\querySeriesWithParamInstanceDeleteStatus.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query series with param instance delete status\&quot;&quot;,&quot;fullTitle&quot;:&quot;query series with param instance delete status \&quot;before all\&quot; hook in \&quot;query series with param instance delete status\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1674,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c730198-2eb2-41d1-abf9-ba71cef5f95c&quot;,&quot;parentUUID&quot;:&quot;653eabca-c302-45df-badf-42e5e227a322&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should query series with &#x27;instanceDeleteStatus&#x27; param result in 1 series&quot;,&quot;fullTitle&quot;:&quot;query series with param instance delete status should query series with &#x27;instanceDeleteStatus&#x27; param result in 1 series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${TEST_STUDY_UID}/series/${TEST_SERIES_UID}/instances/${TEST_INSTANCE_UID1}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        instanceDeleteStatus: 1\n    }\n});\n\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d47fe285-f686-4fbd-a2ea-f82bb8891a79&quot;,&quot;parentUUID&quot;:&quot;653eabca-c302-45df-badf-42e5e227a322&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query series with &#x27;instanceDeleteStatus&#x27; param result in 1 series when delete instance in same study&quot;,&quot;fullTitle&quot;:&quot;query series with param instance delete status should query series with &#x27;instanceDeleteStatus&#x27; param result in 1 series when delete instance in same study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${TEST_STUDY_UID}/series/${TEST_SERIES_UID}/instances/${TEST_INSTANCE_UID2}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        instanceDeleteStatus: 1\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2793ed7-56d8-45b4-8be5-a2cd1bf3ffae&quot;,&quot;parentUUID&quot;:&quot;653eabca-c302-45df-badf-42e5e227a322&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d47fe285-f686-4fbd-a2ea-f82bb8891a79&quot;,&quot;a2793ed7-56d8-45b4-8be5-a2cd1bf3ffae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;bc9289d0-9a57-43cb-8417-5c966bd0fb15&quot;,&quot;title&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query studies &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; \&quot;before all\&quot; hook in \&quot;query studies &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1821,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;517f152c-b75b-40be-82a8-cdaac91b2b94&quot;,&quot;parentUUID&quot;:&quot;bc9289d0-9a57-43cb-8417-5c966bd0fb15&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;query studies &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; \&quot;after all\&quot; hook in \&quot;query studies &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f494505e-1548-4620-9d58-a27ccd5b57b6&quot;,&quot;parentUUID&quot;:&quot;bc9289d0-9a57-43cb-8417-5c966bd0fb15&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies and get 4 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; Should query studies and get 4 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\n\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);\nlet firstData = data[0];\n// Required Matching Attributes\n// {@link https://dicom.nema.org/medical/dicom/current/output/html/part18.html#table_10.6.1-5}\nexpect(firstData).to.have.property(\&quot;00080020\&quot;);\nexpect(firstData).to.have.property(\&quot;00080030\&quot;);\nexpect(firstData).to.have.property(\&quot;00080050\&quot;);\nexpect(firstData).to.have.property(\&quot;00080061\&quot;);\nexpect(firstData).to.have.property(\&quot;00080090\&quot;);\nexpect(firstData).to.have.property(\&quot;00100010\&quot;);\nexpect(firstData).to.have.property(\&quot;00100020\&quot;);\nexpect(firstData).to.have.property(\&quot;0020000D\&quot;);\nexpect(firstData).to.have.property(\&quot;00200010\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;920665c7-3c4e-437b-95fe-fef9f660c735&quot;,&quot;parentUUID&quot;:&quot;bc9289d0-9a57-43cb-8417-5c966bd0fb15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5d5d163b-dd45-4d80-a4db-1b74ff26a9ee&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyDate=20100213&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyDate&#x27; Should query studies with param &#x27;StudyDate=20100213&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;965c6b16-9aa4-4868-93ad-87e0384a4c97&quot;,&quot;parentUUID&quot;:&quot;5d5d163b-dd45-4d80-a4db-1b74ff26a9ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyDate=-20100213&#x27; and get 3 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyDate&#x27; Should query studies with param &#x27;StudyDate=-20100213&#x27; and get 3 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17cfc212-1997-4029-95e3-c26d029556f2&quot;,&quot;parentUUID&quot;:&quot;5d5d163b-dd45-4d80-a4db-1b74ff26a9ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyDate=20100101-&#x27; and get 2 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyDate&#x27; Should query studies with param &#x27;StudyDate=20100101-&#x27; and get 2 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f883a9b9-5397-4fe5-ac03-2d3c2cecb834&quot;,&quot;parentUUID&quot;:&quot;5d5d163b-dd45-4d80-a4db-1b74ff26a9ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyDate=20100212-20181031&#x27; and get 2 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyDate&#x27; Should query studies with param &#x27;StudyDate=20100212-20181031&#x27; and get 2 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4df74a9-a3bb-4f03-88df-f93207f0ed23&quot;,&quot;parentUUID&quot;:&quot;5d5d163b-dd45-4d80-a4db-1b74ff26a9ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;965c6b16-9aa4-4868-93ad-87e0384a4c97&quot;,&quot;17cfc212-1997-4029-95e3-c26d029556f2&quot;,&quot;f883a9b9-5397-4fe5-ac03-2d3c2cecb834&quot;,&quot;c4df74a9-a3bb-4f03-88df-f93207f0ed23&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:62,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;eb794b51-6ab9-42f0-bbbf-0d86cf20e5c1&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyTime=170922&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyTime&#x27; Should query studies with param &#x27;StudyTime=170922&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54ce52a2-6302-4e8c-b33a-07e0cb5bd9e3&quot;,&quot;parentUUID&quot;:&quot;eb794b51-6ab9-42f0-bbbf-0d86cf20e5c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyTime=-170922&#x27; and get 4 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyTime&#x27; Should query studies with param &#x27;StudyTime=-170922&#x27; and get 4 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;892355a8-26b7-4626-b95e-c996f7d2fdb3&quot;,&quot;parentUUID&quot;:&quot;eb794b51-6ab9-42f0-bbbf-0d86cf20e5c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyTime=150000-&#x27; and get 2 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyTime&#x27; Should query studies with param &#x27;StudyTime=150000-&#x27; and get 2 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b30ed4e-c8b2-4388-890e-7c9d004a930d&quot;,&quot;parentUUID&quot;:&quot;eb794b51-6ab9-42f0-bbbf-0d86cf20e5c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyTime=130000-160000&#x27; and get 2 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyTime&#x27; Should query studies with param &#x27;StudyTime=130000-160000&#x27; and get 2 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a60b832d-9279-4a5a-a39c-794deb45cef3&quot;,&quot;parentUUID&quot;:&quot;eb794b51-6ab9-42f0-bbbf-0d86cf20e5c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54ce52a2-6302-4e8c-b33a-07e0cb5bd9e3&quot;,&quot;892355a8-26b7-4626-b95e-c996f7d2fdb3&quot;,&quot;6b30ed4e-c8b2-4388-890e-7c9d004a930d&quot;,&quot;a60b832d-9279-4a5a-a39c-794deb45cef3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a11e4e07-b0c5-4eac-ae91-1e515cac0fb8&quot;,&quot;title&quot;:&quot;query studies with param &#x27;AccessionNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;AccessionNumber=123456&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;AccessionNumber&#x27; Should query studies with param &#x27;AccessionNumber=123456&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f8e8620-e9a6-446e-9542-0efc49226a46&quot;,&quot;parentUUID&quot;:&quot;a11e4e07-b0c5-4eac-ae91-1e515cac0fb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;AccessionNumber=3266660953883852&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;AccessionNumber&#x27; Should query studies with param &#x27;AccessionNumber=3266660953883852&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;184966a9-23be-475c-a852-fd8635a351ea&quot;,&quot;parentUUID&quot;:&quot;a11e4e07-b0c5-4eac-ae91-1e515cac0fb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f8e8620-e9a6-446e-9542-0efc49226a46&quot;,&quot;184966a9-23be-475c-a852-fd8635a351ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;cc4219dc-e18f-4fdd-9f1d-896dd193f3af&quot;,&quot;title&quot;:&quot;query studies with param &#x27;ModalitiesInStudy&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;ModalitiesInStudy=CT&#x27; and get 2 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;ModalitiesInStudy&#x27; Should query studies with param &#x27;ModalitiesInStudy=CT&#x27; and get 2 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d68d73c-a75e-432e-8cad-6a318530098a&quot;,&quot;parentUUID&quot;:&quot;cc4219dc-e18f-4fdd-9f1d-896dd193f3af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;ModalitiesInStudy=DOC&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;ModalitiesInStudy&#x27; Should query studies with param &#x27;ModalitiesInStudy=DOC&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a009ff-977c-4a04-b6a5-2e4e66b53117&quot;,&quot;parentUUID&quot;:&quot;cc4219dc-e18f-4fdd-9f1d-896dd193f3af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d68d73c-a75e-432e-8cad-6a318530098a&quot;,&quot;41a009ff-977c-4a04-b6a5-2e4e66b53117&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6792b67a-b145-4a55-a13d-5d95b4961861&quot;,&quot;title&quot;:&quot;query studies with param &#x27;PatientName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientName=Philips^Amy&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientName&#x27; Should query studies with param &#x27;PatientName=Philips^Amy&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d094585-5792-4e5e-82f7-637e06373b87&quot;,&quot;parentUUID&quot;:&quot;6792b67a-b145-4a55-a13d-5d95b4961861&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientName=Philips*&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientName&#x27; Should query studies with param &#x27;PatientName=Philips*&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d28d06fa-6593-4c27-9f0a-b054a18b884e&quot;,&quot;parentUUID&quot;:&quot;6792b67a-b145-4a55-a13d-5d95b4961861&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientName=foobar&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientName&#x27; Should query studies with param &#x27;PatientName=foobar&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b1509f8-466e-41aa-a932-0ab1d1d06d05&quot;,&quot;parentUUID&quot;:&quot;6792b67a-b145-4a55-a13d-5d95b4961861&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientName=Philips*&amp;PatientName=*Amy&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientName&#x27; Should query studies with param &#x27;PatientName=Philips*&amp;PatientName=*Amy&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?PatientName=Philips*&amp;PatientName=*Amy`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\n    \nexpect(response.statusCode).to.equal(200);\n    \nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2363bc3e-9e40-4135-8bb8-8cd5ded701ed&quot;,&quot;parentUUID&quot;:&quot;6792b67a-b145-4a55-a13d-5d95b4961861&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d094585-5792-4e5e-82f7-637e06373b87&quot;,&quot;d28d06fa-6593-4c27-9f0a-b054a18b884e&quot;,&quot;4b1509f8-466e-41aa-a932-0ab1d1d06d05&quot;,&quot;2363bc3e-9e40-4135-8bb8-8cd5ded701ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;8aab531a-aa11-4cbc-a6cf-d048aa3a86c9&quot;,&quot;title&quot;:&quot;query studies with param &#x27;PatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientID=123456&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientID&#x27; Should query studies with param &#x27;PatientID=123456&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd1df45b-8292-4e98-b43b-fedc03367ace&quot;,&quot;parentUUID&quot;:&quot;8aab531a-aa11-4cbc-a6cf-d048aa3a86c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientID=C3*&#x27; and get 2 studies successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientID&#x27; Should query studies with param &#x27;PatientID=C3*&#x27; and get 2 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38c40c40-5673-4b5a-b752-a24b266ccd4f&quot;,&quot;parentUUID&quot;:&quot;8aab531a-aa11-4cbc-a6cf-d048aa3a86c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;PatientID=foobar&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;PatientID&#x27; Should query studies with param &#x27;PatientID=foobar&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a29d8d-5e53-48d8-8917-149d5d560d0a&quot;,&quot;parentUUID&quot;:&quot;8aab531a-aa11-4cbc-a6cf-d048aa3a86c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd1df45b-8292-4e98-b43b-fedc03367ace&quot;,&quot;38c40c40-5673-4b5a-b752-a24b266ccd4f&quot;,&quot;e5a29d8d-5e53-48d8-8917-149d5d560d0a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;4559d64c-c3ca-4676-bc9c-bb19bc69f686&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596634768&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyInstanceUID&#x27; Should query studies with param &#x27;StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596634768&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d17c6a66-ddad-4f86-bd9d-9f9da7ed10a4&quot;,&quot;parentUUID&quot;:&quot;4559d64c-c3ca-4676-bc9c-bb19bc69f686&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596123456&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyInstanceUID&#x27; Should query studies with param &#x27;StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596123456&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fff1abdb-9b76-478e-aefe-c128b7004edf&quot;,&quot;parentUUID&quot;:&quot;4559d64c-c3ca-4676-bc9c-bb19bc69f686&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d17c6a66-ddad-4f86-bd9d-9f9da7ed10a4&quot;,&quot;fff1abdb-9b76-478e-aefe-c128b7004edf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1cf7b867-d359-4ca3-88e4-7ae3e3a49156&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyID=D18-1001&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyID&#x27; Should query studies with param &#x27;StudyID=D18-1001&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33ba43a0-749c-4b2d-8ff1-98e1628d854d&quot;,&quot;parentUUID&quot;:&quot;1cf7b867-d359-4ca3-88e4-7ae3e3a49156&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyID=foo&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyID&#x27; Should query studies with param &#x27;StudyID=foo&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3170a842-d003-4ecd-903a-149e8ed073d6&quot;,&quot;parentUUID&quot;:&quot;1cf7b867-d359-4ca3-88e4-7ae3e3a49156&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;33ba43a0-749c-4b2d-8ff1-98e1628d854d&quot;,&quot;3170a842-d003-4ecd-903a-149e8ed073d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c2e3285f-9994-4b12-97cf-77269a460962&quot;,&quot;title&quot;:&quot;query studies with param &#x27;ReferringPhysicianName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;ReferringPhysicianName=ROBERT^BROWN&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;ReferringPhysicianName&#x27; Should query studies with param &#x27;ReferringPhysicianName=ROBERT^BROWN&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;570d7b0c-80d6-4e18-bfb2-9954c022fa42&quot;,&quot;parentUUID&quot;:&quot;c2e3285f-9994-4b12-97cf-77269a460962&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;ReferringPhysicianName=foo&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;ReferringPhysicianName&#x27; Should query studies with param &#x27;ReferringPhysicianName=foo&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8daffd56-3db6-4155-b1b0-875cddb8ae8b&quot;,&quot;parentUUID&quot;:&quot;c2e3285f-9994-4b12-97cf-77269a460962&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;570d7b0c-80d6-4e18-bfb2-9954c022fa42&quot;,&quot;8daffd56-3db6-4155-b1b0-875cddb8ae8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;fb94df3d-6c2f-4b55-b2fc-52d10f990675&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyDescription&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyDescription=foo&#x27; and get 0 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyDescription&#x27; Should query studies with param &#x27;StudyDescription=foo&#x27; and get 0 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9eef0f8-3214-477a-8cc5-8186cdfbfaa9&quot;,&quot;parentUUID&quot;:&quot;fb94df3d-6c2f-4b55-b2fc-52d10f990675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query studies with param &#x27;StudyDescription=XR CHEST 2 VIEWS AP OR PA+LAT&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; query studies with param &#x27;StudyDescription&#x27; Should query studies with param &#x27;StudyDescription=XR CHEST 2 VIEWS AP OR PA+LAT&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        [param]: value\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b9eec1f-1941-4ad2-b6a4-cb94dae8412b&quot;,&quot;parentUUID&quot;:&quot;fb94df3d-6c2f-4b55-b2fc-52d10f990675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9eef0f8-3214-477a-8cc5-8186cdfbfaa9&quot;,&quot;1b9eec1f-1941-4ad2-b6a4-cb94dae8412b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;title&quot;:&quot;sort&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudies.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should sort studies by 00080020&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by 00080020&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ede7310-8e7f-4c85-9504-e3baefe4a5f9&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort studies by -00080020&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by -00080020&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bd33528-e4e7-4cc1-abdc-d22f40271fce&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort studies by 00080030&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by 00080030&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;636c43b1-937a-4e99-8f0f-4261b418d8ca&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort studies by 00080050&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by 00080050&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;212de587-063c-4cfd-a011-3cd6493b0179&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort studies by 0020000D&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by 0020000D&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b36ffaf-40e5-461e-9ac9-63d1eb87a691&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort studies by 00200010&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by 00200010&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bac5abe-55cd-4613-9d83-c37ff4f52df9&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort studies by 00100020&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should sort studies by 00100020&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d8562f9-59a7-447e-bd8a-e57d332c21a4&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when sorting by unsupported field&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; sort Should raise 400 (Bad Request) when sorting by unsupported field&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies?orderBy=${dictionary.keyword.NumberOfStudyRelatedInstances}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\n    \nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea4f8661-c241-45ac-8e37-8f9a8f498f6a&quot;,&quot;parentUUID&quot;:&quot;6bfb6d4b-3ee9-4f5f-9b35-e696575a460d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ede7310-8e7f-4c85-9504-e3baefe4a5f9&quot;,&quot;3bd33528-e4e7-4cc1-abdc-d22f40271fce&quot;,&quot;636c43b1-937a-4e99-8f0f-4261b418d8ca&quot;,&quot;212de587-063c-4cfd-a011-3cd6493b0179&quot;,&quot;1b36ffaf-40e5-461e-9ac9-63d1eb87a691&quot;,&quot;9bac5abe-55cd-4613-9d83-c37ff4f52df9&quot;,&quot;0d8562f9-59a7-447e-bd8a-e57d332c21a4&quot;,&quot;ea4f8661-c241-45ac-8e37-8f9a8f498f6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:151,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;920665c7-3c4e-437b-95fe-fef9f660c735&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;34b4fdb3-0cfd-46a6-9de7-8f5e055f70bd&quot;,&quot;title&quot;:&quot;query study-series&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query study-series\&quot;&quot;,&quot;fullTitle&quot;:&quot;query study-series \&quot;before all\&quot; hook in \&quot;query study-series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2622,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nreturn;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79586428-2234-485d-aa06-367f274e411f&quot;,&quot;parentUUID&quot;:&quot;34b4fdb3-0cfd-46a6-9de7-8f5e055f70bd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series and get 3 series successfully and have proper attributes&quot;,&quot;fullTitle&quot;:&quot;query study-series Should query study-series and get 3 series successfully and have proper attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(3);\nlet firstData = data[0];\nexpect(firstData).to.be.an(\&quot;object\&quot;);\nexpect(firstData).have.property(\&quot;00080060\&quot;);\nexpect(firstData).have.property(\&quot;0020000E\&quot;);\nexpect(firstData).have.property(\&quot;00200011\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b299130-0075-4652-9ab0-fe6895aef2f1&quot;,&quot;parentUUID&quot;:&quot;34b4fdb3-0cfd-46a6-9de7-8f5e055f70bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7672d32a-e2aa-4600-b5f9-b813e287b1f9&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;Modality&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series with param &#x27;Modality=OT&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;Modality&#x27; Should query study-series with param &#x27;Modality=OT&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;898f8dee-629d-411d-804e-d207d1ac4806&quot;,&quot;parentUUID&quot;:&quot;7672d32a-e2aa-4600-b5f9-b813e287b1f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;Modality=CT&#x27; and get 2 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;Modality&#x27; Should query study-series with param &#x27;Modality=CT&#x27; and get 2 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c98594d-9601-411c-a44c-aafbde4162f2&quot;,&quot;parentUUID&quot;:&quot;7672d32a-e2aa-4600-b5f9-b813e287b1f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;Modality=DOC&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;Modality&#x27; Should query study-series with param &#x27;Modality=DOC&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e81cab31-3695-488f-9825-6894a6f3c77d&quot;,&quot;parentUUID&quot;:&quot;7672d32a-e2aa-4600-b5f9-b813e287b1f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;898f8dee-629d-411d-804e-d207d1ac4806&quot;,&quot;0c98594d-9601-411c-a44c-aafbde4162f2&quot;,&quot;e81cab31-3695-488f-9825-6894a6f3c77d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d0007ca9-eecf-41d2-bb9e-89a7a4c6ecb4&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.101062900156808513233428214720&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesInstanceUID&#x27; Should query study-series with param &#x27;SeriesInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.101062900156808513233428214720&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0a49045-2616-4c08-b419-925fa375032e&quot;,&quot;parentUUID&quot;:&quot;d0007ca9-eecf-41d2-bb9e-89a7a4c6ecb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesInstanceUID=123456&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesInstanceUID&#x27; Should query study-series with param &#x27;SeriesInstanceUID=123456&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b13aa63-a247-4467-97d8-dc5e233f0f2d&quot;,&quot;parentUUID&quot;:&quot;d0007ca9-eecf-41d2-bb9e-89a7a4c6ecb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0a49045-2616-4c08-b419-925fa375032e&quot;,&quot;7b13aa63-a247-4467-97d8-dc5e233f0f2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;12ffbf41-f729-453d-8394-95a9b28cdebb&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesNumber=1&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesNumber&#x27; Should query study-series with param &#x27;SeriesNumber=1&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42c4a465-2b78-4825-ac72-8f6819fc941d&quot;,&quot;parentUUID&quot;:&quot;12ffbf41-f729-453d-8394-95a9b28cdebb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesNumber=3001&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesNumber&#x27; Should query study-series with param &#x27;SeriesNumber=3001&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbd0316e-8ad0-496a-9f80-707b528ce0e5&quot;,&quot;parentUUID&quot;:&quot;12ffbf41-f729-453d-8394-95a9b28cdebb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesNumber=5678&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesNumber&#x27; Should query study-series with param &#x27;SeriesNumber=5678&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e59e48d3-25b7-402d-9b46-c1175c16f128&quot;,&quot;parentUUID&quot;:&quot;12ffbf41-f729-453d-8394-95a9b28cdebb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42c4a465-2b78-4825-ac72-8f6819fc941d&quot;,&quot;cbd0316e-8ad0-496a-9f80-707b528ce0e5&quot;,&quot;e59e48d3-25b7-402d-9b46-c1175c16f128&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;acca0184-f22b-4a11-9342-aae69f8eb34e&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesDate=19990417&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesDate&#x27; Should query study-series with param &#x27;SeriesDate=19990417&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;398a2fb8-4cf0-4d4f-9652-eb8d32631235&quot;,&quot;parentUUID&quot;:&quot;acca0184-f22b-4a11-9342-aae69f8eb34e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesDate=19990101&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesDate&#x27; Should query study-series with param &#x27;SeriesDate=19990101&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dfc1ff9-aa40-42f9-9bc2-c361500fb51b&quot;,&quot;parentUUID&quot;:&quot;acca0184-f22b-4a11-9342-aae69f8eb34e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;398a2fb8-4cf0-4d4f-9652-eb8d32631235&quot;,&quot;9dfc1ff9-aa40-42f9-9bc2-c361500fb51b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c10a02a0-d595-425c-abc0-0e7ab80067d9&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesDescription&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesDescription=*Capture*&#x27; and get 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesDescription&#x27; Should query study-series with param &#x27;SeriesDescription=*Capture*&#x27; and get 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92aacd76-465a-4a0c-a4f5-4c03539222b8&quot;,&quot;parentUUID&quot;:&quot;c10a02a0-d595-425c-abc0-0e7ab80067d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query study-series with param &#x27;SeriesDescription=24861268&#x27; and get 0 series successfully&quot;,&quot;fullTitle&quot;:&quot;query study-series query study-series with param &#x27;SeriesDescription&#x27; Should query study-series with param &#x27;SeriesDescription=24861268&#x27; and get 0 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?${param}=${value}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3949653-6ab0-4730-8c1f-5b53fe04190b&quot;,&quot;parentUUID&quot;:&quot;c10a02a0-d595-425c-abc0-0e7ab80067d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92aacd76-465a-4a0c-a4f5-4c03539222b8&quot;,&quot;b3949653-6ab0-4730-8c1f-5b53fe04190b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;title&quot;:&quot;sort&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should sort series by 00080021&quot;,&quot;fullTitle&quot;:&quot;query study-series sort Should sort series by 00080021&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c6841fc-18a0-45a6-af97-795604e64bb4&quot;,&quot;parentUUID&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort series by 00080060&quot;,&quot;fullTitle&quot;:&quot;query study-series sort Should sort series by 00080060&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e89eed37-0918-4712-a0ea-eaea50aac49a&quot;,&quot;parentUUID&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort series by 0008103E&quot;,&quot;fullTitle&quot;:&quot;query study-series sort Should sort series by 0008103E&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bdbba88-0073-445f-a971-ccfd3b7d546c&quot;,&quot;parentUUID&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort series by 00200011&quot;,&quot;fullTitle&quot;:&quot;query study-series sort Should sort series by 00200011&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5e8b777-18fd-46a6-91cc-19a0cc96523c&quot;,&quot;parentUUID&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort series by 0020000E&quot;,&quot;fullTitle&quot;:&quot;query study-series sort Should sort series by 0020000E&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb19b2a4-9c5d-4c9c-8a21-33588a63a9d7&quot;,&quot;parentUUID&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort series by 00080020&quot;,&quot;fullTitle&quot;:&quot;query study-series sort Should sort series by 00080020&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2672dd97-4026-4381-9de6-35480bc4637d&quot;,&quot;parentUUID&quot;:&quot;3bde1990-de87-4cba-8f5b-6b892e72544b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c6841fc-18a0-45a6-af97-795604e64bb4&quot;,&quot;e89eed37-0918-4712-a0ea-eaea50aac49a&quot;,&quot;9bdbba88-0073-445f-a971-ccfd3b7d546c&quot;,&quot;b5e8b777-18fd-46a6-91cc-19a0cc96523c&quot;,&quot;cb19b2a4-9c5d-4c9c-8a21-33588a63a9d7&quot;,&quot;2672dd97-4026-4381-9de6-35480bc4637d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:79,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;6b299130-0075-4652-9ab0-fe6895aef2f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;8c6df2d2-22f8-49b8-beef-d360823d0fa9&quot;,&quot;title&quot;:&quot;query study-series-instances&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeriesInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeriesInstances.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query study-series-instances\&quot;&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances \&quot;before all\&quot; hook in \&quot;query study-series-instances\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1709,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a70ad9b-b94d-47d8-99a5-f9cdc3ed50a1&quot;,&quot;parentUUID&quot;:&quot;8c6df2d2-22f8-49b8-beef-d360823d0fa9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;query study-series-instances\&quot;&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances \&quot;after all\&quot; hook in \&quot;query study-series-instances\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c0c425f-4f03-49df-8255-23c2a8d3c209&quot;,&quot;parentUUID&quot;:&quot;8c6df2d2-22f8-49b8-beef-d360823d0fa9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query study-series-instances and get 5 instances&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances Should query study-series-instances and get 5 instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;196d27ce-e85d-4836-9ba5-c06b617404ea&quot;,&quot;parentUUID&quot;:&quot;8c6df2d2-22f8-49b8-beef-d360823d0fa9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;title&quot;:&quot;sort&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeriesInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudySeriesInstances.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should sort instances by 00080016&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances sort Should sort instances by 00080016&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89b8c898-98a4-4291-904b-17f7f4c216ba&quot;,&quot;parentUUID&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort instances by 00080018&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances sort Should sort instances by 00080018&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84645242-0d92-40af-91b0-03fae53b46c9&quot;,&quot;parentUUID&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort instances by 00080023&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances sort Should sort instances by 00080023&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63fd6fa0-ccf3-45a2-9480-9bade858df57&quot;,&quot;parentUUID&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort instances by 00080033&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances sort Should sort instances by 00080033&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff97b169-82ce-4f42-9894-a92841e8f247&quot;,&quot;parentUUID&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort instances by 00200013&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances sort Should sort instances by 00200013&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c2289c4-6d6a-4538-aee5-22bc80d65098&quot;,&quot;parentUUID&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should sort instances by 00080060&quot;,&quot;fullTitle&quot;:&quot;query study-series-instances sort Should sort instances by 00080060&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances?orderBy=${field}`,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51243064-7b2f-4587-bab0-45ba4004bb36&quot;,&quot;parentUUID&quot;:&quot;967f9847-b7b6-4d75-bd06-5b0a6aaffbf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89b8c898-98a4-4291-904b-17f7f4c216ba&quot;,&quot;84645242-0d92-40af-91b0-03fae53b46c9&quot;,&quot;63fd6fa0-ccf3-45a2-9480-9bade858df57&quot;,&quot;ff97b169-82ce-4f42-9894-a92841e8f247&quot;,&quot;2c2289c4-6d6a-4538-aee5-22bc80d65098&quot;,&quot;51243064-7b2f-4587-bab0-45ba4004bb36&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:128,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;196d27ce-e85d-4836-9ba5-c06b617404ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;257c385b-9e76-4274-a4ad-051b575b5cce&quot;,&quot;title&quot;:&quot;query studies with param instance delete status&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\queryStudyWithParamInstanceDeleteStatus.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\queryStudyWithParamInstanceDeleteStatus.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query studies with param instance delete status\&quot;&quot;,&quot;fullTitle&quot;:&quot;query studies with param instance delete status \&quot;before all\&quot; hook in \&quot;query studies with param instance delete status\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1641,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c90cca2-60bc-4fd0-b4d2-f99fea84fb47&quot;,&quot;parentUUID&quot;:&quot;257c385b-9e76-4274-a4ad-051b575b5cce&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should query studies with &#x27;instanceDeleteStatus&#x27; param result in 1 study&quot;,&quot;fullTitle&quot;:&quot;query studies with param instance delete status should query studies with &#x27;instanceDeleteStatus&#x27; param result in 1 study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${TEST_STUDY_UID}/series/${TEST_SERIES_UID}/instances/${TEST_INSTANCE_UID1}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        instanceDeleteStatus: 1\n    }\n});\n\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bb671e0-54eb-47a1-9ce2-5360e4c772e4&quot;,&quot;parentUUID&quot;:&quot;257c385b-9e76-4274-a4ad-051b575b5cce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query studies with &#x27;instanceDeleteStatus&#x27; param result in 1 study when delete instance in same study&quot;,&quot;fullTitle&quot;:&quot;query studies with param instance delete status should query studies with &#x27;instanceDeleteStatus&#x27; param result in 1 study when delete instance in same study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${TEST_STUDY_UID}/series/${TEST_SERIES_UID}/instances/${TEST_INSTANCE_UID2}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        instanceDeleteStatus: 1\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd9c32df-9ff5-4db9-9a64-fe36f1ea52b5&quot;,&quot;parentUUID&quot;:&quot;257c385b-9e76-4274-a4ad-051b575b5cce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1bb671e0-54eb-47a1-9ce2-5360e4c772e4&quot;,&quot;cd9c32df-9ff5-4db9-9a64-fe36f1ea52b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;title&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\withUser\\queryInstancesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\withUser\\queryInstancesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query instances &#x27;/dicom-web/instances&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user \&quot;before all\&quot; hook in \&quot;query instances &#x27;/dicom-web/instances&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFilename = resolve(__dirname, \&quot;../../../../testData/dicomFiles/1-01-mod-vo\&quot;);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[0]);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[2]);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f0e3c12-7989-4b05-be13-12e047e82fb1&quot;,&quot;parentUUID&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should query instances with user &#x27;test&#x27; successfully (return 1 instance)&quot;,&quot;fullTitle&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user should query instances with user &#x27;test&#x27; successfully (return 1 instance)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/instances\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;instance\&quot;;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;034a60fa-eb98-4d58-b5da-133309e359a5&quot;,&quot;parentUUID&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query instances with user &#x27;test2&#x27; successfully (return 1 instance)&quot;,&quot;fullTitle&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user should query instances with user &#x27;test2&#x27; successfully (return 1 instance)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/instances\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;instance\&quot;;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9456b6b3-31b8-4c22-b092-780ce039abe8&quot;,&quot;parentUUID&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query instances with user &#x27;oTest&#x27; successfully (return 1 instance)&quot;,&quot;fullTitle&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user should query instances with user &#x27;oTest&#x27; successfully (return 1 instance)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/instances\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;instance\&quot;;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;425ee6ef-9acd-4d69-b4cd-69f06490f470&quot;,&quot;parentUUID&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query instances with user &#x27;pTest&#x27; successfully (return 1 instance)&quot;,&quot;fullTitle&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user should query instances with user &#x27;pTest&#x27; successfully (return 1 instance)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/instances\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;instance\&quot;;\nrequest.user = TEST_USERS[3];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c44d3e67-adad-44d2-b95c-8ad5165a34c0&quot;,&quot;parentUUID&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query instances with user &#x27;pTest2&#x27; successfully (return 0 instance)&quot;,&quot;fullTitle&quot;:&quot;query instances &#x27;/dicom-web/instances&#x27; with user should query instances with user &#x27;pTest2&#x27; successfully (return 0 instance)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/instances\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;instance\&quot;;\nrequest.user = TEST_USERS[4];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4c32205-8094-4bc4-b603-4041c3a35e7e&quot;,&quot;parentUUID&quot;:&quot;869ba661-b911-490b-ab8f-3fbcff70d7ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;034a60fa-eb98-4d58-b5da-133309e359a5&quot;,&quot;9456b6b3-31b8-4c22-b092-780ce039abe8&quot;,&quot;425ee6ef-9acd-4d69-b4cd-69f06490f470&quot;,&quot;c44d3e67-adad-44d2-b95c-8ad5165a34c0&quot;,&quot;f4c32205-8094-4bc4-b603-4041c3a35e7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;title&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\withUser\\querySeriesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\withUser\\querySeriesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query series &#x27;/dicom-web/series&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user \&quot;before all\&quot; hook in \&quot;query series &#x27;/dicom-web/series&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:222,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFilename = resolve(__dirname, \&quot;../../../../testData/dicomFiles/1-01-mod-vo\&quot;);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[0]);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[2]);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1ee4958-2da6-4846-925e-69e932a6ce98&quot;,&quot;parentUUID&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should query series with user &#x27;test&#x27; successfully (return 1 series)&quot;,&quot;fullTitle&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user should query series with user &#x27;test&#x27; successfully (return 1 series)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;series\&quot;;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69649887-8af0-4194-8d21-f71fcb8af50d&quot;,&quot;parentUUID&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query series with user &#x27;test2&#x27; successfully (return 1 series)&quot;,&quot;fullTitle&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user should query series with user &#x27;test2&#x27; successfully (return 1 series)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;series\&quot;;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa5b161d-731e-42b2-8b1e-04e8f744c7ac&quot;,&quot;parentUUID&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query series with user &#x27;oTest&#x27; successfully (return 1 series)&quot;,&quot;fullTitle&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user should query series with user &#x27;oTest&#x27; successfully (return 1 series)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;series\&quot;;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd4917e6-af9b-4fb7-a00d-cfa3a6ed42f6&quot;,&quot;parentUUID&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query series with user &#x27;pTest&#x27; successfully (return 1 series)&quot;,&quot;fullTitle&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user should query series with user &#x27;pTest&#x27; successfully (return 1 series)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;series\&quot;;\nrequest.user = TEST_USERS[3];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eed46fb9-78ca-4835-bac5-2bbfd791835d&quot;,&quot;parentUUID&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query series with user &#x27;pTest2&#x27; successfully (return 0 series)&quot;,&quot;fullTitle&quot;:&quot;query series &#x27;/dicom-web/series&#x27; with user should query series with user &#x27;pTest2&#x27; successfully (return 0 series)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/series\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;series\&quot;;\nrequest.user = TEST_USERS[4];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb3122b0-b2c6-4657-9857-f43274b200a4&quot;,&quot;parentUUID&quot;:&quot;84938813-a2c3-4ef9-8849-d55cd2671fa5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69649887-8af0-4194-8d21-f71fcb8af50d&quot;,&quot;aa5b161d-731e-42b2-8b1e-04e8f744c7ac&quot;,&quot;bd4917e6-af9b-4fb7-a00d-cfa3a6ed42f6&quot;,&quot;eed46fb9-78ca-4835-bac5-2bbfd791835d&quot;,&quot;bb3122b0-b2c6-4657-9857-f43274b200a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;title&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\QIDO-RS\\withUser\\queryStudiesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\QIDO-RS\\withUser\\queryStudiesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;query studies &#x27;/dicom-web/studies&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user \&quot;before all\&quot; hook in \&quot;query studies &#x27;/dicom-web/studies&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:212,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFilename = resolve(__dirname, \&quot;../../../../testData/dicomFiles/1-01-mod-vo\&quot;);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[0]);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[2]);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6102102b-6bec-4c95-adc0-8c33f82cd69c&quot;,&quot;parentUUID&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should query study with user &#x27;test&#x27; successfully (return 1 study)&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user should query study with user &#x27;test&#x27; successfully (return 1 study)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;study\&quot;;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95279c7b-2244-48c4-b263-fe1aa40e4e21&quot;,&quot;parentUUID&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query study with user &#x27;test2&#x27; successfully (return 1 study)&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user should query study with user &#x27;test2&#x27; successfully (return 1 study)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;study\&quot;;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e16779d6-0179-4e9f-81bf-8bf2e98a0c19&quot;,&quot;parentUUID&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query study with user &#x27;oTest&#x27; successfully (return 1 study)&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user should query study with user &#x27;oTest&#x27; successfully (return 1 study)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;study\&quot;;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0401c69-f829-4018-a1d0-c357a9211096&quot;,&quot;parentUUID&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query study with user &#x27;pTest&#x27; successfully (return 1 study)&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user should query study with user &#x27;pTest&#x27; successfully (return 1 study)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;study\&quot;;\nrequest.user = TEST_USERS[3];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(200);\nexpect(response._getJSONData()).to.be.an.instanceOf(Array);\nexpect(response._getJSONData().length).to.be.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09b5e306-5edb-4fb4-845c-e77ebb10ce0e&quot;,&quot;parentUUID&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should query study with user &#x27;pTest2&#x27; successfully (return 0 study)&quot;,&quot;fullTitle&quot;:&quot;query studies &#x27;/dicom-web/studies&#x27; with user should query study with user &#x27;pTest2&#x27; successfully (return 0 study)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/dicom-web/studies\&quot;,\n    headers: {\n        \&quot;content-type\&quot;: \&quot;application/dicom+json\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    }\n});\nrequest.dicomLevel = \&quot;study\&quot;;\nrequest.user = TEST_USERS[4];\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.be.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90a82615-9bc0-438b-abec-7ea60488d7eb&quot;,&quot;parentUUID&quot;:&quot;bd82c104-b090-40f9-ac5e-9c9340411557&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95279c7b-2244-48c4-b263-fe1aa40e4e21&quot;,&quot;e16779d6-0179-4e9f-81bf-8bf2e98a0c19&quot;,&quot;e0401c69-f829-4018-a1d0-c357a9211096&quot;,&quot;09b5e306-5edb-4fb4-845c-e77ebb10ce0e&quot;,&quot;90a82615-9bc0-438b-abec-7ea60488d7eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:35,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;79ae445a-233a-4a10-b2e5-9e974eb33078&quot;,&quot;title&quot;:&quot;Count Study&#x27;s Series&#x27; Instances with User&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STAT-RS\\withUser\\countInstanceOfSeriesOfStudyWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STAT-RS\\withUser\\countInstanceOfSeriesOfStudyWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Count Study&#x27;s Series&#x27; Instances with User\&quot;&quot;,&quot;fullTitle&quot;:&quot;Count Study&#x27;s Series&#x27; Instances with User \&quot;before all\&quot; hook in \&quot;Count Study&#x27;s Series&#x27; Instances with User\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:702,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let dicomFile of dicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b10afd6-f92f-422d-8928-a2aa3eac7c5e&quot;,&quot;parentUUID&quot;:&quot;79ae445a-233a-4a10-b2e5-9e974eb33078&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Count Study&#x27;s Series&#x27; Instances with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 5, 5, and 0&quot;,&quot;fullTitle&quot;:&quot;Count Study&#x27;s Series&#x27; Instances with User Count Study&#x27;s Series&#x27; Instances with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 5, 5, and 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let userTestRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[0],\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nlet userTest2Request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[1],\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nlet oTestRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[2],\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nlet userTestResponse = createResponse();\nlet userTest2Response = createResponse();\nlet oTestResponse = createResponse();\nawait Promise.all([\n    CountInstancesController(userTestRequest, userTestResponse),\n    CountInstancesController(userTest2Request, userTest2Response),\n    CountInstancesController(oTestRequest, oTestResponse)\n]);\nexpect(userTestResponse.statusCode).to.equal(200);\nexpect(userTest2Response.statusCode).to.equal(200);\nexpect(oTestResponse.statusCode).to.equal(200);\nexpect(userTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(5);\nexpect(userTest2Response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(5);\nexpect(oTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48b9490c-7037-47ba-a8a6-70261f8777b6&quot;,&quot;parentUUID&quot;:&quot;79ae445a-233a-4a10-b2e5-9e974eb33078&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48b9490c-7037-47ba-a8a6-70261f8777b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d01543c2-c00c-4696-92dd-84ddd63485ea&quot;,&quot;title&quot;:&quot;Count Instances with User&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STAT-RS\\withUser\\countInstanceWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STAT-RS\\withUser\\countInstanceWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Count Instances with User\&quot;&quot;,&quot;fullTitle&quot;:&quot;Count Instances with User \&quot;before all\&quot; hook in \&quot;Count Instances with User\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:634,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let dicomFile of dicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;643d980a-76db-48c8-b563-b3035235013e&quot;,&quot;parentUUID&quot;:&quot;d01543c2-c00c-4696-92dd-84ddd63485ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Count Instances with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 11, 11, and 0&quot;,&quot;fullTitle&quot;:&quot;Count Instances with User Count Instances with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 11, 11, and 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let userTestRequest = createRequest({\n    url: `/dicom-web/instances/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[0]\n});\nlet userTest2Request = createRequest({\n    url: `/dicom-web/instances/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[1]\n});\nlet oTestRequest = createRequest({\n    url: `/dicom-web/instances/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[2]\n});\nlet userTestResponse = createResponse();\nlet userTest2Response = createResponse();\nlet oTestResponse = createResponse();\nawait Promise.all([\n    CountInstancesController(userTestRequest, userTestResponse),\n    CountInstancesController(userTest2Request, userTest2Response),\n    CountInstancesController(oTestRequest, oTestResponse)\n]);\nexpect(userTestResponse.statusCode).to.equal(200);\nexpect(userTest2Response.statusCode).to.equal(200);\nexpect(oTestResponse.statusCode).to.equal(200);\nexpect(userTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(11);\nexpect(userTest2Response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(11);\nexpect(oTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06cb69a7-6816-496b-a914-50e3c9cc2ebd&quot;,&quot;parentUUID&quot;:&quot;d01543c2-c00c-4696-92dd-84ddd63485ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06cb69a7-6816-496b-a914-50e3c9cc2ebd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c95d423a-d96a-45ab-a284-66c482ead363&quot;,&quot;title&quot;:&quot;Count Patients with User&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STAT-RS\\withUser\\countPatientWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STAT-RS\\withUser\\countPatientWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Count Patients with User\&quot;&quot;,&quot;fullTitle&quot;:&quot;Count Patients with User \&quot;before all\&quot; hook in \&quot;Count Patients with User\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet request = createRequest({\n    url: `/dicom-web/patients`,\n    method: \&quot;POST\&quot;,\n    body: structuredClone(testPatient),\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet createPatientService = new CreatePatientService(request, response);\nawait createPatientService.create();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5db4cdb6-81d0-4d45-ab89-1ead820cdeac&quot;,&quot;parentUUID&quot;:&quot;c95d423a-d96a-45ab-a284-66c482ead363&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should count patients with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Count Patients with User Should count patients with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/patients/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CountPatientController(request, response);\nexpect(response.statusCode).to.equal(200);\nexpect(response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fe6b597-c388-4ec6-a707-e58e4103727b&quot;,&quot;parentUUID&quot;:&quot;c95d423a-d96a-45ab-a284-66c482ead363&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should count patients with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;Count Patients with User Should count patients with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/patients/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[1]\n});\nlet response = createResponse();\nawait CountPatientController(request, response);\nexpect(response.statusCode).to.equal(200);\nexpect(response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c49fa3b1-921f-43c0-a501-04f757bfe134&quot;,&quot;parentUUID&quot;:&quot;c95d423a-d96a-45ab-a284-66c482ead363&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not count patients with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Count Patients with User Should not count patients with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/patients/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\n\nawait CountPatientController(request, response);\nexpect(response.statusCode).to.equal(200);\nexpect(response._getJSONData()).have.property(\&quot;count\&quot;).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e98cbaa0-e616-481b-b5be-f40d48a6bde8&quot;,&quot;parentUUID&quot;:&quot;c95d423a-d96a-45ab-a284-66c482ead363&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should count patients with user &#x27;test&#x27;, &#x27;test2&#x27; and &#x27;oTest&#x27; in concurrent then get proper count&quot;,&quot;fullTitle&quot;:&quot;Count Patients with User Should count patients with user &#x27;test&#x27;, &#x27;test2&#x27; and &#x27;oTest&#x27; in concurrent then get proper count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let userTestRequest = createRequest({\n    url: `/dicom-web/patients/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[0]\n});\nlet userTest2Request = createRequest({\n    url: `/dicom-web/patients/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[1]\n});\nlet oTestRequest = createRequest({\n    url: `/dicom-web/patients/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[2]\n});\nlet userTestResponse = createResponse();\nlet userTest2Response = createResponse();\nlet oTestResponse = createResponse();\nawait Promise.all([\n    CountPatientController(userTestRequest, userTestResponse),\n    CountPatientController(userTest2Request, userTest2Response),\n    CountPatientController(oTestRequest, oTestResponse)\n]);\nexpect(userTestResponse.statusCode).to.equal(200);\nexpect(userTest2Response.statusCode).to.equal(200);\nexpect(oTestResponse.statusCode).to.equal(200);\nexpect(userTestResponse._getJSONData().count).to.equal(1);\nexpect(userTest2Response._getJSONData().count).to.equal(1);\nexpect(oTestResponse._getJSONData().count).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fe88c8e-521e-4750-9868-87a5612b11f2&quot;,&quot;parentUUID&quot;:&quot;c95d423a-d96a-45ab-a284-66c482ead363&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fe6b597-c388-4ec6-a707-e58e4103727b&quot;,&quot;c49fa3b1-921f-43c0-a501-04f757bfe134&quot;,&quot;e98cbaa0-e616-481b-b5be-f40d48a6bde8&quot;,&quot;5fe88c8e-521e-4750-9868-87a5612b11f2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;55d7ecb6-8d29-4a07-9fe4-c7eda3d53401&quot;,&quot;title&quot;:&quot;Count Study&#x27;s Series with User&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STAT-RS\\withUser\\countSeriesOfStudyWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STAT-RS\\withUser\\countSeriesOfStudyWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Count Study&#x27;s Series with User\&quot;&quot;,&quot;fullTitle&quot;:&quot;Count Study&#x27;s Series with User \&quot;before all\&quot; hook in \&quot;Count Study&#x27;s Series with User\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1686,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../testData/dicomFiles\&quot;),\n    absolute: true\n});\nfor (let dicomFile of dicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd96b447-a23f-4901-8d65-2aa06ebc0244&quot;,&quot;parentUUID&quot;:&quot;55d7ecb6-8d29-4a07-9fe4-c7eda3d53401&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Count Series with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 3, 3, and 0&quot;,&quot;fullTitle&quot;:&quot;Count Study&#x27;s Series with User Count Series with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 3, 3, and 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let userTestRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/count`,\n    method: \&quot;GET\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    user: TEST_USERS[0]\n});\nlet userTest2Request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/count`,\n    method: \&quot;GET\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    user: TEST_USERS[1]\n});\nlet userOTestRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/count`,\n    method: \&quot;GET\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    user: TEST_USERS[2]\n});\nlet userTestResponse = createResponse();\nlet userTest2Response = createResponse();\nlet userOTestResponse = createResponse();\nawait Promise.all([\n    CountSeriesController(userTestRequest, userTestResponse),\n    CountSeriesController(userTest2Request, userTest2Response),\n    CountSeriesController(userOTestRequest, userOTestResponse)\n]);\nexpect(userTestResponse.statusCode).to.equal(200);\nexpect(userTest2Response.statusCode).to.equal(200);\nexpect(userOTestResponse.statusCode).to.equal(200);\nexpect(userTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(3);\nexpect(userTest2Response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(3);\nexpect(userOTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;094f17cd-3605-42f5-8435-c7e6f8bfa50d&quot;,&quot;parentUUID&quot;:&quot;55d7ecb6-8d29-4a07-9fe4-c7eda3d53401&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;094f17cd-3605-42f5-8435-c7e6f8bfa50d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;fe422f9d-0a8a-4f5d-80ee-0e2a83d1b88b&quot;,&quot;title&quot;:&quot;Count Series with User&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STAT-RS\\withUser\\countSeriesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STAT-RS\\withUser\\countSeriesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Count Series with User\&quot;&quot;,&quot;fullTitle&quot;:&quot;Count Series with User \&quot;before all\&quot; hook in \&quot;Count Series with User\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:621,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let dicomFile of dicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28efec3c-810c-4d9e-8ded-a70126e90bd2&quot;,&quot;parentUUID&quot;:&quot;fe422f9d-0a8a-4f5d-80ee-0e2a83d1b88b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Count Series with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 3, 3, and 0&quot;,&quot;fullTitle&quot;:&quot;Count Series with User Count Series with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 3, 3, and 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let userTestRequest = createRequest({\n    url: `/dicom-web/series/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[0]\n});\nlet userTest2Request = createRequest({\n    url: `/dicom-web/series/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[1]\n});\nlet userOTestRequest = createRequest({\n    url: `/dicom-web/series/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[2]\n});\nlet userTestResponse = createResponse();\nlet userTest2Response = createResponse();\nlet userOTestResponse = createResponse();\nawait Promise.all([\n    CountSeriesController(userTestRequest, userTestResponse),\n    CountSeriesController(userTest2Request, userTest2Response),\n    CountSeriesController(userOTestRequest, userOTestResponse)\n]);\nexpect(userTestResponse.statusCode).to.equal(200);\nexpect(userTest2Response.statusCode).to.equal(200);\nexpect(userOTestResponse.statusCode).to.equal(200);\nexpect(userTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(3);\nexpect(userTest2Response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(3);\nexpect(userOTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2c353ac-8b39-476d-93ab-16924eccfd80&quot;,&quot;parentUUID&quot;:&quot;fe422f9d-0a8a-4f5d-80ee-0e2a83d1b88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2c353ac-8b39-476d-93ab-16924eccfd80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;4c628ec9-02d3-4941-b6b9-671c2a439f2f&quot;,&quot;title&quot;:&quot;Count Studies with User&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STAT-RS\\withUser\\countStudyWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STAT-RS\\withUser\\countStudyWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Count Studies with User\&quot;&quot;,&quot;fullTitle&quot;:&quot;Count Studies with User \&quot;before all\&quot; hook in \&quot;Count Studies with User\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:630,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet dicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let dicomFile of dicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a08fd63-4f2b-49da-a37f-caae2bd07709&quot;,&quot;parentUUID&quot;:&quot;4c628ec9-02d3-4941-b6b9-671c2a439f2f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Count Studies with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 1, 1, and 0&quot;,&quot;fullTitle&quot;:&quot;Count Studies with User Count Studies with User &#x27;test&#x27;, &#x27;test2&#x27;, and &#x27;oTest&#x27; result in 1, 1, and 0&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let userTestRequest = createRequest({\n    url: `/dicom-web/studies/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[0]\n});\nlet userTest2Request = createRequest({\n    url: `/dicom-web/studies/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[1]\n});\nlet userOTestRequest = createRequest({\n    url: `/dicom-web/studies/count`,\n    method: \&quot;GET\&quot;,\n    user: TEST_USERS[2]\n});\nlet userTestResponse = createResponse();\nlet userTest2Response = createResponse();\nlet userOTestResponse = createResponse();\nawait Promise.all([\n    CountStudyController(userTestRequest, userTestResponse),\n    CountStudyController(userTest2Request, userTest2Response),\n    CountStudyController(userOTestRequest, userOTestResponse)\n]);\nexpect(userTestResponse.statusCode).to.equal(200);\nexpect(userTest2Response.statusCode).to.equal(200);\nexpect(userOTestResponse.statusCode).to.equal(200);\nexpect(userTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(1);\nexpect(userTest2Response._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(1);\nexpect(userOTestResponse._getJSONData()).to.have.property(\&quot;count\&quot;).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5702d65b-7c14-482c-b018-4111b8c5a778&quot;,&quot;parentUUID&quot;:&quot;4c628ec9-02d3-4941-b6b9-671c2a439f2f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5702d65b-7c14-482c-b018-4111b8c5a778&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;title&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STOW-RS\\storeInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STOW-RS\\storeInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; \&quot;before all\&quot; hook in \&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b616d8b-4c4d-423e-9711-1dde5660e70c&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; \&quot;after all\&quot; hook in \&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10cc088c-77e4-40e4-abd9-cc4bbb3cf3da&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should store a DICOM instance with complete attributes successfully and have proper attributes&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store a DICOM instance with complete attributes successfully and have proper attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDicomFilename = resolve(__dirname, \&quot;../../../testData/dicomFiles/1-01-mod-vo\&quot;);\n        const response = await storeInstanceForTest(testDicomFilename);\n        expect(response.statusCode).to.be.equal(200);\n        let testFileDicomJson = await JDcm2Json.get(testDicomFilename);\n        await expectInstanceHaveProperAttributes(testFileDicomJson);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b1fa63a-4c73-44af-bfca-aff9e281aa7a&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update a DICOM instance&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should update a DICOM instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDicomFilename = resolve(__dirname, \&quot;../../../testData/forStore/1-01-mod-vo-updated\&quot;);\nconst response = await storeInstanceForTest(testDicomFilename);\nexpect(response.statusCode).to.be.equal(200);\nlet testFileDicomJson = await JDcm2Json.get(testDicomFilename);\nawait expectInstanceHaveProperAttributes(testFileDicomJson);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;422e9ee6-3f76-473d-ad76-3d58d202bb1d&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1, CR) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1, CR) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1076d9f1-fc4a-4142-a260-4cd658b3e9db&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1.1, DX) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1.1, DX) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:480,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18176810-bf0d-4a2d-ad94-6fad274582ca&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, CT) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, CT) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba8c7c4a-8a2c-4c53-b5f4-d1a9983539f0&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.4, MR) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.4, MR) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4eff284e-393c-49bb-9d4f-5f59e5c38d35&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, US) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, US) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd9c22b0-5e5a-4dbb-bb28-e5e1682c01e4&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.104.1, US) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.104.1, US) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d62adee-6a98-491e-a1d3-aee7fdbcd9c0&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, SC) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, SC) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f10db3ff-a504-4c41-a9d2-428c1cda25bc&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, OT) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, OT) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c89fa29b-357f-456f-9576-c7358bb3b765&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.9.1.1, ECG) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.9.1.1, ECG) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:138,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3516ef0-6cc1-4936-8fc2-4ca564bb51d0&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.12.1, XA) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.12.1, XA) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8847d78-4c78-4b27-875b-9c7b16102083&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.3.1, Multi-Frame (US)) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.3.1, Multi-Frame (US)) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7563ae19-2a7c-4358-b5f9-c3e8cf11bf1d&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.91.1, ANN) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.91.1, ANN) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aae34df2-e1cf-490b-b55b-53131f0b78e2&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.481.3, RTSTRUCT) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.481.3, RTSTRUCT) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:150,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;053490a1-e239-498b-a721-58bb4dbfaa45&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.66.4, SEG) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.66.4, SEG) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fba9e103-6ed5-4590-b8eb-81085a5b2bfd&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.11.1, GSPS) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.11.1, GSPS) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc585a3a-94a1-4572-9101-09401d10c86b&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.91, JPEG 2000) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.91, JPEG 2000) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f81a53ca-a450-4433-b4d4-df1bd9e224e1&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.51, JPEG Lossless) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.51, JPEG Lossless) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dec46c2a-57cf-4a63-a157-eb1d85393ed0&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.50, JPEG Baseline) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.50, JPEG Baseline) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;650de329-2edd-4250-950b-3a7ca1594e58&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.1, Explicit VR Little Endian (Uncompressed)) successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.1, Explicit VR Little Endian (Uncompressed)) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(filename);\nexpect(response.statusCode).to.be.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;object\&quot;);\nexpect(data?.[\&quot;00081198\&quot;]?.[\&quot;Value\&quot;]?.length || 0).to.be.equal(0);\nexpect(data).have.property(\&quot;00081199\&quot;).have.property(\&quot;Value\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6a4c76c-d1d2-4708-a805-b2fcbae8a7d3&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return error when store not DICOM file&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance route: POST &#x27;/dicom-web/studies&#x27; Should return error when store not DICOM file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await storeInstanceForTest(resolve(__dirname, \&quot;../../../testData/dicomFiles/data.json\&quot;));\nexpect(response.statusCode).to.be.not.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34a4e08b-a619-409a-81fb-4565f75975d8&quot;,&quot;parentUUID&quot;:&quot;1565aaa1-adc4-49f6-89d6-fa7807343cd4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b1fa63a-4c73-44af-bfca-aff9e281aa7a&quot;,&quot;422e9ee6-3f76-473d-ad76-3d58d202bb1d&quot;,&quot;1076d9f1-fc4a-4142-a260-4cd658b3e9db&quot;,&quot;18176810-bf0d-4a2d-ad94-6fad274582ca&quot;,&quot;ba8c7c4a-8a2c-4c53-b5f4-d1a9983539f0&quot;,&quot;4eff284e-393c-49bb-9d4f-5f59e5c38d35&quot;,&quot;dd9c22b0-5e5a-4dbb-bb28-e5e1682c01e4&quot;,&quot;1d62adee-6a98-491e-a1d3-aee7fdbcd9c0&quot;,&quot;f10db3ff-a504-4c41-a9d2-428c1cda25bc&quot;,&quot;c89fa29b-357f-456f-9576-c7358bb3b765&quot;,&quot;e3516ef0-6cc1-4936-8fc2-4ca564bb51d0&quot;,&quot;a8847d78-4c78-4b27-875b-9c7b16102083&quot;,&quot;7563ae19-2a7c-4358-b5f9-c3e8cf11bf1d&quot;,&quot;aae34df2-e1cf-490b-b55b-53131f0b78e2&quot;,&quot;053490a1-e239-498b-a721-58bb4dbfaa45&quot;,&quot;fba9e103-6ed5-4590-b8eb-81085a5b2bfd&quot;,&quot;fc585a3a-94a1-4572-9101-09401d10c86b&quot;,&quot;f81a53ca-a450-4433-b4d4-df1bd9e224e1&quot;,&quot;dec46c2a-57cf-4a63-a157-eb1d85393ed0&quot;,&quot;650de329-2edd-4250-950b-3a7ca1594e58&quot;,&quot;e6a4c76c-d1d2-4708-a805-b2fcbae8a7d3&quot;,&quot;34a4e08b-a619-409a-81fb-4565f75975d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1936,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a2a4f8e2-de87-471f-8829-746f779b9b32&quot;,&quot;title&quot;:&quot;Store DICOM Instance with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\STOW-RS\\storeInstanceWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\STOW-RS\\storeInstanceWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Store DICOM Instance with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance with user \&quot;before all\&quot; hook in \&quot;Store DICOM Instance with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7701bb56-2a11-4646-9cfc-3acfcf7bc877&quot;,&quot;parentUUID&quot;:&quot;a2a4f8e2-de87-471f-8829-746f779b9b32&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should store a DICOM instance with user successfully&quot;,&quot;fullTitle&quot;:&quot;Store DICOM Instance with user Should store a DICOM instance with user successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:178,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDicomFilename = resolve(__dirname, \&quot;../../../testData/dicomFiles/1-01-mod-vo\&quot;);\nconst { storeResult, tempFilepath } = await storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[0]);\nexpect(storeResult.code).to.be.equal(200);\nexpect(storeResult.responseMessage)\n    .have.property(\&quot;00081199\&quot;)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .have.property(\&quot;00081155\&quot;)\n    .have.property(\&quot;Value\&quot;)\n    .have.property(\&quot;0\&quot;)\n    .eq(\&quot;1.2.276.0.7230010.3.1.4.2304755699.3648.1691733220.920\&quot;);\nawait storeInstanceWithUserForTest(testDicomFilename, TEST_USERS[1]);\nif (process.env.TEST_DB_TYPE === \&quot;sql\&quot;) {\n    let patients = await PatientModel.findAll({});\n    expect(patients).to.have.lengthOf(1);\n    expect(patients[0].user_id).to.be.not.null;\n    let studies = await StudyModel.findAll({});\n    expect(studies).to.have.lengthOf(1);\n    expect(studies[0].user_id).to.be.not.null;\n    let series = await SeriesModel.findAll({});\n    expect(series).to.have.lengthOf(1);\n    expect(series[0].user_id).to.be.not.null;\n    let instances = await InstanceModel.findAll({});\n    expect(instances).to.have.lengthOf(1);\n    expect(instances[0].user_id).to.be.not.null;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2916995d-3928-420f-94b4-ce0e4d8c5f2b&quot;,&quot;parentUUID&quot;:&quot;a2a4f8e2-de87-471f-8829-746f779b9b32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2916995d-3928-420f-94b4-ce0e4d8c5f2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:178,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;976361b9-6792-4b6f-b7a2-597bc996f4a6&quot;,&quot;title&quot;:&quot;UPS-RS workitem cancellation&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2c80f4ac-6116-41b1-918c-7c5fc78e5cc4&quot;,&quot;title&quot;:&quot;cancel IN PROGRESS&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;cancel IN PROGRESS\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel IN PROGRESS \&quot;before all\&quot; hook in \&quot;cancel IN PROGRESS\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait createTestInProgressWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c94b53e6-f51f-4e28-a033-c668c0d7e6d7&quot;,&quot;parentUUID&quot;:&quot;2c80f4ac-6116-41b1-918c-7c5fc78e5cc4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should cancel workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel IN PROGRESS Should cancel workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/cancelrequest`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify(cancellationRequestPayload)\n});\nexpect(response.statusCode).to.equal(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3464fb23-9b82-4ed4-a8f1-52c17a2c98db&quot;,&quot;parentUUID&quot;:&quot;2c80f4ac-6116-41b1-918c-7c5fc78e5cc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3464fb23-9b82-4ed4-a8f1-52c17a2c98db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;648ab4cd-7bb3-44cd-afb3-88fa9c6ebf5c&quot;,&quot;title&quot;:&quot;cancel CANCELED&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;cancel CANCELED\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel CANCELED \&quot;before all\&quot; hook in \&quot;cancel CANCELED\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait createTestCanceledWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b71aafd-f035-41d6-97db-2cec71f97d9a&quot;,&quot;parentUUID&quot;:&quot;648ab4cd-7bb3-44cd-afb3-88fa9c6ebf5c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should cancel workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel CANCELED Should cancel workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/cancelrequest`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify(cancellationRequestPayload)\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25ca74b7-5542-461b-809d-d3b1003f5649&quot;,&quot;parentUUID&quot;:&quot;648ab4cd-7bb3-44cd-afb3-88fa9c6ebf5c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25ca74b7-5542-461b-809d-d3b1003f5649&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;768ab6d9-d283-48d4-be95-39fb3e42084c&quot;,&quot;title&quot;:&quot;cancel SCHEDULED&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;cancel SCHEDULED\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel SCHEDULED \&quot;before all\&quot; hook in \&quot;cancel SCHEDULED\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait createTestScheduledWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d28b3fcc-8b18-421c-b02a-48cc1867b799&quot;,&quot;parentUUID&quot;:&quot;768ab6d9-d283-48d4-be95-39fb3e42084c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise 409 (Conflict) when cancelling SCHEDULED workitem&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel SCHEDULED Should raise 409 (Conflict) when cancelling SCHEDULED workitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/cancelrequest`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify(cancellationRequestPayload)\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a3bff99-0ebf-44fc-835b-3d22155b559b&quot;,&quot;parentUUID&quot;:&quot;768ab6d9-d283-48d4-be95-39fb3e42084c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a3bff99-0ebf-44fc-835b-3d22155b559b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;33539814-0a39-4d68-9e94-ea5c3d1eb268&quot;,&quot;title&quot;:&quot;cancel COMPLETED&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\cancelWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;cancel COMPLETED\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel COMPLETED \&quot;before all\&quot; hook in \&quot;cancel COMPLETED\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait createTestCompletedWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa6f6b6d-4c4b-423d-9452-9d664eab1bc4&quot;,&quot;parentUUID&quot;:&quot;33539814-0a39-4d68-9e94-ea5c3d1eb268&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise 409 (Conflict) when cancelling COMPLETED workitem&quot;,&quot;fullTitle&quot;:&quot;UPS-RS workitem cancellation cancel COMPLETED Should raise 409 (Conflict) when cancelling COMPLETED workitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/cancelrequest`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify(cancellationRequestPayload)\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e00e000-8a94-4684-a98e-2927f20fa0cd&quot;,&quot;parentUUID&quot;:&quot;33539814-0a39-4d68-9e94-ea5c3d1eb268&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e00e000-8a94-4684-a98e-2927f20fa0cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7f1ea512-403c-4b37-ae29-751486015006&quot;,&quot;title&quot;:&quot;UPS-RS change workitem state&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS change workitem state\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state \&quot;before all\&quot; hook in \&quot;UPS-RS change workitem state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet createWorkitemResponse = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    payload: testWorkitem\n});\ncreatedWorkitemLocation = createWorkitemResponse.headers[\&quot;content-location\&quot;];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b130c2c3-720f-4ae6-b266-6c4504012cfc&quot;,&quot;parentUUID&quot;:&quot;7f1ea512-403c-4b37-ae29-751486015006&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise 409 (Conflict) when changing SCHEDULED to COMPLETED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state Should raise 409 (Conflict) when changing SCHEDULED to COMPLETED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n            method: \&quot;PUT\&quot;,\n            url: `/dicom-web/workitems/${workitemUID}/state`,\n            headers: {\n                \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n            },\n            payload: JSON.stringify([changeUpsStateToCompletedRequestPayload])\n        });\n        expect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b427a7bb-0c28-4344-b3e6-55762d1f70c1&quot;,&quot;parentUUID&quot;:&quot;7f1ea512-403c-4b37-ae29-751486015006&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;83d1fbb5-8eac-478d-911c-06e1bcd27d4b&quot;,&quot;title&quot;:&quot;change workitem state to IN PROGRESS&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should change workitem to IN PROGRESS successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to IN PROGRESS Should change workitem to IN PROGRESS successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n                method: \&quot;PUT\&quot;,\n                url: `/dicom-web/workitems/${workitemUID}/state`,\n                headers: {\n                    \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n                },\n                payload: JSON.stringify([changeUpsStateRequestPayload])\n            });\n            expect(response.statusCode).to.equal(200);\n            let fetchWorkitemResponse = await inject(app, {\n                method: \&quot;GET\&quot;,\n                url: createdWorkitemLocation\n            });\n            let data = await fetchWorkitemResponse.json();\n            expect(data).to.be.an(\&quot;array\&quot;);\n            expect(data[0]).to.be.an(\&quot;object\&quot;);\n            expect(data[0]).have.property(\&quot;00741000\&quot;).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.equal(\&quot;IN PROGRESS\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dce7311e-49a8-47c6-87ef-c4e45719d085&quot;,&quot;parentUUID&quot;:&quot;83d1fbb5-8eac-478d-911c-06e1bcd27d4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise Bad Request (400) when missing Transaction UID&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to IN PROGRESS Should raise Bad Request (400) when missing Transaction UID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedPayload = structuredClone(changeUpsStateRequestPayload);\ndelete clonedPayload[\&quot;00081195\&quot;];\nlet response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([clonedPayload])\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c090b33-2fc2-4154-af26-04725e149e51&quot;,&quot;parentUUID&quot;:&quot;83d1fbb5-8eac-478d-911c-06e1bcd27d4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 409 (Conflict) when workitem is already IN PROGRESS&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to IN PROGRESS Should raise 409 (Conflict) when workitem is already IN PROGRESS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;020da2ea-d2bb-4dca-8114-94695f3653a1&quot;,&quot;parentUUID&quot;:&quot;83d1fbb5-8eac-478d-911c-06e1bcd27d4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0aa434a7-0f44-4357-8dcd-f4d610252e7a&quot;,&quot;title&quot;:&quot;update workitem that state is IN PROGRESS&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise Bad Request (400) when missing Transaction UID in request payload&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to IN PROGRESS update workitem that state is IN PROGRESS Should raise Bad Request (400) when missing Transaction UID in request payload&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify(testWorkitem)\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7fdfd72-54eb-41c0-a78a-5981db928af0&quot;,&quot;parentUUID&quot;:&quot;0aa434a7-0f44-4357-8dcd-f4d610252e7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise Bad Request (400) when Transaction UID not consistent&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to IN PROGRESS update workitem that state is IN PROGRESS Should raise Bad Request (400) when Transaction UID not consistent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let aTestWorkitem = structuredClone(testWorkitem[0]);\naTestWorkitem[\&quot;00081195\&quot;][\&quot;Value\&quot;] = [\&quot;1.2.3.4\&quot;];\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([aTestWorkitem])\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02f606cd-21e5-4875-932e-6b9571983d4c&quot;,&quot;parentUUID&quot;:&quot;0aa434a7-0f44-4357-8dcd-f4d610252e7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7fdfd72-54eb-41c0-a78a-5981db928af0&quot;,&quot;02f606cd-21e5-4875-932e-6b9571983d4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;dce7311e-49a8-47c6-87ef-c4e45719d085&quot;,&quot;0c090b33-2fc2-4154-af26-04725e149e51&quot;,&quot;020da2ea-d2bb-4dca-8114-94695f3653a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;title&quot;:&quot;change workitem state to COMPLETED&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise Bad Request (400) when changing state to COMPLETED that workitem not meet to final state&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should raise Bad Request (400) when changing state to COMPLETED that workitem not meet to final state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCompletedRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3853001e-e21b-47d5-944a-a7901b90b162&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise Bad Request (400) when Transaction UID not consistent&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should raise Bad Request (400) when Transaction UID not consistent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let requestPayload = structuredClone(changeUpsStateRequestPayload);\nrequestPayload[\&quot;00081195\&quot;][\&quot;Value\&quot;][0] = \&quot;1.2.3.4\&quot;;\nrequestPayload[\&quot;00741000\&quot;][\&quot;Value\&quot;][0] = \&quot;COMPLETED\&quot;;\nlet response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([requestPayload])\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;392886ca-4f1e-417d-a75b-301132a59f1a&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update workitem with &#x27;Unified Procedure Step Performed Procedure Sequence&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should update workitem with &#x27;Unified Procedure Step Performed Procedure Sequence&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let upsPerformedProcedureSequence = {\n    \&quot;00741216\&quot;: {\n        \&quot;vr\&quot;: \&quot;SQ\&quot;,\n        \&quot;Value\&quot;: [\n            {\n                \&quot;00404050\&quot;: {\n                    \&quot;vr\&quot;: \&quot;DT\&quot;,\n                    \&quot;Value\&quot;: [\n                        \&quot;20230523051211.171171+0800\&quot;\n                    ]\n                },\n                \&quot;00404051\&quot;: {\n                    \&quot;vr\&quot;: \&quot;DT\&quot;,\n                    \&quot;Value\&quot;: [\n                        \&quot;20230523053011.171171+0800\&quot;\n                    ]\n                },\n                \&quot;00404028\&quot;: {\n                    \&quot;vr\&quot;: \&quot;SQ\&quot;,\n                    \&quot;Value\&quot;: [\n                        {\n                            \&quot;00080100\&quot;: {\n                                \&quot;vr\&quot;: \&quot;SH\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;AnyStation\&quot;\n                                ]\n                            },\n                            \&quot;00080102\&quot;: {\n                                \&quot;vr\&quot;: \&quot;SH\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;RadReadingGroup\&quot;\n                                ]\n                            },\n                            \&quot;00080104\&quot;: {\n                                \&quot;vr\&quot;: \&quot;LO\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;performerAE\&quot;\n                                ]\n                            }\n                        }\n                    ]\n                },\n                \&quot;00404019\&quot;: {\n                    \&quot;vr\&quot;: \&quot;SQ\&quot;,\n                    \&quot;Value\&quot;: [\n                        {\n                            \&quot;00080100\&quot;: {\n                                \&quot;vr\&quot;: \&quot;SH\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;AnyMethod\&quot;\n                                ]\n                            },\n                            \&quot;00080102\&quot;: {\n                                \&quot;vr\&quot;: \&quot;SH\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;99RACCOON\&quot;\n                                ]\n                            },\n                            \&quot;00080104\&quot;: {\n                                \&quot;vr\&quot;: \&quot;LO\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;Local Any Method\&quot;\n                                ]\n                            }\n                        }\n                    ]\n                }\n            }\n        ]\n    }\n};\nlet clonedPayload = structuredClone(testWorkitem[0]);\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([\n        {\n            ...clonedPayload,\n            ...{ \&quot;00081195\&quot;: changeUpsStateRequestPayload[\&quot;00081195\&quot;] },\n            ...upsPerformedProcedureSequence\n        }\n    ])\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dc877d9-2d19-42c4-a06f-8cd115655c9f&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should change workitem state to COMPLETED successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should change workitem state to COMPLETED successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCompletedRequestPayload])\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a80ff99-0257-48af-a06a-aaba052b3c0b&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise Bad Request (400) when updating workitem in COMPLETED state&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should raise Bad Request (400) when updating workitem in COMPLETED state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedPayload = structuredClone(testWorkitem[0]);\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([{\n        ...clonedPayload,\n        ...{ \&quot;00081195\&quot;: changeUpsStateRequestPayload[\&quot;00081195\&quot;] }\n    }])\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc672428-3689-4f75-b144-b22bdd82ddbf&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 409 (Conflict) when changing state COMPLETED to CANCELED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should raise 409 (Conflict) when changing state COMPLETED to CANCELED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCanceledRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da1c739f-9d13-451c-aa38-615618cd30e3&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 409 (Conflict) when changing state COMPLETED to IN PROGRESS&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should raise 409 (Conflict) when changing state COMPLETED to IN PROGRESS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1dda4d8-c0a1-4ee2-a1b6-d3e5a094d994&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should have &#x27;warning&#x27; in headers when state already be COMPLETED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to COMPLETED Should have &#x27;warning&#x27; in headers when state already be COMPLETED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCompletedRequestPayload])\n});\nconsole.log(response.headers);\nexpect(response.headers).have.property(\&quot;warning\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3cb6ded-d36b-4fde-b16a-7d473a1abea2&quot;,&quot;parentUUID&quot;:&quot;23ec6e18-a325-4d7b-8f9f-23f46483805b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3853001e-e21b-47d5-944a-a7901b90b162&quot;,&quot;392886ca-4f1e-417d-a75b-301132a59f1a&quot;,&quot;8dc877d9-2d19-42c4-a06f-8cd115655c9f&quot;,&quot;2a80ff99-0257-48af-a06a-aaba052b3c0b&quot;,&quot;bc672428-3689-4f75-b144-b22bdd82ddbf&quot;,&quot;da1c739f-9d13-451c-aa38-615618cd30e3&quot;,&quot;a1dda4d8-c0a1-4ee2-a1b6-d3e5a094d994&quot;,&quot;e3cb6ded-d36b-4fde-b16a-7d473a1abea2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;title&quot;:&quot;change workitem state to CANCELED&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\changeWorkitemState.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;change workitem state to CANCELED\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED \&quot;before all\&quot; hook in \&quot;change workitem state to CANCELED\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    payload: testWorkitem\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43749f7a-b008-49fb-9f9c-232cfdaadcd7&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise 409 (Conflict) when changing state SCHEDULED to CANCELED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should raise 409 (Conflict) when changing state SCHEDULED to CANCELED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCanceledRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;240868ae-a408-4cca-bf41-c77d9abfafe4&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should change state to IN PROGRESS&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should change state to IN PROGRESS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let changeStateToInProgressResponse = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateRequestPayload])\n});\nexpect(changeStateToInProgressResponse.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f98b6fc-9dff-4cd8-a989-068583b307cc&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise Bad Request (400) when Transaction UID not consistent&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should raise Bad Request (400) when Transaction UID not consistent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let requestPayload = structuredClone(changeUpsStateRequestPayload);\nrequestPayload[\&quot;00081195\&quot;][\&quot;Value\&quot;][0] = \&quot;1.2.3.4\&quot;;\nrequestPayload[\&quot;00741000\&quot;][\&quot;Value\&quot;][0] = \&quot;CANCELED\&quot;;\nlet response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([requestPayload])\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72984351-1368-4fcc-8499-248f6c235954&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should change workitem state to CANCELED successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should change workitem state to CANCELED successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCanceledRequestPayload])\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a20edf49-cc78-42b1-850f-c343da864066&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should have &#x27;warning&#x27; in headers when state already be CANCELED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should have &#x27;warning&#x27; in headers when state already be CANCELED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCanceledRequestPayload])\n});\nconsole.log(response.headers);\nexpect(response.headers).have.property(\&quot;warning\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8ec44d7-501d-4d81-b29a-66ed3dddad5a&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 409 (Conflict) when changing state CANCELED to IN PROGRESS&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should raise 409 (Conflict) when changing state CANCELED to IN PROGRESS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50fb707e-7fdf-44d0-b3f7-35d52348a95f&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 409 (Conflict) when changing state CANCELED to COMPLETED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state change workitem state to CANCELED Should raise 409 (Conflict) when changing state CANCELED to COMPLETED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateToCompletedRequestPayload])\n});\nexpect(response.statusCode).to.equal(409);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8eab8dc-5c83-49b6-8155-5c9cd9f978d3&quot;,&quot;parentUUID&quot;:&quot;91e98cbb-99f7-4ab3-9630-ef4445362eb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;240868ae-a408-4cca-bf41-c77d9abfafe4&quot;,&quot;3f98b6fc-9dff-4cd8-a989-068583b307cc&quot;,&quot;72984351-1368-4fcc-8499-248f6c235954&quot;,&quot;a20edf49-cc78-42b1-850f-c343da864066&quot;,&quot;e8ec44d7-501d-4d81-b29a-66ed3dddad5a&quot;,&quot;50fb707e-7fdf-44d0-b3f7-35d52348a95f&quot;,&quot;f8eab8dc-5c83-49b6-8155-5c9cd9f978d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;b427a7bb-0c28-4344-b3e6-55762d1f70c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;title&quot;:&quot;UPS-RS create workitem&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\createWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\createWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS create workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem \&quot;before all\&quot; hook in \&quot;UPS-RS create workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fd07d20-9432-4297-a6cf-e6eace8626ca&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;UPS-RS create workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem \&quot;after all\&quot; hook in \&quot;UPS-RS create workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8c27be3-ccce-487e-9606-33a09f5ca5a6&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create workitem and have required attributes&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem Should create workitem and have required attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify(testWorkitem)\n});\nexpect(response.statusCode).to.equal(201);\nexpect(response.headers).have.property(\&quot;content-location\&quot;).to.be.a(\&quot;string\&quot;);\nlet fetchWorkitemResponse = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: response.headers[\&quot;content-location\&quot;]\n});\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nlet data = await fetchWorkitemResponse.json();\nlet workitem = data[0];\n// The origin server shall create a new Workitem in the SCHEDULED state\nexpect(workitem).have.property(\&quot;00741000\&quot;).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.equal(\&quot;SCHEDULED\&quot;);\n// #region Patient level\nexpect(workitem).to.be.a(\&quot;object\&quot;);\nexpect(workitem).have.property(\&quot;00100010\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00100010\&quot;]);\nexpect(workitem).have.property(\&quot;00100020\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00100020\&quot;]);\nexpect(workitem).have.property(\&quot;00100021\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00100021\&quot;]);\nexpect(workitem).have.property(\&quot;00100030\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00100030\&quot;]);\nexpect(workitem).have.property(\&quot;00100040\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00100040\&quot;]);\nexpect(workitem).have.property(\&quot;00104000\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00104000\&quot;]);\n// #endregion\n// #region UPS level\nexpect(workitem).have.property(\&quot;00080018\&quot;);\nexpect(workitem).have.property(\&quot;00380010\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00380010\&quot;]);\nexpect(workitem).have.property(\&quot;00380014\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00380014\&quot;]);\nexpect(workitem).have.property(\&quot;00404005\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404005\&quot;]);\nexpect(workitem).have.property(\&quot;00404018\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404018\&quot;]);\nexpect(workitem).have.property(\&quot;00404025\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404025\&quot;]);\nexpect(workitem).have.property(\&quot;00404026\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404026\&quot;]);\nexpect(workitem).have.property(\&quot;00404027\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404027\&quot;]);\nexpect(workitem).have.property(\&quot;00404041\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404041\&quot;]);\nexpect(workitem).have.property(\&quot;0040A370\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;0040A370\&quot;]);\nexpect(workitem).have.property(\&quot;00741200\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00741200\&quot;]);\nexpect(workitem).have.property(\&quot;00741202\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00741202\&quot;]);\nexpect(workitem).have.property(\&quot;00741204\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00741204\&quot;]);\nexpect(workitem).have.property(\&quot;0040E020\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;0040E020\&quot;]);\nexpect(workitem).have.property(\&quot;00404034\&quot;).to.be.deep.equal(testWorkitem[0][\&quot;00404034\&quot;]);\n// #endregion&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb611a82-07d0-442b-924f-5f2f186eb3eb&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should create workitem with specified instance UID&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem Should create workitem with specified instance UID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify(testWorkitem)\n});\nexpect(response.statusCode).to.equal(201);\nlet fetchWorkitemResponse = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: response.headers[\&quot;content-location\&quot;]\n});\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nlet data = await fetchWorkitemResponse.json();\nlet workitem = data[0];\nexpect(workitem).to.be.a(\&quot;object\&quot;);\nexpect(workitem).have.property(\&quot;00080018\&quot;).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.equal(workitemUID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cafcebe-f087-4116-a38e-1f682702226d&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should supply a work list when payload missing one&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem Should supply a work list when payload missing one&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedTestWorkitem = structuredClone(testWorkitem[0]);\ndelete clonedTestWorkitem[\&quot;00741202\&quot;];\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/workitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedTestWorkitem])\n});\nexpect(response.statusCode).to.equal(201);\nlet dataLocation = response.headers[\&quot;content-location\&quot;];\nlet fetchWorkitemResponse = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: dataLocation\n});\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nlet data = await fetchWorkitemResponse.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);\nexpect(data[0]).have.property(\&quot;00741202\&quot;).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be3d73ab-a019-440d-a2c4-7dcea2d1e7a8&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when state is not SCHEDULED&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem Should raise 400 (Bad Request) when state is not SCHEDULED&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let clonedTestWorkitem = structuredClone(testWorkitem[0]);\nclonedTestWorkitem[\&quot;00741000\&quot;][\&quot;Value\&quot;][0] = \&quot;IN PROGRESS\&quot;;\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedTestWorkitem])\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e68b9c1-f868-4630-863d-1b9968e5f44c&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when create workitem that already exists&quot;,&quot;fullTitle&quot;:&quot;UPS-RS create workitem Should raise 400 (Bad Request) when create workitem that already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify(testWorkitem)\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1aff238-efbb-40fe-8917-b1787f8a9e36&quot;,&quot;parentUUID&quot;:&quot;e281cf07-5a2c-4178-bb42-6a4464939664&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb611a82-07d0-442b-924f-5f2f186eb3eb&quot;,&quot;6cafcebe-f087-4116-a38e-1f682702226d&quot;,&quot;be3d73ab-a019-440d-a2c4-7dcea2d1e7a8&quot;,&quot;3e68b9c1-f868-4630-863d-1b9968e5f44c&quot;,&quot;a1aff238-efbb-40fe-8917-b1787f8a9e36&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2f6ec5fd-7358-4327-92e9-5ed557f56974&quot;,&quot;title&quot;:&quot;UPS-RS retrieve workitem&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\retrieveWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\retrieveWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS retrieve workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS retrieve workitem \&quot;before all\&quot; hook in \&quot;UPS-RS retrieve workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet createWorkitemResponse = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/workitems\&quot;,\n    payload: testWorkitem\n});\ncreatedWorkitemLocation = createWorkitemResponse.headers[\&quot;content-location\&quot;];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75d0e015-0f8e-430e-8924-719ac6e63760&quot;,&quot;parentUUID&quot;:&quot;2f6ec5fd-7358-4327-92e9-5ed557f56974&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS retrieve workitem Should retrieve workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n            method: \&quot;GET\&quot;,\n            url: createdWorkitemLocation\n        });\n        expect(response.statusCode).to.equal(200);\n        let data = await response.json();\n        expect(data).to.be.an(\&quot;array\&quot;);\n        expect(data[0]).to.be.an(\&quot;object\&quot;);\n        expect(data[0]).have.property(\&quot;00741000\&quot;).have.property(\&quot;Value\&quot;).have.property(\&quot;0\&quot;).to.be.equal(\&quot;SCHEDULED\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20bd4fa8-a661-4dfe-a4ff-c214724918a5&quot;,&quot;parentUUID&quot;:&quot;2f6ec5fd-7358-4327-92e9-5ed557f56974&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when workitem not found&quot;,&quot;fullTitle&quot;:&quot;UPS-RS retrieve workitem Should raise 404 (Not Found) when workitem not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n            method: \&quot;GET\&quot;,\n            url: \&quot;/dicom-web/workitems/foobar\&quot;\n        });\n        expect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a72e8982-e230-4d07-8ef8-01040161eb88&quot;,&quot;parentUUID&quot;:&quot;2f6ec5fd-7358-4327-92e9-5ed557f56974&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20bd4fa8-a661-4dfe-a4ff-c214724918a5&quot;,&quot;a72e8982-e230-4d07-8ef8-01040161eb88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;8e83aeef-ed17-48dc-91fe-22de99c2f5fc&quot;,&quot;title&quot;:&quot;UPS-RS search workitems&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS search workitems\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems \&quot;before all\&quot; hook in \&quot;UPS-RS search workitems\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    payload: testWorkitem\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61a44f1d-b276-451e-b60a-ffad67903680&quot;,&quot;parentUUID&quot;:&quot;8e83aeef-ed17-48dc-91fe-22de99c2f5fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems Should query workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems`\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8eb48546-35f1-4b18-8e4a-09d01cf45d31&quot;,&quot;parentUUID&quot;:&quot;8e83aeef-ed17-48dc-91fe-22de99c2f5fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;de934070-865a-4a08-93cd-740b2518d44a&quot;,&quot;title&quot;:&quot;query with param &#x27;SOPInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;SOPInstanceUID=1.2.826.0.1.3680043.8.498.10446888627027530123168162507860718519&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;SOPInstanceUID&#x27; Should query workitem with param &#x27;SOPInstanceUID=1.2.826.0.1.3680043.8.498.10446888627027530123168162507860718519&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57b58001-fa15-4403-8406-bbc3e500826f&quot;,&quot;parentUUID&quot;:&quot;de934070-865a-4a08-93cd-740b2518d44a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;SOPInstanceUID=1.2.3.4&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;SOPInstanceUID&#x27; Should query workitem with param &#x27;SOPInstanceUID=1.2.3.4&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a42aa97-18e8-43f5-b053-5bb3e46b43bc&quot;,&quot;parentUUID&quot;:&quot;de934070-865a-4a08-93cd-740b2518d44a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;57b58001-fa15-4403-8406-bbc3e500826f&quot;,&quot;2a42aa97-18e8-43f5-b053-5bb3e46b43bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;b830c8b0-84e9-4242-9762-5cb54fd532e3&quot;,&quot;title&quot;:&quot;query with param &#x27;ScheduledProcedureStepPriority&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepPriority=MEDIUM&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepPriority&#x27; Should query workitem with param &#x27;ScheduledProcedureStepPriority=MEDIUM&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91201bcf-4920-4d51-a075-c80ff611d17a&quot;,&quot;parentUUID&quot;:&quot;b830c8b0-84e9-4242-9762-5cb54fd532e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepPriority=LOW&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepPriority&#x27; Should query workitem with param &#x27;ScheduledProcedureStepPriority=LOW&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d96db248-0f0a-47f2-ab1b-82420718acc5&quot;,&quot;parentUUID&quot;:&quot;b830c8b0-84e9-4242-9762-5cb54fd532e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91201bcf-4920-4d51-a075-c80ff611d17a&quot;,&quot;d96db248-0f0a-47f2-ab1b-82420718acc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;13784cca-4e1d-458d-b5ee-2e5871ea89e0&quot;,&quot;title&quot;:&quot;query with param &#x27;ScheduledProcedureStepModificationDateTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepModificationDateTime=20211202115531-&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepModificationDateTime&#x27; Should query workitem with param &#x27;ScheduledProcedureStepModificationDateTime=20211202115531-&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e0e74a6-6ce3-4b80-ad41-34247c8756f5&quot;,&quot;parentUUID&quot;:&quot;13784cca-4e1d-458d-b5ee-2e5871ea89e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepModificationDateTime=20211202115532&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepModificationDateTime&#x27; Should query workitem with param &#x27;ScheduledProcedureStepModificationDateTime=20211202115532&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;496fd14f-533e-4e2a-bdb1-dbcaa7cdf1b2&quot;,&quot;parentUUID&quot;:&quot;13784cca-4e1d-458d-b5ee-2e5871ea89e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e0e74a6-6ce3-4b80-ad41-34247c8756f5&quot;,&quot;496fd14f-533e-4e2a-bdb1-dbcaa7cdf1b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;50d72e6b-e557-4018-89b1-6f7d656c7a42&quot;,&quot;title&quot;:&quot;query with param &#x27;ProcedureStepLabel&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ProcedureStepLabel=Scheduled procedure step description&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ProcedureStepLabel&#x27; Should query workitem with param &#x27;ProcedureStepLabel=Scheduled procedure step description&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb3451d1-9108-452a-912a-a821cb24f5de&quot;,&quot;parentUUID&quot;:&quot;50d72e6b-e557-4018-89b1-6f7d656c7a42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ProcedureStepLabel=label&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ProcedureStepLabel&#x27; Should query workitem with param &#x27;ProcedureStepLabel=label&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6fe3f2c-e1dd-4668-825d-4fb76cc4e3e5&quot;,&quot;parentUUID&quot;:&quot;50d72e6b-e557-4018-89b1-6f7d656c7a42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb3451d1-9108-452a-912a-a821cb24f5de&quot;,&quot;d6fe3f2c-e1dd-4668-825d-4fb76cc4e3e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c80db164-9758-4cc2-aa90-0fb231db3442&quot;,&quot;title&quot;:&quot;query with param &#x27;WorklistLabel&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;WorklistLabel=WORKLIST&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;WorklistLabel&#x27; Should query workitem with param &#x27;WorklistLabel=WORKLIST&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2ac2e16-0445-4253-82c2-3c5d1bafbbf7&quot;,&quot;parentUUID&quot;:&quot;c80db164-9758-4cc2-aa90-0fb231db3442&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;WorklistLabel=label&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;WorklistLabel&#x27; Should query workitem with param &#x27;WorklistLabel=label&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;617d3d0e-f743-46cc-aa07-c3b09332b00e&quot;,&quot;parentUUID&quot;:&quot;c80db164-9758-4cc2-aa90-0fb231db3442&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b2ac2e16-0445-4253-82c2-3c5d1bafbbf7&quot;,&quot;617d3d0e-f743-46cc-aa07-c3b09332b00e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3b0b0b19-dd19-40fe-a890-c47767624157&quot;,&quot;title&quot;:&quot;query with param &#x27;ScheduledProcedureStepStartDateTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepStartDateTime=20211202115531-&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepStartDateTime&#x27; Should query workitem with param &#x27;ScheduledProcedureStepStartDateTime=20211202115531-&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6fcc236-9fb1-409d-b008-520d68c9dc2d&quot;,&quot;parentUUID&quot;:&quot;3b0b0b19-dd19-40fe-a890-c47767624157&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepStartDateTime=20211202115532&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepStartDateTime&#x27; Should query workitem with param &#x27;ScheduledProcedureStepStartDateTime=20211202115532&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a83a01fc-1c26-46c4-a7c5-ef2b87903281&quot;,&quot;parentUUID&quot;:&quot;3b0b0b19-dd19-40fe-a890-c47767624157&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6fcc236-9fb1-409d-b008-520d68c9dc2d&quot;,&quot;a83a01fc-1c26-46c4-a7c5-ef2b87903281&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c6a419c2-a956-4807-a0a7-5ec3e77437b9&quot;,&quot;title&quot;:&quot;query with param &#x27;ExpectedCompletionDateTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ExpectedCompletionDateTime=20211202115532-&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ExpectedCompletionDateTime&#x27; Should query workitem with param &#x27;ExpectedCompletionDateTime=20211202115532-&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;960d6495-92e0-4e28-bbff-8297556c5448&quot;,&quot;parentUUID&quot;:&quot;c6a419c2-a956-4807-a0a7-5ec3e77437b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ExpectedCompletionDateTime=20211202115533&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ExpectedCompletionDateTime&#x27; Should query workitem with param &#x27;ExpectedCompletionDateTime=20211202115533&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec0962a6-f566-4b1f-b2c8-310d8a2de590&quot;,&quot;parentUUID&quot;:&quot;c6a419c2-a956-4807-a0a7-5ec3e77437b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;960d6495-92e0-4e28-bbff-8297556c5448&quot;,&quot;ec0962a6-f566-4b1f-b2c8-310d8a2de590&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5f96c692-af92-4e39-9816-8bebceb8a45e&quot;,&quot;title&quot;:&quot;query with param &#x27;ScheduledProcedureStepExpirationDateTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepExpirationDateTime=20221202115532-&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepExpirationDateTime&#x27; Should query workitem with param &#x27;ScheduledProcedureStepExpirationDateTime=20221202115532-&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec189daf-6844-4173-be9f-59d51c1c8d86&quot;,&quot;parentUUID&quot;:&quot;5f96c692-af92-4e39-9816-8bebceb8a45e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledProcedureStepExpirationDateTime=20221202115532&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledProcedureStepExpirationDateTime&#x27; Should query workitem with param &#x27;ScheduledProcedureStepExpirationDateTime=20221202115532&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;670f27dc-dcca-4760-83d0-179d2db68e42&quot;,&quot;parentUUID&quot;:&quot;5f96c692-af92-4e39-9816-8bebceb8a45e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ec189daf-6844-4173-be9f-59d51c1c8d86&quot;,&quot;670f27dc-dcca-4760-83d0-179d2db68e42&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;749185e0-731e-4436-b2be-63ff66aff071&quot;,&quot;title&quot;:&quot;query with param &#x27;InputReadinessState&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;InputReadinessState=READY&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;InputReadinessState&#x27; Should query workitem with param &#x27;InputReadinessState=READY&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98263f30-05a3-46f2-8b0c-6049b28413a9&quot;,&quot;parentUUID&quot;:&quot;749185e0-731e-4436-b2be-63ff66aff071&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;InputReadinessState=UNAVAILABLE&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;InputReadinessState&#x27; Should query workitem with param &#x27;InputReadinessState=UNAVAILABLE&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;407c07e4-3849-4fc7-895a-f19f7ddf9f03&quot;,&quot;parentUUID&quot;:&quot;749185e0-731e-4436-b2be-63ff66aff071&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98263f30-05a3-46f2-8b0c-6049b28413a9&quot;,&quot;407c07e4-3849-4fc7-895a-f19f7ddf9f03&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5855254e-abda-4a11-a68d-f091e312cd5b&quot;,&quot;title&quot;:&quot;query with param &#x27;AdmissionID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;AdmissionID=11111&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;AdmissionID&#x27; Should query workitem with param &#x27;AdmissionID=11111&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;142141f0-2bf2-4e71-a4b9-cbe9fd8f0f57&quot;,&quot;parentUUID&quot;:&quot;5855254e-abda-4a11-a68d-f091e312cd5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;AdmissionID=123456&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;AdmissionID&#x27; Should query workitem with param &#x27;AdmissionID=123456&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c59d32a0-88fd-4d6c-b5eb-a559c97d73dc&quot;,&quot;parentUUID&quot;:&quot;5855254e-abda-4a11-a68d-f091e312cd5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;142141f0-2bf2-4e71-a4b9-cbe9fd8f0f57&quot;,&quot;c59d32a0-88fd-4d6c-b5eb-a559c97d73dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;title&quot;:&quot;query with param &#x27;IssuerOfAdmissionIDSequence&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=123456789&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;IssuerOfAdmissionIDSequence&#x27; Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=123456789&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe3f48ff-04c5-4e3e-8224-b4df8a86cbee&quot;,&quot;parentUUID&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=aaa&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;IssuerOfAdmissionIDSequence&#x27; Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.LocalNamespaceEntityID=aaa&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38f19e4b-a236-494a-8380-67f88f759d97&quot;,&quot;parentUUID&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=29c737e3-b739-4169-aca7-eea07a808643&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;IssuerOfAdmissionIDSequence&#x27; Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=29c737e3-b739-4169-aca7-eea07a808643&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcfe525e-2566-46d3-92f8-be71dfdb551e&quot;,&quot;parentUUID&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=bbb&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;IssuerOfAdmissionIDSequence&#x27; Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityID=bbb&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;016c5733-e4c8-421a-834c-2d9d0e4913c5&quot;,&quot;parentUUID&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=UUID&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;IssuerOfAdmissionIDSequence&#x27; Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=UUID&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60dfd69f-28b0-4363-923f-e1d3071ad50f&quot;,&quot;parentUUID&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=ISO&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;IssuerOfAdmissionIDSequence&#x27; Should query workitem with param &#x27;IssuerOfAdmissionIDSequence.UniversalEntityIDType=ISO&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc601274-2129-4d56-a1b2-b6353d7d4642&quot;,&quot;parentUUID&quot;:&quot;7a34f4dc-c913-49f3-9fb6-6c758b55eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe3f48ff-04c5-4e3e-8224-b4df8a86cbee&quot;,&quot;38f19e4b-a236-494a-8380-67f88f759d97&quot;,&quot;fcfe525e-2566-46d3-92f8-be71dfdb551e&quot;,&quot;016c5733-e4c8-421a-834c-2d9d0e4913c5&quot;,&quot;60dfd69f-28b0-4363-923f-e1d3071ad50f&quot;,&quot;fc601274-2129-4d56-a1b2-b6353d7d4642&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c661c1aa-c1d2-4a61-9656-1406628f1823&quot;,&quot;title&quot;:&quot;query with param &#x27;ScheduledHumanPerformersSequence&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerName=fkyou&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledHumanPerformersSequence&#x27; Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerName=fkyou&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;191d31f3-13fe-4fe2-940e-099c7cf2f51c&quot;,&quot;parentUUID&quot;:&quot;c661c1aa-c1d2-4a61-9656-1406628f1823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerName=aaa&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledHumanPerformersSequence&#x27; Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerName=aaa&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7953ba62-c749-4aa8-bfdf-5bf4f3805c34&quot;,&quot;parentUUID&quot;:&quot;c661c1aa-c1d2-4a61-9656-1406628f1823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerOrganization=My-Org&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledHumanPerformersSequence&#x27; Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerOrganization=My-Org&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6d0a663-dd88-4c69-bee4-719b9108adb7&quot;,&quot;parentUUID&quot;:&quot;c661c1aa-c1d2-4a61-9656-1406628f1823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerOrganization=bbb&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ScheduledHumanPerformersSequence&#x27; Should query workitem with param &#x27;ScheduledHumanPerformersSequence.HumanPerformerOrganization=bbb&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8545cb7d-ac7c-430c-9da5-7a328b620ba8&quot;,&quot;parentUUID&quot;:&quot;c661c1aa-c1d2-4a61-9656-1406628f1823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;191d31f3-13fe-4fe2-940e-099c7cf2f51c&quot;,&quot;7953ba62-c749-4aa8-bfdf-5bf4f3805c34&quot;,&quot;c6d0a663-dd88-4c69-bee4-719b9108adb7&quot;,&quot;8545cb7d-ac7c-430c-9da5-7a328b620ba8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ed064d1a-45ba-4cb7-9781-69e7ad956804&quot;,&quot;title&quot;:&quot;query with param &#x27;ProcedureStepState&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;ProcedureStepState=SCHEDULED&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ProcedureStepState&#x27; Should query workitem with param &#x27;ProcedureStepState=SCHEDULED&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b076e08-9e9c-421b-a076-5a46cfe6dd66&quot;,&quot;parentUUID&quot;:&quot;ed064d1a-45ba-4cb7-9781-69e7ad956804&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;ProcedureStepState=COMPLETED&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;ProcedureStepState&#x27; Should query workitem with param &#x27;ProcedureStepState=COMPLETED&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4119b3fc-a1b7-4894-827f-359cf9429694&quot;,&quot;parentUUID&quot;:&quot;ed064d1a-45ba-4cb7-9781-69e7ad956804&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b076e08-9e9c-421b-a076-5a46cfe6dd66&quot;,&quot;4119b3fc-a1b7-4894-827f-359cf9429694&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;850d9f70-ec1f-4fa8-9c66-500d5ed32b26&quot;,&quot;title&quot;:&quot;query with param &#x27;PatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\searchWorkitems.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should query workitem with param &#x27;PatientID=11111&#x27; and get 1 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;PatientID&#x27; Should query workitem with param &#x27;PatientID=11111&#x27; and get 1 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c04eec4-5909-4009-8574-e9620ec9897f&quot;,&quot;parentUUID&quot;:&quot;850d9f70-ec1f-4fa8-9c66-500d5ed32b26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should query workitem with param &#x27;PatientID=123456&#x27; and get 0 workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS search workitems query with param &#x27;PatientID&#x27; Should query workitem with param &#x27;PatientID=123456&#x27; and get 0 workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems?${param}=${value}`\n});\n\nif (expectedCount === 0) {\n    expect(response.statusCode).to.equal(204);\n    return;\n}\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data).have.lengthOf(expectedCount);\nexpect(data[0]).to.be.an(\&quot;object\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d714809-6666-4f16-95bb-df743425c9b1&quot;,&quot;parentUUID&quot;:&quot;850d9f70-ec1f-4fa8-9c66-500d5ed32b26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c04eec4-5909-4009-8574-e9620ec9897f&quot;,&quot;4d714809-6666-4f16-95bb-df743425c9b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;8eb48546-35f1-4b18-8e4a-09d01cf45d31&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;716e8856-9df3-493e-93c4-63aca8daa786&quot;,&quot;title&quot;:&quot;UPS-RS subscribe workitem&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS subscribe workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem \&quot;before all\&quot; hook in \&quot;UPS-RS subscribe workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nrandomPort = await getPorts();\nserver.listen({ host: localIp, port: randomPort }, () =&gt; {\n    console.log(`Listening on ${localIp}:${randomPort}`);\n});\nawait createTestWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06635840-e992-4e22-9e31-35bbf005f773&quot;,&quot;parentUUID&quot;:&quot;716e8856-9df3-493e-93c4-63aca8daa786&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;UPS-RS subscribe workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem \&quot;after all\&quot; hook in \&quot;UPS-RS subscribe workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;globalWs.close();\nserver.close();\nawait dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;283f418d-21e3-4611-bb7d-28ce560d5bb5&quot;,&quot;parentUUID&quot;:&quot;716e8856-9df3-493e-93c4-63aca8daa786&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;title&quot;:&quot;global subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should subscribe global subscription and receive 1 initial event from ws&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should subscribe global subscription and receive 1 initial event from ws&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let received = false;\n\nlet ws = new WebSocket(`ws://${localIp}:${randomPort}/ws/subscribers/RACCOON`);\nws.once(\&quot;message\&quot;, function (data) {\n    let receivedData = JSON.parse(data);\n    expect(receivedData).to.have.property(\&quot;00001002\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;);\n    ws.close();\n    done();\n    received = true;\n});\ninject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON`\n})\n    .then(({ statusCode }) =&gt; {\n        expect(statusCode).to.equal(201);\n    });\nsetTimeout(() =&gt; {\n    if (!received) done(new Error(\&quot;timeout\&quot;));\n}, 2500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cd60e2b-76a7-42a8-82eb-5f323bb31136&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should receive 1 initial event from ws when creating new workitem&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should receive 1 initial event from ws when creating new workitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let received = false;\nlet ws = new WebSocket(`ws://${localIp}:${randomPort}/ws/subscribers/RACCOON`);\nws.once(\&quot;message\&quot;, function (data) {\n    let receivedData = JSON.parse(data);\n    expect(receivedData).to.have.property(\&quot;00001002\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;);\n    ws.close();\n    done();\n    received = true;\n});\ninject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify(testWorkitem)\n});\nsetTimeout(() =&gt; {\n    if (!received) done(new Error(\&quot;timeout\&quot;));\n}, 2500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac5e274b-9f8e-49b2-9c1e-96e7bc7b6244&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update global subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should update global subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON?deletionlock=false`\n});\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3aa6ad37-efa6-4027-89b3-dd57afad0216&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update progress information sequence and receive progress info update event&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should update progress information sequence and receive progress info update event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let received = false;\nlet ws = new WebSocket(`ws://${localIp}:${randomPort}/ws/subscribers/RACCOON`);\nws.once(\&quot;message\&quot;, function (data) {\n    let receivedData = JSON.parse(data);\n    expect(receivedData).to.have.property(\&quot;00741002\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;);\n    ws.close();\n    done();\n    received = true;\n});\nlet clonedWorkitem = structuredClone(testWorkitem[0]);\nclonedWorkitem[\&quot;00741002\&quot;] = {\n    \&quot;vr\&quot;: \&quot;SQ\&quot;,\n    \&quot;Value\&quot;: [\n        {\n            \&quot;00741004\&quot;: {\n                \&quot;vr\&quot;: \&quot;DS\&quot;,\n                \&quot;Value\&quot;: [\n                    \&quot;20\&quot;\n                ]\n            }\n        }\n    ]\n};\ninject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    payload: [clonedWorkitem]\n}).then(({ statusCode }) =&gt; {\n    expect(statusCode).to.equal(200);\n}\n);\nsetTimeout(() =&gt; {\n    if (!received) done(new Error(\&quot;timeout\&quot;));\n}, 2500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bf8f7b1-4f72-4df9-b61d-b9689f18eb9f&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should change state to IN PROGRESS and receive state change report event&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should change state to IN PROGRESS and receive state change report event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let received = false;\nlet ws = new WebSocket(`ws://${localIp}:${randomPort}/ws/subscribers/RACCOON`);\nws.once(\&quot;message\&quot;, function (data) {\n    let receivedData = JSON.parse(data);\n    expect(receivedData).to.have.property(\&quot;00741000\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;).have.property(\&quot;0\&quot;).to.be.equal(\&quot;IN PROGRESS\&quot;);\n    ws.close();\n    done();\n    received = true;\n});\ninject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateRequestPayload])\n}).then(({ statusCode }) =&gt; {\n    expect(statusCode).to.be.equal(200);\n});\nsetTimeout(() =&gt; {\n    if (!received) done(new Error(\&quot;timeout\&quot;));\n}, 2500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f247cc57-e153-4540-b9ee-8403d71ddebe&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should suspend global subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should suspend global subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON/suspend`\n}).then(({ statusCode }) =&gt; {\n    expect(statusCode).to.be.equal(200);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad20b6a1-732e-4f77-9c15-3a96558b50e5&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should unsubscribe global subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem global subscription Should unsubscribe global subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON`\n});\nlet response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON`\n});\nexpect(response.statusCode).to.be.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65b1d180-5e0d-4abb-9ae1-c793648a1439&quot;,&quot;parentUUID&quot;:&quot;5157f4ec-ea48-4ca4-8cad-9504b824bbbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2cd60e2b-76a7-42a8-82eb-5f323bb31136&quot;,&quot;ac5e274b-9f8e-49b2-9c1e-96e7bc7b6244&quot;,&quot;3aa6ad37-efa6-4027-89b3-dd57afad0216&quot;,&quot;6bf8f7b1-4f72-4df9-b61d-b9689f18eb9f&quot;,&quot;f247cc57-e153-4540-b9ee-8403d71ddebe&quot;,&quot;ad20b6a1-732e-4f77-9c15-3a96558b50e5&quot;,&quot;65b1d180-5e0d-4abb-9ae1-c793648a1439&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:100,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a711e13b-19b5-4f20-af01-ec5ac721d579&quot;,&quot;title&quot;:&quot;filtered global subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;filtered global subscription\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem filtered global subscription \&quot;before all\&quot; hook in \&quot;filtered global subscription\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait createTestWorkitem();\nlet clonedTestWorkitem = structuredClone(testWorkitem[0]);\nclonedTestWorkitem[\&quot;00380014\&quot;][\&quot;Value\&quot;][0][\&quot;00400031\&quot;][\&quot;Value\&quot;][0] = \&quot;987654321\&quot;;\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([clonedTestWorkitem])\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8a5ee25-df16-4749-ba74-275cc4edc3a8&quot;,&quot;parentUUID&quot;:&quot;a711e13b-19b5-4f20-af01-ec5ac721d579&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should subscribe filtered global subscription and receive 1 initial event from ws&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem filtered global subscription Should subscribe filtered global subscription and receive 1 initial event from ws&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let received = false;\nlet ws = new WebSocket(`ws://${localIp}:${randomPort}/ws/subscribers/RACCOON`);\nws.once(\&quot;message\&quot;, function (data) {\n    let receivedData = JSON.parse(data);\n    expect(receivedData).to.have.property(\&quot;00001002\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;);\n    expect(receivedData).to.have.property(\&quot;00001000\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;).have.property(\&quot;0\&quot;).to.be.equal(workitemUID);\n    ws.close();\n    done();\n    received = true;\n});\ninject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5.1/subscribers/RACCOON?00380014.00400031=123456789`\n})\n    .then(({ statusCode }) =&gt; {\n        expect(statusCode).to.equal(201);\n    });\nsetTimeout(() =&gt; {\n    if (!received) done(new Error(\&quot;timeout\&quot;));\n}, 2500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46ad86cd-3ca4-4863-88f6-d5e1d652490b&quot;,&quot;parentUUID&quot;:&quot;a711e13b-19b5-4f20-af01-ec5ac721d579&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46ad86cd-3ca4-4863-88f6-d5e1d652490b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6ee13e2d-9e1c-4aba-96c5-798a136f28c3&quot;,&quot;title&quot;:&quot;workitem subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\subscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;workitem subscription\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem workitem subscription \&quot;before all\&quot; hook in \&quot;workitem subscription\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait createTestWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed89e7d8-8f12-403c-b500-9bc3f96ca04b&quot;,&quot;parentUUID&quot;:&quot;6ee13e2d-9e1c-4aba-96c5-798a136f28c3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should subscribe workitem subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem workitem subscription Should subscribe workitem subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/subscribers/RACCOON`\n});\nexpect(response.statusCode).to.be.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5659588-55ce-4551-ae19-99eeb016d3a6&quot;,&quot;parentUUID&quot;:&quot;6ee13e2d-9e1c-4aba-96c5-798a136f28c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should change state to IN PROGRESS and receive state change report event&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem workitem subscription Should change state to IN PROGRESS and receive state change report event&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let received = false;\nlet ws = new WebSocket(`ws://${localIp}:${randomPort}/ws/subscribers/RACCOON`);\nws.once(\&quot;message\&quot;, function (data) {\n    let receivedData = JSON.parse(data);\n    expect(receivedData).to.have.property(\&quot;00741000\&quot;).have.property(\&quot;Value\&quot;).is.an(\&quot;array\&quot;).have.property(\&quot;0\&quot;).to.be.equal(\&quot;IN PROGRESS\&quot;);\n    ws.close();\n    done();\n    received = true;\n});\ninject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([changeUpsStateRequestPayload])\n}).then(({ statusCode }) =&gt; {\n    expect(statusCode).to.be.equal(200);\n});\nsetTimeout(() =&gt; {\n    if (!received) done(new Error(\&quot;timeout\&quot;));\n}, 2500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf84e633-8ae5-45fa-b8f2-c4426cab82c4&quot;,&quot;parentUUID&quot;:&quot;6ee13e2d-9e1c-4aba-96c5-798a136f28c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5659588-55ce-4551-ae19-99eeb016d3a6&quot;,&quot;cf84e633-8ae5-45fa-b8f2-c4426cab82c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;545767a6-e76c-4f4f-bbac-762a637c6d70&quot;,&quot;title&quot;:&quot;UPS-RS unsubscribe workitem&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS unsubscribe workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem \&quot;before all\&quot; hook in \&quot;UPS-RS unsubscribe workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nrandomPort = await getPorts();\nserver.listen({ host: localIp, port: randomPort }, () =&gt; {\n    console.log(`Listening on ${randomPort}`);\n});\nawait createTestWorkitem();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6339540-1503-401f-84a6-0176d67301c4&quot;,&quot;parentUUID&quot;:&quot;545767a6-e76c-4f4f-bbac-762a637c6d70&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;UPS-RS unsubscribe workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem \&quot;after all\&quot; hook in \&quot;UPS-RS unsubscribe workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;server.close();\nglobalWs.close();\nawait dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5b5a93c-6b9a-4890-aa19-af61ca034ae0&quot;,&quot;parentUUID&quot;:&quot;545767a6-e76c-4f4f-bbac-762a637c6d70&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7d2dd9d9-da98-45a5-9caa-19c654e5acae&quot;,&quot;title&quot;:&quot;unsubscribe global subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;unsubscribe global subscription\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe global subscription \&quot;before all\&quot; hook in \&quot;unsubscribe global subscription\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON`,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cd0b767-08b1-4336-80a9-38e2914a5b6f&quot;,&quot;parentUUID&quot;:&quot;7d2dd9d9-da98-45a5-9caa-19c654e5acae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should unsubscribe global subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe global subscription Should unsubscribe global subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/RACCOON`, \n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61cb23a2-5673-4321-9f2a-852124706efa&quot;,&quot;parentUUID&quot;:&quot;7d2dd9d9-da98-45a5-9caa-19c654e5acae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when global subscription not exist&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe global subscription Should raise 404 when global subscription not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/FOOBAR`, \n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ca1c61a-3a6d-46e6-8fcb-cf3f8b80e6a9&quot;,&quot;parentUUID&quot;:&quot;7d2dd9d9-da98-45a5-9caa-19c654e5acae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61cb23a2-5673-4321-9f2a-852124706efa&quot;,&quot;5ca1c61a-3a6d-46e6-8fcb-cf3f8b80e6a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f84751c4-ab94-4ad9-9220-eb363f6d9220&quot;,&quot;title&quot;:&quot;unsubscribe filtered global subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;unsubscribe filtered global subscription\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe filtered global subscription \&quot;before all\&quot; hook in \&quot;unsubscribe filtered global subscription\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5.1/subscribers/RACCOON?00380014.00400031=123456789`,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17632748-b570-4564-bf95-0c375feeea75&quot;,&quot;parentUUID&quot;:&quot;f84751c4-ab94-4ad9-9220-eb363f6d9220&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should unsubscribe filtered global subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe filtered global subscription Should unsubscribe filtered global subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5.1/subscribers/RACCOON`, \n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e412c519-654d-4f02-83d8-8aa419fe0b79&quot;,&quot;parentUUID&quot;:&quot;f84751c4-ab94-4ad9-9220-eb363f6d9220&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e412c519-654d-4f02-83d8-8aa419fe0b79&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ff540976-0705-45bc-91d4-bdd7b3fdc146&quot;,&quot;title&quot;:&quot;unsubscribe workitem subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\unsubscribeWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;unsubscribe workitem subscription\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe workitem subscription \&quot;before all\&quot; hook in \&quot;unsubscribe workitem subscription\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/subscribers/RACCOON`,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a322fa08-8ca0-4246-9598-9a4ea1d2729e&quot;,&quot;parentUUID&quot;:&quot;ff540976-0705-45bc-91d4-bdd7b3fdc146&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should unsubscribe workitem subscription&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe workitem subscription Should unsubscribe workitem subscription&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/subscribers/RACCOON`, \n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;580bc883-b790-48a4-a4fe-2f7d138352f5&quot;,&quot;parentUUID&quot;:&quot;ff540976-0705-45bc-91d4-bdd7b3fdc146&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when global subscription not exist&quot;,&quot;fullTitle&quot;:&quot;UPS-RS unsubscribe workitem unsubscribe workitem subscription Should raise 404 when global subscription not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/1.2.840.10008.5.1.4.34.5/subscribers/FOOBAR`, \n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ea76a1d-c13d-4d49-b40e-8eb3d120b3bf&quot;,&quot;parentUUID&quot;:&quot;ff540976-0705-45bc-91d4-bdd7b3fdc146&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;580bc883-b790-48a4-a4fe-2f7d138352f5&quot;,&quot;1ea76a1d-c13d-4d49-b40e-8eb3d120b3bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;69079378-ca07-447e-b09a-e43034626007&quot;,&quot;title&quot;:&quot;UPS-RS update workitem&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\updateWorkitem.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\updateWorkitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS update workitem\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS update workitem \&quot;before all\&quot; hook in \&quot;UPS-RS update workitem\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet createWorkitemResponse = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    payload: testWorkitem\n});\ncreatedWorkitemLocation = createWorkitemResponse.headers[\&quot;content-location\&quot;];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61f03eff-cce8-457e-8206-8d025c70f5b7&quot;,&quot;parentUUID&quot;:&quot;69079378-ca07-447e-b09a-e43034626007&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should update workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS update workitem Should update workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let fetchWorkitemResponse = await inject(app, {\n            method: \&quot;GET\&quot;,\n            url: createdWorkitemLocation\n        });\n        expect(fetchWorkitemResponse.statusCode).to.equal(200);\n        let data = await fetchWorkitemResponse.json();\n        let createdWorkitem = data[0];\n        let updatedWorkItem = {\n            ...createdWorkitem,\n            \&quot;00741002\&quot;: {\n                \&quot;vr\&quot;: \&quot;SQ\&quot;,\n                \&quot;Value\&quot;: [\n                    {\n                        \&quot;00741007\&quot;: {\n                            \&quot;vr\&quot;: \&quot;SQ\&quot;,\n                            \&quot;Value\&quot;: [\n                                {\n                                    \&quot;0040A040\&quot;: {\n                                        \&quot;vr\&quot;: \&quot;CS\&quot;,\n                                        \&quot;Value\&quot;: [\n                                            \&quot;TEXT\&quot;\n                                        ]\n                                    },\n                                    \&quot;0040A160\&quot;: {\n                                        \&quot;vr\&quot;: \&quot;UT\&quot;,\n                                        \&quot;Value\&quot;: [\n                                            \&quot;text value\&quot;\n                                        ]\n                                    }\n                                }\n                            ]\n                        }\n                    }\n                ]\n            }\n        };\n        let updateWorkitemResponse = await inject(app, {\n            method: \&quot;POST\&quot;,\n            url: createdWorkitemLocation,\n            headers: {\n                \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n            },\n            payload: JSON.stringify([updatedWorkItem])\n        });\n        expect(updateWorkitemResponse.statusCode).to.equal(200);\n        let fetchUpdatedWorkitemResponse = await inject(app, {\n            method: \&quot;GET\&quot;,\n            url: createdWorkitemLocation\n        });\n        let updatedWorkitemResponseData = await fetchUpdatedWorkitemResponse.json();\n        let updatedWorkitemFromResponse = updatedWorkitemResponseData[0];\n        expect(updatedWorkitemFromResponse).have.property(\&quot;00741002\&quot;).to.be.deep.equal(updatedWorkItem[\&quot;00741002\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03c76666-6eea-4cba-82ec-10030d9a1122&quot;,&quot;parentUUID&quot;:&quot;69079378-ca07-447e-b09a-e43034626007&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise Bad Request (400) when updating workitem in SCHEDULED state with Transaction UID&quot;,&quot;fullTitle&quot;:&quot;UPS-RS update workitem Should raise Bad Request (400) when updating workitem in SCHEDULED state with Transaction UID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let fetchWorkitemResponse = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: createdWorkitemLocation\n});\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nlet data = await fetchWorkitemResponse.json();\nlet createdWorkitem = data[0];\nlet updatedWorkItem = {\n    ...createdWorkitem,\n    \&quot;00081195\&quot;: {\n        \&quot;vr\&quot;: \&quot;UI\&quot;,\n        \&quot;Value\&quot;: [\n            \&quot;1.2.3.4\&quot;\n        ]\n    }\n};\nlet updateWorkitemResponse = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: createdWorkitemLocation,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify([updatedWorkItem])\n});\nexpect(updateWorkitemResponse.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e17105b-0fb0-4fc2-892c-f5a91f1c841b&quot;,&quot;parentUUID&quot;:&quot;69079378-ca07-447e-b09a-e43034626007&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03c76666-6eea-4cba-82ec-10030d9a1122&quot;,&quot;9e17105b-0fb0-4fc2-892c-f5a91f1c841b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;10e06222-e65e-4ce9-ba67-a08701f91c89&quot;,&quot;title&quot;:&quot;UPS-RS cancel workitem with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\cancelWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\cancelWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS cancel workitem with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS cancel workitem with user \&quot;before all\&quot; hook in \&quot;UPS-RS cancel workitem with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait createTestInProgressWorkitem(TEST_USERS[0]);\nawait createTestInProgressWorkitem(TEST_USERS[2]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fece72fd-df3b-47e3-91f4-2adde4f0f9e1&quot;,&quot;parentUUID&quot;:&quot;10e06222-e65e-4ce9-ba67-a08701f91c89&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should cancel workitem successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS cancel workitem with user Should cancel workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/cancelrequest`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        workItem: workitemUID\n    },\n    body: cancellationRequestPayload,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CancelWorkItemController(request, response);\nexpect(response.statusCode).to.be.equal(202);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9afa735-2187-46c2-bb0c-8b6080b67e47&quot;,&quot;parentUUID&quot;:&quot;10e06222-e65e-4ce9-ba67-a08701f91c89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b9afa735-2187-46c2-bb0c-8b6080b67e47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ed580b52-83e6-4a10-a1dd-3b605d561214&quot;,&quot;title&quot;:&quot;UPS-RS change workitem state with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\changeWorkitemStateWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\changeWorkitemStateWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS change workitem state with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state with user \&quot;before all\&quot; hook in \&quot;UPS-RS change workitem state with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        workitem: workitemUID\n    },\n    body: [structuredClone(testWorkItem[0])],\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateWorkItemController(request, response);\nexpect(response.statusCode).to.equal(201);\nexpect(response.getHeaders()).have.property(\&quot;content-location\&quot;).to.be.a(\&quot;string\&quot;);\ncreatedWorkitemLocation = response.getHeaders()[\&quot;content-location\&quot;];\nlet createWorkitemForUser2Request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        workitem: workitemUID\n    },\n    body: [structuredClone(testWorkItem[0])],\n    user: TEST_USERS[2]\n});\nlet createWorkitemForUser2Response = createResponse();\nawait CreateWorkItemController(createWorkitemForUser2Request, createWorkitemForUser2Response);\ncreatedWorkitemForUser2Location = createWorkitemForUser2Response.getHeaders()[\&quot;content-location\&quot;];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c6b814f-550f-4c57-919a-cbde733c4dd0&quot;,&quot;parentUUID&quot;:&quot;ed580b52-83e6-4a10-a1dd-3b605d561214&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should change workitem state with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state with user Should change workitem state with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;PUT\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/state`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        workItem: workitemUID\n    },\n    body: [changeUpsStateRequestPayload],\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\n\nawait ChangeWorkItemStateController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet fetchWorkitemRequest = createRequest({\n    method: \&quot;GET\&quot;,\n    url: createdWorkitemLocation,\n    user: TEST_USERS[0]\n});\nlet fetchWorkitemResponse = createResponse();\nawait GetWorkItemController(fetchWorkitemRequest, fetchWorkitemResponse);\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nexpect(fetchWorkitemResponse._getJSONData())\n.to.be.an(\&quot;array\&quot;)\n.to.have.lengthOf(1)\n.have.property(\&quot;0\&quot;)\n.have.property(\&quot;00741000\&quot;)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;).to.equal(\&quot;IN PROGRESS\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fe24cf8-105a-4ae4-8d66-7d920de79f10&quot;,&quot;parentUUID&quot;:&quot;ed580b52-83e6-4a10-a1dd-3b605d561214&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not change workitem state for user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS change workitem state with user Should not change workitem state for user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let fetchWorkitemRequest = createRequest({\n    method: \&quot;GET\&quot;,\n    url: createdWorkitemForUser2Location,\n    user: TEST_USERS[2]\n});\nlet fetchWorkitemResponse = createResponse();\nawait GetWorkItemController(fetchWorkitemRequest, fetchWorkitemResponse);\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nexpect(fetchWorkitemResponse._getJSONData())\n.to.be.an(\&quot;array\&quot;)\n.to.have.lengthOf(1)\n.have.property(\&quot;0\&quot;)\n.have.property(\&quot;00741000\&quot;)\n.have.property(\&quot;Value\&quot;)\n.have.property(\&quot;0\&quot;).to.equal(\&quot;SCHEDULED\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3aac535-5695-4919-bd26-f4a42274a8c5&quot;,&quot;parentUUID&quot;:&quot;ed580b52-83e6-4a10-a1dd-3b605d561214&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4fe24cf8-105a-4ae4-8d66-7d920de79f10&quot;,&quot;b3aac535-5695-4919-bd26-f4a42274a8c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;456fdca0-cc5f-4f8c-98ff-bfda541c4554&quot;,&quot;title&quot;:&quot;UPS retrieve workitem with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\retrieveWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\retrieveWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS retrieve workitem with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS retrieve workitem with user \&quot;before all\&quot; hook in \&quot;UPS retrieve workitem with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: structuredClone(testWorkitem),\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateWorkItemController(request, response);\nworkitemUID = response.getHeaders()[\&quot;content-location\&quot;].split(\&quot;/\&quot;).pop();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d246f91-d62b-48b8-9bc8-5bb5ea2dabe3&quot;,&quot;parentUUID&quot;:&quot;456fdca0-cc5f-4f8c-98ff-bfda541c4554&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve workitem with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS retrieve workitem with user Should retrieve workitem with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    params: {\n        workItem: workitemUID\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetWorkItemController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb8fbc90-956e-4491-9942-159f0e712f93&quot;,&quot;parentUUID&quot;:&quot;456fdca0-cc5f-4f8c-98ff-bfda541c4554&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve workitem with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS retrieve workitem with user Should retrieve workitem with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    params: {\n        workItem: workitemUID\n    },\n    user: TEST_USERS[1]\n});\nlet response = createResponse();\nawait GetWorkItemController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab448eb7-96e7-4465-9905-16c71a0421a7&quot;,&quot;parentUUID&quot;:&quot;456fdca0-cc5f-4f8c-98ff-bfda541c4554&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not retrieve workitem with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS retrieve workitem with user Should not retrieve workitem with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}`,\n    params: {\n        workItem: workitemUID\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait GetWorkItemController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73b4626e-5f99-4dab-abd8-4e04a60a5eb1&quot;,&quot;parentUUID&quot;:&quot;456fdca0-cc5f-4f8c-98ff-bfda541c4554&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb8fbc90-956e-4491-9942-159f0e712f93&quot;,&quot;ab448eb7-96e7-4465-9905-16c71a0421a7&quot;,&quot;73b4626e-5f99-4dab-abd8-4e04a60a5eb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f132daca-cb78-4dd3-ad7d-879620091d39&quot;,&quot;title&quot;:&quot;UPS search workitems with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\searchWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\searchWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS search workitems with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS search workitems with user \&quot;before all\&quot; hook in \&quot;UPS search workitems with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4354f692-b9c7-4047-823e-b07a53c5332c&quot;,&quot;parentUUID&quot;:&quot;f132daca-cb78-4dd3-ad7d-879620091d39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create workitem with user&quot;,&quot;fullTitle&quot;:&quot;UPS search workitems with user Should create workitem with user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: [structuredClone(testWorkitem[0])],\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateWorkItemController(request, response);\nexpect(response.statusCode).to.equal(201);\nexpect(response.getHeaders()).have.property(\&quot;content-location\&quot;).to.be.a(\&quot;string\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d46bb6c9-287b-48c8-a9a5-d2b1658c307c&quot;,&quot;parentUUID&quot;:&quot;f132daca-cb78-4dd3-ad7d-879620091d39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should search workitem with user &#x27;test&#x27; and get 1 workitem&quot;,&quot;fullTitle&quot;:&quot;UPS search workitems with user Should search workitem with user &#x27;test&#x27; and get 1 workitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems`,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetWorkItemController(request, response);\nexpect(response.statusCode).to.equal(200);\nexpect(response._getJSONData()).have.property(\&quot;length\&quot;).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38f4b55e-3820-4272-a24a-67e0a632fd02&quot;,&quot;parentUUID&quot;:&quot;f132daca-cb78-4dd3-ad7d-879620091d39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should search workitem with user &#x27;test2&#x27; and get 1 workitem&quot;,&quot;fullTitle&quot;:&quot;UPS search workitems with user Should search workitem with user &#x27;test2&#x27; and get 1 workitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems`,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetWorkItemController(request, response);\nexpect(response.statusCode).to.equal(200);\nexpect(response._getJSONData()).have.property(\&quot;length\&quot;).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3595577-1e48-4721-bac8-b347347c7914&quot;,&quot;parentUUID&quot;:&quot;f132daca-cb78-4dd3-ad7d-879620091d39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should search workitem with user &#x27;oTest&#x27; and get 0 workitem&quot;,&quot;fullTitle&quot;:&quot;UPS search workitems with user Should search workitem with user &#x27;oTest&#x27; and get 0 workitem&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/workitems`,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait GetWorkItemController(request, response);\nexpect(response.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c560e575-b9fd-4ddf-ab39-47d2ca2f9b5b&quot;,&quot;parentUUID&quot;:&quot;f132daca-cb78-4dd3-ad7d-879620091d39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d46bb6c9-287b-48c8-a9a5-d2b1658c307c&quot;,&quot;38f4b55e-3820-4272-a24a-67e0a632fd02&quot;,&quot;b3595577-1e48-4721-bac8-b347347c7914&quot;,&quot;c560e575-b9fd-4ddf-ab39-47d2ca2f9b5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;dca58bba-718b-4a1e-bbb2-756f47829e3b&quot;,&quot;title&quot;:&quot;UPS-RS subscribe workitem with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\subscribeWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\subscribeWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS subscribe workitem with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem with user \&quot;before all\&quot; hook in \&quot;UPS-RS subscribe workitem with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        workitem: workitemUID\n    },\n    body: [structuredClone(testWorkItem[0])],\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateWorkItemController(request, response);\nexpect(response.statusCode).to.equal(201);\nexpect(response.getHeaders()).have.property(\&quot;content-location\&quot;).to.be.a(\&quot;string\&quot;);\ncreatedWorkitemLocation = response.getHeaders()[\&quot;content-location\&quot;];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84d1b424-a00f-4db2-801c-71379b6d408c&quot;,&quot;parentUUID&quot;:&quot;dca58bba-718b-4a1e-bbb2-756f47829e3b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a57ddf48-ad21-4c47-ac02-db2bcd0f94d5&quot;,&quot;title&quot;:&quot;Subscribe global subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\subscribeWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\subscribeWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should subscribe global subscription with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem with user Subscribe global subscription Should subscribe global subscription with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${SUBSCRIPTION_FIXED_UIDS.GlobalUID}/subscribers/RACCOON`,\n    user: TEST_USERS[0],\n    params: {\n        workItem: SUBSCRIPTION_FIXED_UIDS.GlobalUID,\n        subscriberAeTitle: \&quot;RACCOON\&quot;\n    }\n});\nlet response = createResponse();\nawait SubscribeWorkitemController(request, response);\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2ddaa76-f8d1-459d-a59c-2b14536d38c1&quot;,&quot;parentUUID&quot;:&quot;a57ddf48-ad21-4c47-ac02-db2bcd0f94d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update global subscription for user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem with user Subscribe global subscription Should update global subscription for user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${SUBSCRIPTION_FIXED_UIDS.GlobalUID}/subscribers/RACCOON`,\n    user: TEST_USERS[0],\n    params: {\n        workItem: SUBSCRIPTION_FIXED_UIDS.GlobalUID,\n        subscriberAeTitle: \&quot;RACCOON\&quot;\n    },\n    query: {\n        deletionlock: false\n    }\n});\n\nlet response = createResponse();\nawait SubscribeWorkitemController(request, response);\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61cb2490-0bc9-4d38-8bac-606880d61117&quot;,&quot;parentUUID&quot;:&quot;a57ddf48-ad21-4c47-ac02-db2bcd0f94d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should unsubscribe global subscription for user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem with user Subscribe global subscription Should unsubscribe global subscription for user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/${SUBSCRIPTION_FIXED_UIDS.GlobalUID}/subscribers/RACCOON`,\n    user: TEST_USERS[0],\n    params: {\n        workItem: SUBSCRIPTION_FIXED_UIDS.GlobalUID,\n        subscriberAeTitle: \&quot;RACCOON\&quot;\n    }\n});\nlet response = createResponse();\nawait UnsubscribeWorkitemController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;226becb0-6bf6-4f09-913f-acd458fb7bf3&quot;,&quot;parentUUID&quot;:&quot;a57ddf48-ad21-4c47-ac02-db2bcd0f94d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when unsubscribing global subscription for user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem with user Subscribe global subscription Should raise 404 when unsubscribing global subscription for user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/workitems/${SUBSCRIPTION_FIXED_UIDS.GlobalUID}/subscribers/RACCOON`,\n    user: TEST_USERS[2],\n    params: {\n        workItem: SUBSCRIPTION_FIXED_UIDS.GlobalUID,\n        subscriberAeTitle: \&quot;RACCOON\&quot;\n    }\n});\nlet response = createResponse();\n\nawait UnsubscribeWorkitemController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ac69227-c573-4080-80ac-c047b5ad6590&quot;,&quot;parentUUID&quot;:&quot;a57ddf48-ad21-4c47-ac02-db2bcd0f94d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2ddaa76-f8d1-459d-a59c-2b14536d38c1&quot;,&quot;61cb2490-0bc9-4d38-8bac-606880d61117&quot;,&quot;226becb0-6bf6-4f09-913f-acd458fb7bf3&quot;,&quot;4ac69227-c573-4080-80ac-c047b5ad6590&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;504baa1a-8ad8-42af-9943-dd6e7c8bca81&quot;,&quot;title&quot;:&quot;workitem subscription&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\subscribeWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\subscribeWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should subscribe workitem subscription with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS subscribe workitem with user workitem subscription Should subscribe workitem subscription with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems/${workitemUID}/subscribers/RACCOON`,\n    user: TEST_USERS[0],\n    params: {\n        workItem: workitemUID,\n        subscriberAeTitle: \&quot;RACCOON\&quot;\n    }\n});\nlet response = createResponse();\nawait SubscribeWorkitemController(request, response);\nexpect(response.statusCode).to.equal(201);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d507e403-1f0c-41f2-8c41-4334d073b72e&quot;,&quot;parentUUID&quot;:&quot;504baa1a-8ad8-42af-9943-dd6e7c8bca81&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d507e403-1f0c-41f2-8c41-4334d073b72e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f9480984-0e63-4b80-aad2-de2810ee7d96&quot;,&quot;title&quot;:&quot;UPS-RS update workitem with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\UPS-RS\\withUser\\updateWorkitemWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\UPS-RS\\withUser\\updateWorkitemWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;UPS-RS update workitem with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS update workitem with user \&quot;before all\&quot; hook in \&quot;UPS-RS update workitem with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet createWorkitemRequest = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workitem=${workitemUID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    query: {\n        workitem: workitemUID\n    },\n    body: structuredClone(testWorkitem),\n    user: TEST_USERS[0]\n});\nlet createWorkitemResponse = createResponse();\nawait CreateWorkItemController(createWorkitemRequest, createWorkitemResponse);\ncreatedWorkitemLocation = createWorkitemResponse.getHeaders()[\&quot;content-location\&quot;];\nlet createWorkitemForUser2Request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/workitems?workItem=${workitemUID}`,\n    query: {\n        workitem: workitemUID\n    },\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: structuredClone(testWorkitem),\n    user: TEST_USERS[2]\n});\nlet createWorkitemForUser2Response = createResponse();\nawait CreateWorkItemController(createWorkitemForUser2Request, createWorkitemForUser2Response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d661f95-d361-420f-b7ee-21a1a71d8e16&quot;,&quot;parentUUID&quot;:&quot;f9480984-0e63-4b80-aad2-de2810ee7d96&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should update workitem with user &#x27;test&#x27; successfully&quot;,&quot;fullTitle&quot;:&quot;UPS-RS update workitem with user Should update workitem with user &#x27;test&#x27; successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let fetchWorkitemRequest = createRequest({\n    method: \&quot;GET\&quot;,\n    url: createdWorkitemLocation,\n    user: TEST_USERS[0]\n});\nlet fetchWorkitemResponse = createResponse();\nawait GetWorkItemController(fetchWorkitemRequest, fetchWorkitemResponse);\nexpect(fetchWorkitemResponse.statusCode).to.equal(200);\nlet data = fetchWorkitemResponse._getJSONData();\nlet createdWorkitem = data[0];\nlet updatedWorkitem = {\n    ...createdWorkitem,\n    \&quot;00741002\&quot;: {\n        \&quot;vr\&quot;: \&quot;SQ\&quot;,\n        \&quot;Value\&quot;: [\n            {\n                \&quot;00741007\&quot;: {\n                    \&quot;vr\&quot;: \&quot;SQ\&quot;,\n                    \&quot;Value\&quot;: [\n                        {\n                            \&quot;0040A040\&quot;: {\n                                \&quot;vr\&quot;: \&quot;CS\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;TEXT\&quot;\n                                ]\n                            },\n                            \&quot;0040A160\&quot;: {\n                                \&quot;vr\&quot;: \&quot;UT\&quot;,\n                                \&quot;Value\&quot;: [\n                                    \&quot;text value\&quot;\n                                ]\n                            }\n                        }\n                    ]\n                }\n            }\n        ]\n    }\n};\nlet updateWorkitemRequest = createRequest({\n    method: \&quot;POST\&quot;,\n    url: createdWorkitemLocation,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        workItem: workitemUID\n    },\n    body: [updatedWorkitem],\n    user: TEST_USERS[0]\n});\nlet updateWorkitemResponse = createResponse();\nawait UpdateWorkItemController(updateWorkitemRequest, updateWorkitemResponse);\nexpect(updateWorkitemResponse.statusCode).to.equal(200);\nlet fetchUpdatedWorkitemRequest = createRequest({\n    method: \&quot;GET\&quot;,\n    url: createdWorkitemLocation,\n    params: {\n        workItem: workitemUID\n    },\n    user: TEST_USERS[0]\n});\nlet fetchUpdatedWorkitemResponse = createResponse();\nawait GetWorkItemController(fetchUpdatedWorkitemRequest, fetchUpdatedWorkitemResponse);\nexpect(fetchUpdatedWorkitemResponse.statusCode).to.equal(200);\nlet updatedWorkitemFromResponse = fetchUpdatedWorkitemResponse._getJSONData();\nexpect(updatedWorkitemFromResponse)\n.have.property(\&quot;0\&quot;)\n.have.property(\&quot;00741002\&quot;)\n.to.be.deep.equal(updatedWorkitem[\&quot;00741002\&quot;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afaf95b4-82b0-4de5-a3e0-0c7f00e00869&quot;,&quot;parentUUID&quot;:&quot;f9480984-0e63-4b80-aad2-de2810ee7d96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not update workitem with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;UPS-RS update workitem with user Should not update workitem with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let fetchUpdatedWorkitemRequest = createRequest({\n    method: \&quot;GET\&quot;,\n    url: createdWorkitemLocation,\n    user: TEST_USERS[2]\n});\nlet fetchUpdatedWorkitemResponse = createResponse();\nawait GetWorkItemController(fetchUpdatedWorkitemRequest, fetchUpdatedWorkitemResponse);\nexpect(fetchUpdatedWorkitemResponse.statusCode).to.equal(200);\nlet updatedWorkitemFromResponse = fetchUpdatedWorkitemResponse._getJSONData();\nexpect(updatedWorkitemFromResponse)\n.have.property(\&quot;0\&quot;)\n.have.property(\&quot;00741002\&quot;)\n.not.have.property(\&quot;Value\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;232ce67a-72ae-4abe-9a0b-013d674e3633&quot;,&quot;parentUUID&quot;:&quot;f9480984-0e63-4b80-aad2-de2810ee7d96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afaf95b4-82b0-4de5-a3e0-0c7f00e00869&quot;,&quot;232ce67a-72ae-4abe-9a0b-013d674e3633&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9687806b-c66b-426a-8534-a7f5fa9d49c9&quot;,&quot;title&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudyBulkdata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudyBulkdata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1708,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;babe351c-326b-443c-b8ec-b702da84737c&quot;,&quot;parentUUID&quot;:&quot;9687806b-c66b-426a-8534-a7f5fa9d49c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f381c28-2a62-4fca-939b-67b9540b0dbb&quot;,&quot;parentUUID&quot;:&quot;9687806b-c66b-426a-8534-a7f5fa9d49c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study bulkdata&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; Should retrieve study bulkdata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/bulkdata`\n});\nexpect(response.statusCode).to.equal(200);\n\nlet data = response.rawPayload;\nlet buffer = multipartDecode(data);\nexpect(buffer).to.be.an(\&quot;array\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bf7b3dc-40f1-4482-9a33-604ca47beba2&quot;,&quot;parentUUID&quot;:&quot;9687806b-c66b-426a-8534-a7f5fa9d49c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3bf7b3dc-40f1-4482-9a33-604ca47beba2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;aefa271b-c163-4c6a-9fcc-836d7b742532&quot;,&quot;title&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudySeriesBulkdata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudySeriesBulkdata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2533,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc6acb43-2c19-49bf-b9cc-0606f6d15fb5&quot;,&quot;parentUUID&quot;:&quot;aefa271b-c163-4c6a-9fcc-836d7b742532&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;473a7ff2-5863-4aa1-8e9c-5bbaa326a930&quot;,&quot;parentUUID&quot;:&quot;aefa271b-c163-4c6a-9fcc-836d7b742532&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series bulkdata&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; Should retrieve study-series bulkdata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/bulkdata`\n});\nexpect(response.statusCode).to.equal(200);\n\nlet data = response.rawPayload;\nlet buffer = multipartDecode(data);\nexpect(buffer).to.be.an(\&quot;array\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1729e9cf-677a-4fcf-9ec8-513b7163de0d&quot;,&quot;parentUUID&quot;:&quot;aefa271b-c163-4c6a-9fcc-836d7b742532&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1729e9cf-677a-4fcf-9ec8-513b7163de0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;303448c8-6d5c-4fd3-a95b-4b5dc9b0f648&quot;,&quot;title&quot;:&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudySeriesInstancesBulkdata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudySeriesInstancesBulkdata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1752,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3c3b857-8c97-4772-b236-9b73ffb91a1e&quot;,&quot;parentUUID&quot;:&quot;303448c8-6d5c-4fd3-a95b-4b5dc9b0f648&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e8de0f4-12f7-495c-b5ba-6f9ba474c0e9&quot;,&quot;parentUUID&quot;:&quot;303448c8-6d5c-4fd3-a95b-4b5dc9b0f648&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances bulkdata&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; Should retrieve study-series-instances bulkdata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/bulkdata`\n});\nexpect(response.statusCode).to.equal(200);\n\nlet data = response.rawPayload;\nlet buffer = multipartDecode(data);\nexpect(buffer).to.be.an(\&quot;array\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d546f67-a547-4b24-8c95-6dbfc5b13cea&quot;,&quot;parentUUID&quot;:&quot;303448c8-6d5c-4fd3-a95b-4b5dc9b0f648&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d546f67-a547-4b24-8c95-6dbfc5b13cea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9ee8052e-b3d5-44dd-b569-da589632dd45&quot;,&quot;title&quot;:&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudySeriesInstancesSpecifiedBulkdata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\bulkdata\\retrieveStudySeriesInstancesSpecifiedBulkdata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1768,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbc87d94-fcf4-4ba2-94c3-0b54a5747a2a&quot;,&quot;parentUUID&quot;:&quot;9ee8052e-b3d5-44dd-b569-da589632dd45&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41597b44-4250-4129-ae14-cbd5a3975cc7&quot;,&quot;parentUUID&quot;:&quot;9ee8052e-b3d5-44dd-b569-da589632dd45&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances bulkdata&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances specified bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata/:binaryValuePath&#x27; Should retrieve study-series-instances bulkdata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/bulkdata/${binaryValuePath}`\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nlet buffer = multipartDecode(data);\nexpect(buffer).to.be.an(\&quot;array\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;846a1a43-9520-45ce-9093-4239526e0136&quot;,&quot;parentUUID&quot;:&quot;9ee8052e-b3d5-44dd-b569-da589632dd45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;846a1a43-9520-45ce-9093-4239526e0136&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;976588fc-90d4-49b6-b478-a30922d90447&quot;,&quot;title&quot;:&quot;retrieveInstanceMd5&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\md5\\retrieveInstanceMd5.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\md5\\retrieveInstanceMd5.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieveInstanceMd5\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieveInstanceMd5 \&quot;before all\&quot; hook in \&quot;retrieveInstanceMd5\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:67,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../../../testData/dicomFiles/1-01-mod-vo\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;747e72bf-3081-4740-8e34-26115efc8a1e&quot;,&quot;parentUUID&quot;:&quot;976588fc-90d4-49b6-b478-a30922d90447&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return md5 for instance&quot;,&quot;fullTitle&quot;:&quot;retrieveInstanceMd5 should return md5 for instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/md5`\n});\nexpect(res.statusCode).to.equal(200);\nconst { md5 } = await res.json();\nexpect(md5).to.be.a(\&quot;string\&quot;);\nexpect(md5.length).to.equal(32);\nexpect(md5).to.equal(INSTANCE_MD5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dbebe73-5fb5-4da0-a6c2-1f8978b47eaf&quot;,&quot;parentUUID&quot;:&quot;976588fc-90d4-49b6-b478-a30922d90447&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return md5 for instance when instance does not have md5 yet&quot;,&quot;fullTitle&quot;:&quot;retrieveInstanceMd5 should return md5 for instance when instance does not have md5 yet&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (process.env.TEST_DB_TYPE === \&quot;sql\&quot;) {\n    await dbInstance.model(\&quot;Instance\&quot;).update({ md5: \&quot;\&quot; }, { where: { x00080018: INSTANCE_UID } });\n} else if (process.env.TEST_DB_TYPE === \&quot;mongodb\&quot;) {\n    await dbInstance.model(\&quot;dicom\&quot;).updateOne({ instanceUID: INSTANCE_UID }, { $set: { md5: null } });\n}\nconst res = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/md5`\n});\nexpect(res.statusCode).to.equal(200);\nconst { md5 } = await res.json();\nexpect(md5).to.be.a(\&quot;string\&quot;);\nexpect(md5.length).to.equal(32);\nexpect(md5).to.equal(INSTANCE_MD5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d5abd93-ef48-4b9f-a9b7-5986cc0119f6&quot;,&quot;parentUUID&quot;:&quot;976588fc-90d4-49b6-b478-a30922d90447&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4dbebe73-5fb5-4da0-a6c2-1f8978b47eaf&quot;,&quot;4d5abd93-ef48-4b9f-a9b7-5986cc0119f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3753d021-dc85-4008-b8e1-8c2e8820c4b4&quot;,&quot;title&quot;:&quot;retrieveInstanceMd5 with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\md5\\retrieveInstanceMd5WithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\md5\\retrieveInstanceMd5WithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieveInstanceMd5 with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieveInstanceMd5 with user \&quot;before all\&quot; hook in \&quot;retrieveInstanceMd5 with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/1-01-mod-vo\&quot;);\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab6771bb-74da-494d-9e44-9622146b4172&quot;,&quot;parentUUID&quot;:&quot;3753d021-dc85-4008-b8e1-8c2e8820c4b4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return md5 for instance by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieveInstanceMd5 with user should return md5 for instance by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/md5`,\n    method: \&quot;GET\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new RetrieveMd5Controller(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nconst { md5 } = await response._getJSONData();\nexpect(md5).to.be.a(\&quot;string\&quot;);\nexpect(md5.length).to.equal(32);\nexpect(md5).to.equal(INSTANCE_MD5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;711cb6f5-4a50-4e45-b46f-05efbbdbf34d&quot;,&quot;parentUUID&quot;:&quot;3753d021-dc85-4008-b8e1-8c2e8820c4b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 by user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieveInstanceMd5 with user should return 404 by user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/md5`,\n    method: \&quot;GET\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new RetrieveMd5Controller(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;505eec61-7c52-4d2f-a541-a0cba6f6b77a&quot;,&quot;parentUUID&quot;:&quot;3753d021-dc85-4008-b8e1-8c2e8820c4b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;711cb6f5-4a50-4e45-b46f-05efbbdbf34d&quot;,&quot;505eec61-7c52-4d2f-a541-a0cba6f6b77a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3b89481c-d867-4e4b-9a04-948a52bc9e27&quot;,&quot;title&quot;:&quot;retrieve study metadata&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\metadata\\retrieveStudyMetadata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\metadata\\retrieveStudyMetadata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study metadata\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata \&quot;before all\&quot; hook in \&quot;retrieve study metadata\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1655,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6b2f4cc-21e0-488d-aa8c-6013a9126d0c&quot;,&quot;parentUUID&quot;:&quot;3b89481c-d867-4e4b-9a04-948a52bc9e27&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 14 instances&#x27; metadata&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata Should retrieve study with 14 instances&#x27; metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(14);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d33ee6cb-744e-4f20-b7bc-8eeaacbcc4ee&quot;,&quot;parentUUID&quot;:&quot;3b89481c-d867-4e4b-9a04-948a52bc9e27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata Should raise 404 when study not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}1268/metadata`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2ec4e1c-fbde-4038-b5e0-98dbb2afe873&quot;,&quot;parentUUID&quot;:&quot;3b89481c-d867-4e4b-9a04-948a52bc9e27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d33ee6cb-744e-4f20-b7bc-8eeaacbcc4ee&quot;,&quot;e2ec4e1c-fbde-4038-b5e0-98dbb2afe873&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0d293f98-d745-4438-9533-31cbbfbefd41&quot;,&quot;title&quot;:&quot;retrieve study-series metadata&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\metadata\\retrieveStudySeriesInstancesMetadata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\metadata\\retrieveStudySeriesInstancesMetadata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series metadata\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata \&quot;before all\&quot; hook in \&quot;retrieve study-series metadata\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1623,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0877ac81-1e05-415c-b503-da4bb27fe8ec&quot;,&quot;parentUUID&quot;:&quot;0d293f98-d745-4438-9533-31cbbfbefd41&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances with 1 instance&#x27;s metadata&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata Should retrieve study-series-instances with 1 instance&#x27;s metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40555afe-c8d0-40b2-8bee-7bffd213b3fe&quot;,&quot;parentUUID&quot;:&quot;0d293f98-d745-4438-9533-31cbbfbefd41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study-series not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata Should raise 404 when study-series not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}1268/metadata`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d31c087-489b-46b9-b343-4814c4a072c0&quot;,&quot;parentUUID&quot;:&quot;0d293f98-d745-4438-9533-31cbbfbefd41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40555afe-c8d0-40b2-8bee-7bffd213b3fe&quot;,&quot;8d31c087-489b-46b9-b343-4814c4a072c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0e8c88a8-aac0-48d0-87f3-91f03bdfa9f0&quot;,&quot;title&quot;:&quot;retrieve study-series metadata&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\metadata\\retrieveStudySeriesMetadata.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\metadata\\retrieveStudySeriesMetadata.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series metadata\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata \&quot;before all\&quot; hook in \&quot;retrieve study-series metadata\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2131,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;801356f7-9388-4fc9-83b7-5c04f42e7815&quot;,&quot;parentUUID&quot;:&quot;0e8c88a8-aac0-48d0-87f3-91f03bdfa9f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances&#x27; metadata&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata Should retrieve study-series with 5 instances&#x27; metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.be.an(\&quot;array\&quot;).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbe9a7de-cb33-4ef5-9601-fa836d4b101d&quot;,&quot;parentUUID&quot;:&quot;0e8c88a8-aac0-48d0-87f3-91f03bdfa9f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study-series not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata Should raise 404 when study-series not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}126888/metadata`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad4b91e8-2c71-4568-bee1-471917a6496a&quot;,&quot;parentUUID&quot;:&quot;0e8c88a8-aac0-48d0-87f3-91f03bdfa9f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bbe9a7de-cb33-4ef5-9601-fa836d4b101d&quot;,&quot;ad4b91e8-2c71-4568-bee1-471917a6496a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;title&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudy.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1710,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4329b346-7d0a-4a2c-93db-656bf0fbfd15&quot;,&quot;parentUUID&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4087c6b6-e487-451e-9509-4ea0bdca310d&quot;,&quot;parentUUID&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 15 rendered images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27; Should retrieve study with 15 rendered images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:636,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/rendered`\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1f988be-195b-4c3b-971a-6be82ff2b6d6&quot;,&quot;parentUUID&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27; Should raise 404 when study not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}1268/rendered`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76e20a58-fba1-47f1-be8e-5b2c55c3be31&quot;,&quot;parentUUID&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 206 when study only have partial images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27; Should raise 206 when study only have partial images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let studyImagePathFactory = new StudyImagePathFactory({ studyUID: studyUIDs[2]});\nlet imagePaths = await studyImagePathFactory.getImagePaths({ absolute: true });\nlet firstImagePath = imagePaths[0];\nawait unlink(firstImagePath.instancePath);\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${studyUIDs[2]}/rendered`\n});\nexpect(response.statusCode).to.equal(206);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;439e95b0-3a79-43da-819b-d06acf2a1e12&quot;,&quot;parentUUID&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 410 when study gone&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/rendered&#x27; Should raise 410 when study gone&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let studyImagePathFactory = new StudyImagePathFactory({ studyUID: STUDY_UID});\nlet imagePaths = await studyImagePathFactory.getImagePaths({ absolute: true });\nlet firstImagePath = imagePaths[0];\nawait unlink(firstImagePath.instancePath);\nlet response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/rendered`\n});\nexpect(response.statusCode).to.equal(410);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7e0db8d-1c99-4c78-b9e0-a6c94aec1d09&quot;,&quot;parentUUID&quot;:&quot;19653f15-e75a-4ba8-b8b0-74845d616773&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1f988be-195b-4c3b-971a-6be82ff2b6d6&quot;,&quot;76e20a58-fba1-47f1-be8e-5b2c55c3be31&quot;,&quot;439e95b0-3a79-43da-819b-d06acf2a1e12&quot;,&quot;f7e0db8d-1c99-4c78-b9e0-a6c94aec1d09&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:756,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d0e0e6c9-015d-4de0-af6d-b474add781f9&quot;,&quot;title&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1745,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b28442a-81a9-40b4-85c7-5fe0ce6195d9&quot;,&quot;parentUUID&quot;:&quot;d0e0e6c9-015d-4de0-af6d-b474add781f9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3106aeb8-bd7c-46b7-a7c5-64dbe709e10d&quot;,&quot;parentUUID&quot;:&quot;d0e0e6c9-015d-4de0-af6d-b474add781f9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series with 15 rendered images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; Should retrieve study-series with 15 rendered images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:607,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/rendered`\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04214d57-b525-4d76-98f1-91a56686d1b2&quot;,&quot;parentUUID&quot;:&quot;d0e0e6c9-015d-4de0-af6d-b474add781f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04214d57-b525-4d76-98f1-91a56686d1b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:607,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a795dfb7-2fb7-4271-97f2-e39306356963&quot;,&quot;title&quot;:&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeriesInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeriesInstances.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1714,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3083cdec-d4fb-4aef-b6d4-c4bc8570a24f&quot;,&quot;parentUUID&quot;:&quot;a795dfb7-2fb7-4271-97f2-e39306356963&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8e078c3-c81e-4154-a702-6346b7842fd7&quot;,&quot;parentUUID&quot;:&quot;a795dfb7-2fb7-4271-97f2-e39306356963&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances with 15 rendered images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; Should retrieve study-series-instances with 15 rendered images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:599,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/rendered`,\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d05a39bc-0bb8-4f52-8597-f3b763f9f3a2&quot;,&quot;parentUUID&quot;:&quot;a795dfb7-2fb7-4271-97f2-e39306356963&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when using invalid accept header&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; Should raise 400 (Bad Request) when using invalid accept header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/rendered`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;text/html\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faf56b8f-349e-43fb-a3b7-1f4727d14874&quot;,&quot;parentUUID&quot;:&quot;a795dfb7-2fb7-4271-97f2-e39306356963&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d05a39bc-0bb8-4f52-8597-f3b763f9f3a2&quot;,&quot;faf56b8f-349e-43fb-a3b7-1f4727d14874&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:600,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;title&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeriesInstancesFrames.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeriesInstancesFrames.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1752,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8612dc2f-1ba1-446a-940e-a0aa30c6c361&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56735de5-9aca-47ea-9575-bc2d57553e9d&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve 1 frame&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve 1 frame&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c1dfbb3-5a2f-46a8-9558-6798610f8a9c&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve 3 frames&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve 3 frames&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:167,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1,2,3/rendered`\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16c21da0-203a-470a-b7d0-a358a99cebfe&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with quality=30&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with quality=30&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:165,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0534d13-2931-4d3a-bb81-a8c31a21db97&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with iccprofile=no&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with iccprofile=no&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d50ab6c8-fe14-4bdb-856b-b94a914a2d9a&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with iccprofile=yes&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with iccprofile=yes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b48aa74-73c8-4f73-bb39-09d29217b218&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with iccprofile=srgb&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with iccprofile=srgb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1265b79-c71b-48f2-bb4f-e78dee0707be&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with iccprofile=adobergb&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with iccprofile=adobergb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:95,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebdb6bfe-3c91-4e01-b8c5-58d926bfb1dc&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with iccprofile=rommrgb&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with iccprofile=rommrgb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;380af6f4-7873-4f1c-b750-ca7f5f9357c5&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with viewport=100,100&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with viewport=100,100&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cec9d329-b8b1-46a0-85e1-cdb4c079fc4f&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with viewport=100,100,0,0,10,10&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with viewport=100,100,0,0,10,10&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f0dde67-2074-42b3-8226-27e144dc135d&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve frame with viewport=100,100,10,10,-50,-50&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve frame with viewport=100,100,10,10,-50,-50&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bbb8d43-99c6-4ace-944d-be7df25c0b1a&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise BadRequest (400) error when retrieving frame with bad quality=-1&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should raise BadRequest (400) error when retrieving frame with bad quality=-1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34063389-c9b7-472c-a2d4-06c2f8eb4687&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise BadRequest (400) error when retrieving frame with bad iccprofile=foobar&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should raise BadRequest (400) error when retrieving frame with bad iccprofile=foobar&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13b7aea7-b7d9-4972-877c-3076d00568e2&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise BadRequest (400) error when retrieving frame with bad viewport=1,1,,1&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should raise BadRequest (400) error when retrieving frame with bad viewport=1,1,,1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a6cc918-0b62-49e9-85ac-2ecad1839537&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise BadRequest (400) error when retrieving frame with bad viewport=1,1,1,&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should raise BadRequest (400) error when retrieving frame with bad viewport=1,1,1,&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered?${param}=${value}`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f93fe533-189f-4b5a-864c-d8fafc7493f1&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should throw error when retrieve frame without iccprofile and apply the icc profile&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should throw error when retrieve frame without iccprofile and apply the icc profile&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${NO_ICC_PROFILE_STUDY_UID}/series/${NO_ICC_PROFILE_SERIES_UID}/instances/${NO_ICC_PROFILE_INSTANCE_UID}/frames/1/rendered?iccprofile=yes`\n});\nexpect(response.statusCode).to.equal(500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39782dcc-9cb1-411a-8f29-7104067c5d0c&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should raise 404 when study not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}2486/frames/1/rendered`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b58cc5b-a9e9-4882-921b-8278c53a7855&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 when frame is out of range&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should raise 400 when frame is out of range&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/2486/rendered`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e661627-98ab-4445-994a-2beacbcfb6b7&quot;,&quot;parentUUID&quot;:&quot;369684da-5a67-46be-b470-6f18abd8ed34&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dbe26863-99e0-4211-abcb-53af4ca50207&quot;,&quot;title&quot;:&quot;retrieve rendered frame without pixel data&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeriesInstancesFrames.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\rendered\\retrieveRenderedStudySeriesInstancesFrames.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered frame without pixel data\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; retrieve rendered frame without pixel data \&quot;before all\&quot; hook in \&quot;retrieve rendered frame without pixel data\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await storeInstanceForTest(\n    resolve(\n        __dirname,\n        `../../../../testData/forStore/ANN/instance_6.dcm`\n    )\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d146d8b-67f6-4c1d-9280-bc2be9eaf75f&quot;,&quot;parentUUID&quot;:&quot;dbe26863-99e0-4211-abcb-53af4ca50207&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise 400 when frame have no pixel data&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instances &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; retrieve rendered frame without pixel data Should raise 400 when frame have no pixel data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${ANN_STUDY_UID}/series/${ANN_SERIES_UID}/instances/${ANN_INSTANCE_UID}/frames/1/rendered`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d5cc086-73cf-4652-be3e-1876a56bf80a&quot;,&quot;parentUUID&quot;:&quot;dbe26863-99e0-4211-abcb-53af4ca50207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d5cc086-73cf-4652-be3e-1876a56bf80a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;6c1dfbb3-5a2f-46a8-9558-6798610f8a9c&quot;,&quot;16c21da0-203a-470a-b7d0-a358a99cebfe&quot;,&quot;b0534d13-2931-4d3a-bb81-a8c31a21db97&quot;,&quot;d50ab6c8-fe14-4bdb-856b-b94a914a2d9a&quot;,&quot;5b48aa74-73c8-4f73-bb39-09d29217b218&quot;,&quot;b1265b79-c71b-48f2-bb4f-e78dee0707be&quot;,&quot;ebdb6bfe-3c91-4e01-b8c5-58d926bfb1dc&quot;,&quot;380af6f4-7873-4f1c-b750-ca7f5f9357c5&quot;,&quot;cec9d329-b8b1-46a0-85e1-cdb4c079fc4f&quot;,&quot;1f0dde67-2074-42b3-8226-27e144dc135d&quot;,&quot;2bbb8d43-99c6-4ace-944d-be7df25c0b1a&quot;,&quot;34063389-c9b7-472c-a2d4-06c2f8eb4687&quot;,&quot;13b7aea7-b7d9-4972-877c-3076d00568e2&quot;,&quot;0a6cc918-0b62-49e9-85ac-2ecad1839537&quot;,&quot;f93fe533-189f-4b5a-864c-d8fafc7493f1&quot;,&quot;39782dcc-9cb1-411a-8f29-7104067c5d0c&quot;,&quot;5b58cc5b-a9e9-4882-921b-8278c53a7855&quot;,&quot;3e661627-98ab-4445-994a-2beacbcfb6b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1105,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;817eb8b5-85be-421b-8c89-2cd25c1fad53&quot;,&quot;title&quot;:&quot;retrieve study-series-instances-frames&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\retrieveInstanceFrame.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\retrieveInstanceFrame.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances-frames\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frames \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances-frames\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1656,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c165a04-6c27-497e-a235-6241bca97dab&quot;,&quot;parentUUID&quot;:&quot;817eb8b5-85be-421b-8c89-2cd25c1fad53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve instance&#x27;s frame 1&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frames Should retrieve instance&#x27;s frame 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:469,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1`,\n    headers: {\n        accept: \&quot;*/*\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d818b3df-ccb6-4987-bab4-751a80bed3e2&quot;,&quot;parentUUID&quot;:&quot;817eb8b5-85be-421b-8c89-2cd25c1fad53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d818b3df-ccb6-4987-bab4-751a80bed3e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:469,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;title&quot;:&quot;retrieve study&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\retrieveStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\retrieveStudy.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study \&quot;before all\&quot; hook in \&quot;retrieve study\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1807,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47a1f0d6-b914-4bd6-8173-5cddeba99138&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study \&quot;after all\&quot; hook in \&quot;retrieve study\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;unlink(zipFullPath);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;656dedda-79da-4138-a887-757079fe75fd&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 14 instances&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should retrieve study with 14 instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(14);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e494e022-fa1c-44e9-ae50-74221ac196ea&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study with 14 instances with ZIP&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should retrieve study with 14 instances with ZIP&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/zip\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nawait writeFile(zipFullPath, data);\nlet fileListInZip = await SevenZip.list(zipFullPath);\nexpect(fileListInZip).to.be.an(\&quot;array\&quot;);\nexpect(fileListInZip.length).to.equal(14);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e9902a6-2c26-49b5-bc5e-f437ad65839b&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study not exist with zip route&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should raise 404 when study not exist with zip route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}1268`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/zip\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59b0f1ac-db62-4154-b2c6-6ece89c6ea62&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study with 14 instances with accept &#x27;*&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should retrieve study with 14 instances with accept &#x27;*&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;*\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(14);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a77d4dfd-d71e-4417-a28c-bbe7332cccb9&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study with 11 instances with accept &#x27;multipart/related; type=\&quot;image/jpeg&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should retrieve study with 11 instances with accept &#x27;multipart/related; type=\&quot;image/jpeg&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${JPEG_STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: `multipart/related; type=\&quot;image/jpeg\&quot;`\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f4cdd0b-144b-46ac-8c21-48794e1209e5&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study with 11 instances with accept &#x27;multipart/related; type=\&quot;image/jp2\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should retrieve study with 11 instances with accept &#x27;multipart/related; type=\&quot;image/jp2\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${JPEG_STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: `multipart/related; type=\&quot;image/jp2\&quot;`\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a10f024e-6d57-407e-9b6b-4abef8903669&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise not supported type&quot;,&quot;fullTitle&quot;:&quot;retrieve study Should raise not supported type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;not-application/dicom\\\&quot;\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(406);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f7ed1d0-c2c5-45c1-9829-f4fffb966cb0&quot;,&quot;parentUUID&quot;:&quot;f6b0529c-8e28-4168-b739-f097b8d2004d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e494e022-fa1c-44e9-ae50-74221ac196ea&quot;,&quot;1e9902a6-2c26-49b5-bc5e-f437ad65839b&quot;,&quot;59b0f1ac-db62-4154-b2c6-6ece89c6ea62&quot;,&quot;a77d4dfd-d71e-4417-a28c-bbe7332cccb9&quot;,&quot;0f4cdd0b-144b-46ac-8c21-48794e1209e5&quot;,&quot;a10f024e-6d57-407e-9b6b-4abef8903669&quot;,&quot;9f7ed1d0-c2c5-45c1-9829-f4fffb966cb0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:420,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;941344b8-6cfd-4c11-aa41-e81694d4b988&quot;,&quot;title&quot;:&quot;retrieve study-series&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\retrieveStudySeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\retrieveStudySeries.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series \&quot;before all\&quot; hook in \&quot;retrieve study-series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1677,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2766b03b-edd4-4df2-ad9b-e699f69351fd&quot;,&quot;parentUUID&quot;:&quot;941344b8-6cfd-4c11-aa41-e81694d4b988&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series \&quot;after all\&quot; hook in \&quot;retrieve study-series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;unlink(zipFullPath);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f0297ba-1e06-4ddb-b0a0-60cd46ac112a&quot;,&quot;parentUUID&quot;:&quot;941344b8-6cfd-4c11-aa41-e81694d4b988&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series Should retrieve study-series with 5 instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05d74f9d-7395-4ddf-94ec-57e3c18896b8&quot;,&quot;parentUUID&quot;:&quot;941344b8-6cfd-4c11-aa41-e81694d4b988&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances with ZIP&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series Should retrieve study-series with 5 instances with ZIP&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/zip\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nawait writeFile(zipFullPath, data);\nlet fileListInZip = await SevenZip.list(zipFullPath);\nexpect(fileListInZip).to.be.an(\&quot;array\&quot;);\nexpect(fileListInZip.length).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8e2903f-929e-44fd-9708-924dfdf56076&quot;,&quot;parentUUID&quot;:&quot;941344b8-6cfd-4c11-aa41-e81694d4b988&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05d74f9d-7395-4ddf-94ec-57e3c18896b8&quot;,&quot;d8e2903f-929e-44fd-9708-924dfdf56076&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:101,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;31f012be-6a5f-4bef-bcca-8597b4c824a1&quot;,&quot;title&quot;:&quot;retrieve study-series-instances&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\retrieveStudySeriesInstances.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\retrieveStudySeriesInstances.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1880,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f3229e4-a011-41fc-a6b0-160b89bb7912&quot;,&quot;parentUUID&quot;:&quot;31f012be-6a5f-4bef-bcca-8597b4c824a1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instances\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances \&quot;after all\&quot; hook in \&quot;retrieve study-series-instances\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;unlink(zipFullPath);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fbf199c-07ed-4dc5-a0ac-a39342f12735&quot;,&quot;parentUUID&quot;:&quot;31f012be-6a5f-4bef-bcca-8597b4c824a1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances with 1 instance&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances Should retrieve study-series-instances with 1 instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nconst instanceBuffers = multipartDecode(data);\nexpect(instanceBuffers.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;180c8ebd-0e2e-4695-850d-8684a0b1774f&quot;,&quot;parentUUID&quot;:&quot;31f012be-6a5f-4bef-bcca-8597b4c824a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study-series-instances with 1 instance with ZIP&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances Should retrieve study-series-instances with 1 instance with ZIP&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:67,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/zip\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nawait writeFile(zipFullPath, data);\nlet fileListInZip = await SevenZip.list(zipFullPath);\nexpect(fileListInZip).to.be.an(\&quot;array\&quot;);\nexpect(fileListInZip.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5f04b79-6ac0-4146-9479-bed683b5606a&quot;,&quot;parentUUID&quot;:&quot;31f012be-6a5f-4bef-bcca-8597b4c824a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;180c8ebd-0e2e-4695-850d-8684a0b1774f&quot;,&quot;b5f04b79-6ac0-4146-9479-bed683b5606a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:82,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f6351694-84cd-4548-95ce-ef3fbb6e3ad6&quot;,&quot;title&quot;:&quot;retrieve study with transfer syntax&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\retrieveStudyWithTransferSyntax.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\retrieveStudyWithTransferSyntax.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study with transfer syntax\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study with transfer syntax \&quot;before all\&quot; hook in \&quot;retrieve study with transfer syntax\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2131,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97d19470-4314-4879-8ca4-e601a2b0070a&quot;,&quot;parentUUID&quot;:&quot;f6351694-84cd-4548-95ce-ef3fbb6e3ad6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study with transfer syntax\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study with transfer syntax \&quot;after all\&quot; hook in \&quot;retrieve study with transfer syntax\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;unlink(zipFullPath);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83880b19-bdb9-4000-b57a-0016bd31ead5&quot;,&quot;parentUUID&quot;:&quot;f6351694-84cd-4548-95ce-ef3fbb6e3ad6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 1 instance with ZIP and transcode with transfer syntax&quot;,&quot;fullTitle&quot;:&quot;retrieve study with transfer syntax Should retrieve study with 1 instance with ZIP and transcode with transfer syntax&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:139,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID_FOR_TRANSFER_SYNTAX}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;application/zip; transfer-syntax=1.2.840.10008.1.2.4.50\&quot; // JPEG Baseline\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet data = response.rawPayload;\nawait writeFile(zipFullPath, data);\nlet fileListInZip = await SevenZip.list(zipFullPath);\nexpect(fileListInZip).to.be.an(\&quot;array\&quot;);\nexpect(fileListInZip.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02dcbad8-036f-4055-900f-058dc936685f&quot;,&quot;parentUUID&quot;:&quot;f6351694-84cd-4548-95ce-ef3fbb6e3ad6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02dcbad8-036f-4055-900f-058dc936685f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:139,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;8ebdbe15-379a-4cfe-ba8d-5dc11f6772fa&quot;,&quot;title&quot;:&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudySeriesInstancesFrameThumbnail.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudySeriesInstancesFrameThumbnail.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1802,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f353b046-7cec-4910-a0e3-b02d329be61e&quot;,&quot;parentUUID&quot;:&quot;8ebdbe15-379a-4cfe-ba8d-5dc11f6772fa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed613d30-b8fb-4fe2-8fea-5ac90d53cec5&quot;,&quot;parentUUID&quot;:&quot;8ebdbe15-379a-4cfe-ba8d-5dc11f6772fa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances-frame thumbnail&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27; Should retrieve study-series-instances-frame thumbnail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/thumbnail`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e535d33c-8767-49be-9eb8-99e6a5e93267&quot;,&quot;parentUUID&quot;:&quot;8ebdbe15-379a-4cfe-ba8d-5dc11f6772fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 when using bad frame number&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27; Should raise 400 when using bad frame number&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/2486/thumbnail`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb17440e-56c8-43f8-9610-673fc0ba0b89&quot;,&quot;parentUUID&quot;:&quot;8ebdbe15-379a-4cfe-ba8d-5dc11f6772fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when image not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frame thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/thumbnail&#x27; Should raise 404 when image not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}2486/frames/1/thumbnail`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5ab9f60-bca8-45b5-9466-0b871e9e0245&quot;,&quot;parentUUID&quot;:&quot;8ebdbe15-379a-4cfe-ba8d-5dc11f6772fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e535d33c-8767-49be-9eb8-99e6a5e93267&quot;,&quot;cb17440e-56c8-43f8-9610-673fc0ba0b89&quot;,&quot;a5ab9f60-bca8-45b5-9466-0b871e9e0245&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6f64b53f-1596-4b34-8b8c-17e4de4ac7dd&quot;,&quot;title&quot;:&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudySeriesInstancesThumbnail.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudySeriesInstancesThumbnail.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1808,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fc9264c-c932-4e2e-ba0c-6ac1e72c160c&quot;,&quot;parentUUID&quot;:&quot;6f64b53f-1596-4b34-8b8c-17e4de4ac7dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f35f0246-0cd3-4dee-b0f3-2877fed64451&quot;,&quot;parentUUID&quot;:&quot;6f64b53f-1596-4b34-8b8c-17e4de4ac7dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instances thumbnail&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; Should retrieve study-series-instances thumbnail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/thumbnail`,\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6d8119b-89de-4402-918e-a33d8087a432&quot;,&quot;parentUUID&quot;:&quot;6f64b53f-1596-4b34-8b8c-17e4de4ac7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study-series-instances not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; Should raise 404 when study-series-instances not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}2486/thumbnail`,\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8bd15ca-e195-4150-926e-5b8186065c37&quot;,&quot;parentUUID&quot;:&quot;6f64b53f-1596-4b34-8b8c-17e4de4ac7dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6d8119b-89de-4402-918e-a33d8087a432&quot;,&quot;f8bd15ca-e195-4150-926e-5b8186065c37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0579a85a-b513-486d-88cf-5a6396211b1c&quot;,&quot;title&quot;:&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudySeriesThumbnail.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudySeriesThumbnail.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1659,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89ba9ce7-ebc9-4fc0-8dea-31db5fbfcf65&quot;,&quot;parentUUID&quot;:&quot;0579a85a-b513-486d-88cf-5a6396211b1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;285f75d0-f506-4696-88b0-4f8a013d8e77&quot;,&quot;parentUUID&quot;:&quot;0579a85a-b513-486d-88cf-5a6396211b1c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series thumbnail&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; Should retrieve study-series thumbnail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/thumbnail`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df4520f1-037e-4d11-893b-059de3d56995&quot;,&quot;parentUUID&quot;:&quot;0579a85a-b513-486d-88cf-5a6396211b1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study-series not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; Should raise 404 when study-series not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}2486/thumbnail`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;934ccf13-d442-4443-ad4c-990ec0b19607&quot;,&quot;parentUUID&quot;:&quot;0579a85a-b513-486d-88cf-5a6396211b1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df4520f1-037e-4d11-893b-059de3d56995&quot;,&quot;934ccf13-d442-4443-ad4c-990ec0b19607&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;58c473b6-4b89-499b-a306-10612ccba600&quot;,&quot;title&quot;:&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudyThumbnail.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\thumbnail\\retrieveStudyThumbnail.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1876,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ecbeba1-a5e2-44c1-b0a8-6f9331a5735e&quot;,&quot;parentUUID&quot;:&quot;58c473b6-4b89-499b-a306-10612ccba600&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1bd29af-d70a-4b73-8d2b-9c1780ebaad6&quot;,&quot;parentUUID&quot;:&quot;58c473b6-4b89-499b-a306-10612ccba600&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study thumbnail&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; Should retrieve study thumbnail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/thumbnail`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af786b0d-0787-4643-ad50-71bbccfefbfd&quot;,&quot;parentUUID&quot;:&quot;58c473b6-4b89-499b-a306-10612ccba600&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 when study not exist&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; Should raise 404 when study not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}1268/thumbnail`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1711ef6f-0e4a-46be-ab71-328ea6f4231b&quot;,&quot;parentUUID&quot;:&quot;58c473b6-4b89-499b-a306-10612ccba600&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af786b0d-0787-4643-ad50-71bbccfefbfd&quot;,&quot;1711ef6f-0e4a-46be-ab71-328ea6f4231b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d69797bf-14a3-4e76-bd8b-5a0de9596940&quot;,&quot;title&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\bulkdata\\retrieveStudyBulkdataWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\bulkdata\\retrieveStudyBulkdataWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user \&quot;before all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1792,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFile = resolve(__dirname, \&quot;../../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;daa4baf3-5e85-4c6a-ad79-a1b18db8b76b&quot;,&quot;parentUUID&quot;:&quot;d69797bf-14a3-4e76-bd8b-5a0de9596940&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user \&quot;after all\&quot; hook in \&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bf0cae2-830c-4575-b0ae-23bcdf8a1dcc&quot;,&quot;parentUUID&quot;:&quot;d69797bf-14a3-4e76-bd8b-5a0de9596940&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study bulkdata with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user Should retrieve study bulkdata with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/bulkdata`,\n    user: TEST_USERS[0],\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    bulkDataFactoryType: StudyBulkDataFactory,\n    imagePathFactoryType: StudyImagePathFactory\n});\nlet response = createResponse();\nlet controller = new BaseBulkDataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data).is.an(\&quot;array\&quot;);\nexpect(data.length).to.greaterThan(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f138fdf2-aeda-45d2-88a3-c4f57c20ca14&quot;,&quot;parentUUID&quot;:&quot;d69797bf-14a3-4e76-bd8b-5a0de9596940&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not retrieve study bulkdata with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study bulkdata &#x27;/dicom-web/studies/:studyUID/bulkdata&#x27; with user Should not retrieve study bulkdata with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/bulkdata`,\n    user: TEST_USERS[2],\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    bulkDataFactoryType: StudyBulkDataFactory,\n    imagePathFactoryType: StudyImagePathFactory\n});\nlet response = createResponse();\nlet controller = new BaseBulkDataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f795cda6-ac49-449a-b765-c861fabf7a3c&quot;,&quot;parentUUID&quot;:&quot;d69797bf-14a3-4e76-bd8b-5a0de9596940&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f138fdf2-aeda-45d2-88a3-c4f57c20ca14&quot;,&quot;f795cda6-ac49-449a-b765-c861fabf7a3c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f1ff8db6-786d-4482-b21b-cbd9f4f8260d&quot;,&quot;title&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\bulkdata\\retrieveStudySeriesBulkdataWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\bulkdata\\retrieveStudySeriesBulkdataWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user \&quot;before all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1772,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFile = resolve(__dirname, \&quot;../../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd3c9156-7b5f-48ee-a51b-5d5a25b95047&quot;,&quot;parentUUID&quot;:&quot;f1ff8db6-786d-4482-b21b-cbd9f4f8260d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user \&quot;after all\&quot; hook in \&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63a348f6-33a1-48b7-8f85-ba5cfa1d46da&quot;,&quot;parentUUID&quot;:&quot;f1ff8db6-786d-4482-b21b-cbd9f4f8260d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series bulkdata with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user Should retrieve study-series bulkdata with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/bulkdata`,\n    user: TEST_USERS[0],\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    bulkDataFactoryType: SeriesBulkDataFactory,\n    imagePathFactoryType: SeriesImagePathFactory\n});\nlet response = createResponse();\nlet controller = new BaseBulkDataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data).is.an(\&quot;array\&quot;);\nexpect(data.length).to.greaterThan(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a05c7e4-8d7c-43c8-959c-a9fba82aacd9&quot;,&quot;parentUUID&quot;:&quot;f1ff8db6-786d-4482-b21b-cbd9f4f8260d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not retrieve study-series bulkdata with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/bulkdata&#x27; with user Should not retrieve study-series bulkdata with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/bulkdata`,\n    user: TEST_USERS[2],\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    bulkDataFactoryType: SeriesBulkDataFactory,\n    imagePathFactoryType: SeriesImagePathFactory\n});\nlet response = createResponse();\nlet controller = new BaseBulkDataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd498084-9632-44ac-8c2e-6a89d6d86d4b&quot;,&quot;parentUUID&quot;:&quot;f1ff8db6-786d-4482-b21b-cbd9f4f8260d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a05c7e4-8d7c-43c8-959c-a9fba82aacd9&quot;,&quot;dd498084-9632-44ac-8c2e-6a89d6d86d4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;4e66d542-86d6-4512-9b30-4e7686a81028&quot;,&quot;title&quot;:&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\bulkdata\\retrieveStudySeriesInstanceBulkdataWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\bulkdata\\retrieveStudySeriesInstanceBulkdataWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user \&quot;before all\&quot; hook in \&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2601,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFile = resolve(__dirname, \&quot;../../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d054c65e-4d9f-41e8-826d-5bcc745d3ebd&quot;,&quot;parentUUID&quot;:&quot;4e66d542-86d6-4512-9b30-4e7686a81028&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user \&quot;after all\&quot; hook in \&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d010ad1-d685-4dee-b4a0-c269a9a74f1f&quot;,&quot;parentUUID&quot;:&quot;4e66d542-86d6-4512-9b30-4e7686a81028&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series bulkdata with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user Should retrieve study-series bulkdata with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/bulkdata`,\n    user: TEST_USERS[0],\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    bulkDataFactoryType: InstanceBulkDataFactory,\n    imagePathFactoryType: InstanceImagePathFactory\n});\nlet response = createResponse();\nlet controller = new BaseBulkDataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data).is.an(\&quot;array\&quot;);\nexpect(data.length).to.greaterThan(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8358a4a1-9e80-42eb-9ad3-8277af28716c&quot;,&quot;parentUUID&quot;:&quot;4e66d542-86d6-4512-9b30-4e7686a81028&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not retrieve study-series-instance bulkdata with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance bulkdata &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/bulkdata&#x27; with user Should not retrieve study-series-instance bulkdata with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/bulkdata`,\n    user: TEST_USERS[2],\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    bulkDataFactoryType: InstanceBulkDataFactory,\n    imagePathFactoryType: InstanceImagePathFactory\n});\nlet response = createResponse();\nlet controller = new BaseBulkDataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c14b21b6-b0db-48e7-84ec-0cc406a1c954&quot;,&quot;parentUUID&quot;:&quot;4e66d542-86d6-4512-9b30-4e7686a81028&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8358a4a1-9e80-42eb-9ad3-8277af28716c&quot;,&quot;c14b21b6-b0db-48e7-84ec-0cc406a1c954&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ebc23069-39f2-4bb6-9842-f6afd7896873&quot;,&quot;title&quot;:&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteAndUndoDeleteSeqWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteAndUndoDeleteSeqWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again\&quot;&quot;,&quot;fullTitle&quot;:&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again \&quot;before all\&quot; hook in \&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1316,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;445cbef7-bb83-4284-a273-235ce559f251&quot;,&quot;parentUUID&quot;:&quot;ebc23069-39f2-4bb6-9842-f6afd7896873&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Delete Series A&quot;,&quot;fullTitle&quot;:&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Delete Series A&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.ByUser.deleteWithReasonBySeriesInstanceUid(STUDY_UID, SERIES_INSTANCE_UIDS[0], TEST_USERS[0]);\nlet queryRequest = createRequest({\n    url: `/dicom-web/series`,\n    method: \&quot;GET\&quot;,\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet controller = new BaseQueryController(queryRequest, queryResponse);\nawait controller.doPipeline();\nexpect(queryResponse.statusCode).to.equal(200);\nlet series = queryResponse._getJSONData();\nexpect(series.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66c4861f-3f1c-4761-a645-fa1a85e6061e&quot;,&quot;parentUUID&quot;:&quot;ebc23069-39f2-4bb6-9842-f6afd7896873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete Series B&quot;,&quot;fullTitle&quot;:&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Delete Series B&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.ByUser.deleteWithReasonBySeriesInstanceUid(STUDY_UID, SERIES_INSTANCE_UIDS[1], TEST_USERS[0]);\nlet queryRequest = createRequest({\n    url: `/dicom-web/series`,\n    method: \&quot;GET\&quot;,\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet controller = new BaseQueryController(queryRequest, queryResponse);\nawait controller.doPipeline();\nexpect(queryResponse.statusCode).to.equal(200);\nlet series = queryResponse._getJSONData();\nexpect(series.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3042861a-ec31-4838-ac0a-6eb27d110d0e&quot;,&quot;parentUUID&quot;:&quot;ebc23069-39f2-4bb6-9842-f6afd7896873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Recover Series A&quot;,&quot;fullTitle&quot;:&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Recover Series A&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.ByUser.undoDeleteBySeriesInstanceUid(STUDY_UID, SERIES_INSTANCE_UIDS[0], {}, TEST_USERS[0]);\nlet queryRequest = createRequest({\n    url: `/dicom-web/series`,\n    method: \&quot;GET\&quot;,\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet controller = new BaseQueryController(queryRequest, queryResponse);\nawait controller.doPipeline();\nexpect(queryResponse.statusCode).to.equal(200);\nlet series = queryResponse._getJSONData();\nexpect(series.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29089332-7dc7-452f-8bf2-61cfa76967fb&quot;,&quot;parentUUID&quot;:&quot;ebc23069-39f2-4bb6-9842-f6afd7896873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete Series B Again&quot;,&quot;fullTitle&quot;:&quot;User: Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Delete Series B Again&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.ByUser.deleteBySeriesInstanceUid(STUDY_UID, SERIES_INSTANCE_UIDS[1], {}, TEST_USERS[0]);\nlet queryRequest = createRequest({\n    url: `/dicom-web/series`,\n    method: \&quot;GET\&quot;,\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0],\n    query: {\n        deleteStatus: 2\n    }\n});\nlet queryResponse = createResponse();\nlet controller = new BaseQueryController(queryRequest, queryResponse);\nawait controller.doPipeline();\nexpect(queryResponse.statusCode).to.equal(200);\nlet series = queryResponse._getJSONData();\nexpect(series.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78ab0568-b93e-4c64-84e0-e33ebeb9f2a0&quot;,&quot;parentUUID&quot;:&quot;ebc23069-39f2-4bb6-9842-f6afd7896873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66c4861f-3f1c-4761-a645-fa1a85e6061e&quot;,&quot;3042861a-ec31-4838-ac0a-6eb27d110d0e&quot;,&quot;29089332-7dc7-452f-8bf2-61cfa76967fb&quot;,&quot;78ab0568-b93e-4c64-84e0-e33ebeb9f2a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:73,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5374e6d5-3e6b-4731-a585-5caf376f97d9&quot;,&quot;title&quot;:&quot;Delete study-series-instance by user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteStudySeriesInstanceWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteStudySeriesInstanceWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete study-series-instance by user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance by user \&quot;before all\&quot; hook in \&quot;Delete study-series-instance by user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1277,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}\n// delete test study-series-instance with reason\nlet request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f43f7fb4-29bc-4d43-9f74-85640ab2a2a6&quot;,&quot;parentUUID&quot;:&quot;5374e6d5-3e6b-4731-a585-5caf376f97d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete study-series-instance by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance by user should delete study-series-instance by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}`,\n    method: \&quot;DELETE\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new BaseDeleteController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SOPInstanceUID: INSTANCE_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet queryController = new BaseQueryController(queryRequest, queryResponse);\nawait queryController.doPipeline();\nexpect(queryResponse.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd562b86-0a44-4bf4-b294-185c1720f86d&quot;,&quot;parentUUID&quot;:&quot;5374e6d5-3e6b-4731-a585-5caf376f97d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;test&#x27; and use params deleteStatus&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance by user should have study when search with user &#x27;test&#x27; and use params deleteStatus&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SOPInstanceUID: INSTANCE_UID,\n        deleteStatus: 2\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db0d39e8-f98a-4a5c-8e2b-565395c85e20&quot;,&quot;parentUUID&quot;:&quot;5374e6d5-3e6b-4731-a585-5caf376f97d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance by user should have study when search with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SOPInstanceUID: INSTANCE_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f640c58-30a3-4556-ab11-6b59b0067208&quot;,&quot;parentUUID&quot;:&quot;5374e6d5-3e6b-4731-a585-5caf376f97d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd562b86-0a44-4bf4-b294-185c1720f86d&quot;,&quot;db0d39e8-f98a-4a5c-8e2b-565395c85e20&quot;,&quot;3f640c58-30a3-4556-ab11-6b59b0067208&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1d7e2f2d-16ee-4285-a3c3-3e200b927248&quot;,&quot;title&quot;:&quot;Delete study-series by user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteStudySeriesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteStudySeriesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete study-series by user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series by user \&quot;before all\&quot; hook in \&quot;Delete study-series by user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1309,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}\n// delete test study with reason\nlet request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d123530-8b2c-4edd-a7b7-6861a8112c92&quot;,&quot;parentUUID&quot;:&quot;1d7e2f2d-16ee-4285-a3c3-3e200b927248&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete study-series by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series by user should delete study-series by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    method: \&quot;DELETE\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new BaseDeleteController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SeriesInstanceUID: SERIES_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet queryController = new BaseQueryController(queryRequest, queryResponse);\nawait queryController.doPipeline();\nexpect(queryResponse.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8851ddb3-c82c-4bcc-b56e-50bc94613a65&quot;,&quot;parentUUID&quot;:&quot;1d7e2f2d-16ee-4285-a3c3-3e200b927248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;test&#x27; and use params deleteStatus&quot;,&quot;fullTitle&quot;:&quot;Delete study-series by user should have study when search with user &#x27;test&#x27; and use params deleteStatus&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SeriesInstanceUID: SERIES_UID,\n        deleteStatus: 2\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;974c68ce-8ee8-43e2-a01f-be30f497d96b&quot;,&quot;parentUUID&quot;:&quot;1d7e2f2d-16ee-4285-a3c3-3e200b927248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series by user should have study when search with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SeriesInstanceUID: SERIES_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac9929bd-cf47-498f-8051-ef8ce8856bb7&quot;,&quot;parentUUID&quot;:&quot;1d7e2f2d-16ee-4285-a3c3-3e200b927248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8851ddb3-c82c-4bcc-b56e-50bc94613a65&quot;,&quot;974c68ce-8ee8-43e2-a01f-be30f497d96b&quot;,&quot;ac9929bd-cf47-498f-8051-ef8ce8856bb7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f58f1f68-4a72-463e-b62c-cf1149ecff67&quot;,&quot;title&quot;:&quot;Delete study by user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteStudyWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\delete\\deleteStudyWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete study by user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete study by user \&quot;before all\&quot; hook in \&quot;Delete study by user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1431,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}\n// delete test study with reason\nlet request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;417950b4-206e-4d17-a3cf-6b7d7f63e3a6&quot;,&quot;parentUUID&quot;:&quot;f58f1f68-4a72-463e-b62c-cf1149ecff67&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete study by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study by user should delete study by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    method: \&quot;DELETE\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new BaseDeleteController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        StudyInstanceUID: STUDY_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet queryController = new BaseQueryController(queryRequest, queryResponse);\nawait queryController.doPipeline();\nexpect(queryResponse.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a774a2-2612-4a3d-b8e4-803d17898545&quot;,&quot;parentUUID&quot;:&quot;f58f1f68-4a72-463e-b62c-cf1149ecff67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;test&#x27; and use params deleteStatus&quot;,&quot;fullTitle&quot;:&quot;Delete study by user should have study when search with user &#x27;test&#x27; and use params deleteStatus&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        StudyInstanceUID: STUDY_UID,\n        deleteStatus: 2\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;679268ef-7929-423f-b526-4508c29a48d6&quot;,&quot;parentUUID&quot;:&quot;f58f1f68-4a72-463e-b62c-cf1149ecff67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study by user should have study when search with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        StudyInstanceUID: STUDY_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf7844f8-2f67-4cbd-a586-a1fa7a22eb4e&quot;,&quot;parentUUID&quot;:&quot;f58f1f68-4a72-463e-b62c-cf1149ecff67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5a774a2-2612-4a3d-b8e4-803d17898545&quot;,&quot;679268ef-7929-423f-b526-4508c29a48d6&quot;,&quot;bf7844f8-2f67-4cbd-a586-a1fa7a22eb4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d4a7f47c-6bc7-46ed-babd-fb8e0ec7139c&quot;,&quot;title&quot;:&quot;Delete study-series-instance with reason by user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\deleteStudySeriesInstanceWithReansonAndUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\deleteStudySeriesInstanceWithReansonAndUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete study-series-instance with reason by user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance with reason by user \&quot;before all\&quot; hook in \&quot;Delete study-series-instance with reason by user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1402,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e27baa32-be40-4e4d-8656-57854ee0854d&quot;,&quot;parentUUID&quot;:&quot;d4a7f47c-6bc7-46ed-babd-fb8e0ec7139c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete study-series-instance with reason by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance with reason by user should delete study-series-instance with reason by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SOPInstanceUID: INSTANCE_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet queryController = new BaseQueryController(queryRequest, queryResponse);\nawait queryController.doPipeline();\nexpect(queryResponse.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b5c43fe-23a0-4879-95dd-8010118f9b92&quot;,&quot;parentUUID&quot;:&quot;d4a7f47c-6bc7-46ed-babd-fb8e0ec7139c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study-series-instance when search with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series-instance with reason by user should have study-series-instance when search with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SOPInstanceUID: INSTANCE_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;instance\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afad15e4-5653-4d8a-a7bc-a52fbcda113c&quot;,&quot;parentUUID&quot;:&quot;d4a7f47c-6bc7-46ed-babd-fb8e0ec7139c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b5c43fe-23a0-4879-95dd-8010118f9b92&quot;,&quot;afad15e4-5653-4d8a-a7bc-a52fbcda113c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;89c0c003-9675-4b66-b5cb-8e620ff5b874&quot;,&quot;title&quot;:&quot;Delete study-series with reason by user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\deleteStudySeriesWithReansonAndUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\deleteStudySeriesWithReansonAndUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete study-series with reason by user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series with reason by user \&quot;before all\&quot; hook in \&quot;Delete study-series with reason by user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1325,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;235023ba-a2d9-44f5-8c55-77dc1f601d79&quot;,&quot;parentUUID&quot;:&quot;89c0c003-9675-4b66-b5cb-8e620ff5b874&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete study-series with reason by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series with reason by user should delete study-series with reason by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SeriesInstanceUID: SERIES_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet queryController = new BaseQueryController(queryRequest, queryResponse);\nawait queryController.doPipeline();\nexpect(queryResponse.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51f4ce86-3a09-4734-84f8-5f8e818b2ce9&quot;,&quot;parentUUID&quot;:&quot;89c0c003-9675-4b66-b5cb-8e620ff5b874&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study-series when search with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete study-series with reason by user should have study-series when search with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/series`,\n    method: \&quot;GET\&quot;,\n    query: {\n        SeriesInstanceUID: SERIES_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;series\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e1d913d-60e8-41bf-866b-1b96142b4992&quot;,&quot;parentUUID&quot;:&quot;89c0c003-9675-4b66-b5cb-8e620ff5b874&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51f4ce86-3a09-4734-84f8-5f8e818b2ce9&quot;,&quot;9e1d913d-60e8-41bf-866b-1b96142b4992&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;fb52cf38-71c1-4634-b448-0ca68672e4c2&quot;,&quot;title&quot;:&quot;Delete Study with reason by user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\deleteStudyWithReansonAndUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\deleteStudyWithReansonAndUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete Study with reason by user\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete Study with reason by user \&quot;before all\&quot; hook in \&quot;Delete Study with reason by user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1351,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f59aa811-233f-4c64-9554-31327d0e26c6&quot;,&quot;parentUUID&quot;:&quot;fb52cf38-71c1-4634-b448-0ca68672e4c2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete study with reason by user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete Study with reason by user should delete study with reason by user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet queryRequest = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        StudyInstanceUID: STUDY_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet queryResponse = createResponse();\nlet queryController = new BaseQueryController(queryRequest, queryResponse);\nawait queryController.doPipeline();\nexpect(queryResponse.statusCode).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;407f5bd7-99e2-47f6-97cc-188f1a652536&quot;,&quot;parentUUID&quot;:&quot;fb52cf38-71c1-4634-b448-0ca68672e4c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have study when search with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete Study with reason by user should have study when search with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/studies`,\n    method: \&quot;GET\&quot;,\n    query: {\n        StudyInstanceUID: STUDY_UID\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nlet controller = new BaseQueryController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8072360b-f703-4b7e-a0ec-1040ca3f9be7&quot;,&quot;parentUUID&quot;:&quot;fb52cf38-71c1-4634-b448-0ca68672e4c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;407f5bd7-99e2-47f6-97cc-188f1a652536&quot;,&quot;8072360b-f703-4b7e-a0ec-1040ca3f9be7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a1531163-760a-4e77-965b-6f1d2eb0f4aa&quot;,&quot;title&quot;:&quot;WADO-RS get delete reason with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\getDeleteReasonWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\deleteWithReason\\getDeleteReasonWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;WADO-RS get delete reason with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;WADO-RS get delete reason with user \&quot;before all\&quot; hook in \&quot;WADO-RS get delete reason with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1390,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor(let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n    await storeInstanceWithUserForTest(file, TEST_USERS[2]);\n}\nlet request = createRequest({\n    url: `/dicom-web/studies/${STUDY_UID}/delete-with-reason`,\n    method: \&quot;POST\&quot;,\n    params: {\n        studyUID: STUDY_UID\n    },\n    body: {\n        reason: \&quot;test\&quot;\n    },\n    headers: {\n        host: \&quot;localhost:8080\&quot;\n    },\n    dicomLevel: \&quot;study\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nlet controller = new DeleteWithReasonController(request, response);\nawait controller.doPipeline();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2de1bf3-510d-4ea1-a576-d421978cccca&quot;,&quot;parentUUID&quot;:&quot;a1531163-760a-4e77-965b-6f1d2eb0f4aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get delete reason with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;WADO-RS get delete reason with user should get delete reason with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/delete-reason/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        uid: STUDY_UID\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetDeleteReasonController(request, response);\nexpect(response.statusCode).to.equal(200);\nexpect(response._getJSONData()).to.have.property(\&quot;reason\&quot;).to.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54bc3486-b2e2-455f-ab71-52f5cbc855f6&quot;,&quot;parentUUID&quot;:&quot;a1531163-760a-4e77-965b-6f1d2eb0f4aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not get delete reason with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;WADO-RS get delete reason with user should not get delete reason with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    url: `/dicom-web/delete-reason/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    params: {\n        uid: STUDY_UID\n    },\n    user: TEST_USERS[1]\n});\nlet response = createResponse();\nawait GetDeleteReasonController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ab16790-b3be-4e20-9a7f-643c0b116069&quot;,&quot;parentUUID&quot;:&quot;a1531163-760a-4e77-965b-6f1d2eb0f4aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54bc3486-b2e2-455f-ab71-52f5cbc855f6&quot;,&quot;2ab16790-b3be-4e20-9a7f-643c0b116069&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;57ffb3c3-86aa-4f3d-80f6-e9f1e0a0d15e&quot;,&quot;title&quot;:&quot;retrieve study metadata with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\metadata\\retrieveStudyMetadataWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\metadata\\retrieveStudyMetadataWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study metadata with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata with user \&quot;before all\&quot; hook in \&quot;retrieve study metadata with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:724,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;050ca985-c6ca-4d0d-84dc-60018e0da764&quot;,&quot;parentUUID&quot;:&quot;57ffb3c3-86aa-4f3d-80f6-e9f1e0a0d15e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 11 instances&#x27; metadata with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata with user Should retrieve study with 11 instances&#x27; metadata with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    }\n});\nrequest.imagePathFactory = StudyImagePathFactory;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getJSONData();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80e6d8fb-1cb6-4148-9bac-de68f59c9685&quot;,&quot;parentUUID&quot;:&quot;57ffb3c3-86aa-4f3d-80f6-e9f1e0a0d15e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study with 11 instances&#x27; metadata with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata with user Should retrieve study with 11 instances&#x27; metadata with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    }\n});\nrequest.imagePathFactory = StudyImagePathFactory;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getJSONData();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de7fc871-5fae-4017-899d-c384057ad302&quot;,&quot;parentUUID&quot;:&quot;57ffb3c3-86aa-4f3d-80f6-e9f1e0a0d15e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study metadata with user Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    }\n});\nrequest.imagePathFactory = StudyImagePathFactory;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74153c5a-9890-4e0f-9d3a-aea7214c0b2b&quot;,&quot;parentUUID&quot;:&quot;57ffb3c3-86aa-4f3d-80f6-e9f1e0a0d15e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;80e6d8fb-1cb6-4148-9bac-de68f59c9685&quot;,&quot;de7fc871-5fae-4017-899d-c384057ad302&quot;,&quot;74153c5a-9890-4e0f-9d3a-aea7214c0b2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;28414b4a-88af-4293-8b53-074528075d3d&quot;,&quot;title&quot;:&quot;retrieve study-series-instance metadata with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\metadata\\retrieveStudySeriesInstanceMetadataWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\metadata\\retrieveStudySeriesInstanceMetadataWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instance metadata with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance metadata with user \&quot;before all\&quot; hook in \&quot;retrieve study-series-instance metadata with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:695,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07e0287e-6745-44ee-a8e6-4f48e8e26f87&quot;,&quot;parentUUID&quot;:&quot;28414b4a-88af-4293-8b53-074528075d3d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instance metadata with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance metadata with user Should retrieve study-series-instance metadata with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    }\n});\nrequest.imagePathFactory = InstanceImagePathFactory;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getJSONData();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c5e53e4-5732-462c-9389-d2e1868a1472&quot;,&quot;parentUUID&quot;:&quot;28414b4a-88af-4293-8b53-074528075d3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study-series-instance metadata with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance metadata with user Should retrieve study-series-instance metadata with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    }\n});\nrequest.imagePathFactory = InstanceImagePathFactory;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getJSONData();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2de1df9a-1da1-4466-8ada-3a214785f2e7&quot;,&quot;parentUUID&quot;:&quot;28414b4a-88af-4293-8b53-074528075d3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance metadata with user Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    }\n});\nrequest.imagePathFactory = InstanceImagePathFactory;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58e757cf-1be9-48bf-a10d-b75ae78052f3&quot;,&quot;parentUUID&quot;:&quot;28414b4a-88af-4293-8b53-074528075d3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c5e53e4-5732-462c-9389-d2e1868a1472&quot;,&quot;2de1df9a-1da1-4466-8ada-3a214785f2e7&quot;,&quot;58e757cf-1be9-48bf-a10d-b75ae78052f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6b4cf91e-5160-4021-a714-3c87663bda01&quot;,&quot;title&quot;:&quot;retrieve study-series metadata with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\metadata\\retrieveStudySeriesMetadataWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\metadata\\retrieveStudySeriesMetadataWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series metadata with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata with user \&quot;before all\&quot; hook in \&quot;retrieve study-series metadata with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:644,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ab524e3-7f03-4a6c-8ebf-c6fd3e6f1395&quot;,&quot;parentUUID&quot;:&quot;6b4cf91e-5160-4021-a714-3c87663bda01&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances&#x27; metadata with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata with user Should retrieve study-series with 5 instances&#x27; metadata with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nrequest.imagePathFactory = SeriesImagePathFactory;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getJSONData();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e8585e7-cd63-448a-8ce6-3daa83714215&quot;,&quot;parentUUID&quot;:&quot;6b4cf91e-5160-4021-a714-3c87663bda01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances&#x27; metadata with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata with user Should retrieve study-series with 5 instances&#x27; metadata with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nrequest.imagePathFactory = SeriesImagePathFactory;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getJSONData();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e555097-720b-41c4-b775-0e82af8a061f&quot;,&quot;parentUUID&quot;:&quot;6b4cf91e-5160-4021-a714-3c87663bda01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series metadata with user Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/metadata`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nrequest.imagePathFactory = SeriesImagePathFactory;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseRetrieveMetadataController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adabe1dc-e478-46e8-96c8-ca97c5717ef8&quot;,&quot;parentUUID&quot;:&quot;6b4cf91e-5160-4021-a714-3c87663bda01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e8585e7-cd63-448a-8ce6-3daa83714215&quot;,&quot;0e555097-720b-41c4-b775-0e82af8a061f&quot;,&quot;adabe1dc-e478-46e8-96c8-ca97c5717ef8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;dea4bc2c-5274-494c-86c8-7e0eb88608db&quot;,&quot;title&quot;:&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudySeriesInstancesFramesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudySeriesInstancesFramesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(\n    resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;),\n    TEST_USERS[0]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b2c9411-a712-4d2f-b385-464f6fc347ec&quot;,&quot;parentUUID&quot;:&quot;dea4bc2c-5274-494c-86c8-7e0eb88608db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c10fd47-1ada-4459-ae7c-e37fb0ca9401&quot;,&quot;parentUUID&quot;:&quot;dea4bc2c-5274-494c-86c8-7e0eb88608db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instance&#x27;s frame 1 with 1 rendered image&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should retrieve study-series-instance&#x27;s frame 1 with 1 rendered image&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered`,\n    user: TEST_USERS[0],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID,\n        frameNumber: [1]\n    },\n    imagePathFactory: InstanceImagePathFactory,\n    framesWriter: InstanceFramesListWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b896f32b-541a-45e9-bb66-f1819cb8a78d&quot;,&quot;parentUUID&quot;:&quot;dea4bc2c-5274-494c-86c8-7e0eb88608db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered frames of study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/frames/:frameNumber/rendered&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1/rendered`,\n    user: TEST_USERS[2],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID,\n        frameNumber: [1]\n    },\n    imagePathFactory: InstanceImagePathFactory,\n    framesWriter: InstanceFramesListWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b48ab31e-1499-49b9-85bf-b7cb55437d6a&quot;,&quot;parentUUID&quot;:&quot;dea4bc2c-5274-494c-86c8-7e0eb88608db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b896f32b-541a-45e9-bb66-f1819cb8a78d&quot;,&quot;b48ab31e-1499-49b9-85bf-b7cb55437d6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:53,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;31d91d97-7b72-4e18-b0cc-e6bd93a9f604&quot;,&quot;title&quot;:&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudySeriesInstanceWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudySeriesInstanceWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(\n    resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;),\n    TEST_USERS[0]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bacaac66-be77-43b6-838b-15237cdc5106&quot;,&quot;parentUUID&quot;:&quot;31d91d97-7b72-4e18-b0cc-e6bd93a9f604&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfd6ddcd-840b-4f5d-a7c6-f22331149076&quot;,&quot;parentUUID&quot;:&quot;31d91d97-7b72-4e18-b0cc-e6bd93a9f604&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instance with 15 rendered images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; Should retrieve study-series-instance with 15 rendered images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:637,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/rendered`,\n    user: TEST_USERS[0],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    imagePathFactory: InstanceImagePathFactory,\n    framesWriter: InstanceFramesWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data.length).to.equal(15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02e310cd-c43d-4017-a12e-c96f29612dbf&quot;,&quot;parentUUID&quot;:&quot;31d91d97-7b72-4e18-b0cc-e6bd93a9f604&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series-instance with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/rendered&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/rendered`,\n    user: TEST_USERS[2],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    imagePathFactory: InstanceImagePathFactory,\n    framesWriter: InstanceFramesWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68f4880e-f6ba-4e4f-ad51-077cc4ccc92a&quot;,&quot;parentUUID&quot;:&quot;31d91d97-7b72-4e18-b0cc-e6bd93a9f604&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;02e310cd-c43d-4017-a12e-c96f29612dbf&quot;,&quot;68f4880e-f6ba-4e4f-ad51-077cc4ccc92a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:639,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f4585af7-dd63-4995-adb3-9fd68a3771d9&quot;,&quot;title&quot;:&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudySeriesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudySeriesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(\n    resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;),\n    TEST_USERS[0]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8bb785e-063b-4473-bf8c-31e63af9cdb6&quot;,&quot;parentUUID&quot;:&quot;f4585af7-dd63-4995-adb3-9fd68a3771d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86468177-e081-450d-94b5-f19137f759d5&quot;,&quot;parentUUID&quot;:&quot;f4585af7-dd63-4995-adb3-9fd68a3771d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series with 15 rendered images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; Should retrieve study-series with 15 rendered images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:665,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/rendered`,\n    user: TEST_USERS[0],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    imagePathFactory: SeriesImagePathFactory,\n    framesWriter: SeriesFramesWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data.length).to.equal(15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc6beee3-6672-43cf-a6af-4f2140ef7c37&quot;,&quot;parentUUID&quot;:&quot;f4585af7-dd63-4995-adb3-9fd68a3771d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study-series with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/rendered&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/rendered`,\n    user: TEST_USERS[2],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    imagePathFactory: SeriesImagePathFactory,\n    framesWriter: SeriesFramesWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d414952-9170-418b-bfd2-397fb54f6d8f&quot;,&quot;parentUUID&quot;:&quot;f4585af7-dd63-4995-adb3-9fd68a3771d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc6beee3-6672-43cf-a6af-4f2140ef7c37&quot;,&quot;1d414952-9170-418b-bfd2-397fb54f6d8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:667,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1f332107-7631-4813-92a0-3d9f0884dd08&quot;,&quot;title&quot;:&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudyWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\rendered\\retrieveRenderedStudyWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27; \&quot;before all\&quot; hook in \&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:159,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(\n    resolve(__dirname, \&quot;../../../../../../test/testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;),\n    TEST_USERS[0]\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8be3cfe0-ca82-45a1-b3e3-0b5ecabb3160&quot;,&quot;parentUUID&quot;:&quot;1f332107-7631-4813-92a0-3d9f0884dd08&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27; \&quot;after all\&quot; hook in \&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccd81dcc-bd8c-4958-82c1-43a00008cb71&quot;,&quot;parentUUID&quot;:&quot;1f332107-7631-4813-92a0-3d9f0884dd08&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 15 rendered images&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27; Should retrieve study with 15 rendered images&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:610,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/rendered`,\n    user: TEST_USERS[0],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    imagePathFactory: StudyImagePathFactory,\n    framesWriter: StudyFramesWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data.length).to.equal(15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c72204b-2112-43c5-a6ac-1b1a6f5d78a0&quot;,&quot;parentUUID&quot;:&quot;1f332107-7631-4813-92a0-3d9f0884dd08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve rendered study with user &#x27;/dicom-web/studies/:studyUID/rendered&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/rendered`,\n    user: TEST_USERS[2],\n    headers: {\n        accept: \&quot;*/*\&quot;,\n        host: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    imagePathFactory: StudyImagePathFactory,\n    framesWriter: StudyFramesWriter\n});\nlet response = createResponse();\nlet controller = new BaseRetrieveRenderedController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bba269a-0a0b-495b-b2ea-bbc854ba8094&quot;,&quot;parentUUID&quot;:&quot;1f332107-7631-4813-92a0-3d9f0884dd08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c72204b-2112-43c5-a6ac-1b1a6f5d78a0&quot;,&quot;3bba269a-0a0b-495b-b2ea-bbc854ba8094&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:611,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e4cefc5c-f32e-4172-bf64-84c876a05c9c&quot;,&quot;title&quot;:&quot;retrieve study-series-instances-frames with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveInstanceFramesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveInstanceFramesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances-frames with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frames with user \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances-frames with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nconst testDicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nfor (const user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15f59b4b-6721-44dd-8bd6-d50ef6e8b72e&quot;,&quot;parentUUID&quot;:&quot;e4cefc5c-f32e-4172-bf64-84c876a05c9c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve instance&#x27;s frame 1 with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frames with user Should retrieve instance&#x27;s frame 1 with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1`,\n    headers: {\n        accept: \&quot;*/*\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID,\n        frameNumber: \&quot;1\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse(request);\nawait RetrieveInstanceFramesController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet data = response._getChunks();\nexpect(data.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4f0fc0e-df83-4d9f-af6f-271ed74764d6&quot;,&quot;parentUUID&quot;:&quot;e4cefc5c-f32e-4172-bf64-84c876a05c9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve instance&#x27;s frame 1 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances-frames with user Should retrieve instance&#x27;s frame 1 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/frames/1`,\n    headers: {\n        accept: \&quot;*/*\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID,\n        frameNumber: \&quot;1\&quot;\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse(request);\nawait RetrieveInstanceFramesController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c746888-0056-46ce-a72d-3fa762f6dede&quot;,&quot;parentUUID&quot;:&quot;e4cefc5c-f32e-4172-bf64-84c876a05c9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4f0fc0e-df83-4d9f-af6f-271ed74764d6&quot;,&quot;2c746888-0056-46ce-a72d-3fa762f6dede&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7a8dac2e-bdd9-4fd2-b4a7-5de392c1af92&quot;,&quot;title&quot;:&quot;retrieve study-series-instance with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveStudySeriesInstanceWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveStudySeriesInstanceWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instance with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance with user \&quot;before all\&quot; hook in \&quot;retrieve study-series-instance with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:695,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb1a46a2-9d8b-4d1f-81f0-65c150df7be9&quot;,&quot;parentUUID&quot;:&quot;7a8dac2e-bdd9-4fd2-b4a7-5de392c1af92&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instance with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance with user Should retrieve study-series-instance with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    }\n});\nrequest.zipResponseHandlerType = InstanceZipResponseHandler;\nrequest.multipartResponseHandlerType = InstanceMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getChunks();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d99a8af-cd16-47f3-bae9-348d3b31c91d&quot;,&quot;parentUUID&quot;:&quot;7a8dac2e-bdd9-4fd2-b4a7-5de392c1af92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study-series-instance with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance with user Should retrieve study-series-instance with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    }\n});\nrequest.zipResponseHandlerType = InstanceZipResponseHandler;\nrequest.multipartResponseHandlerType = InstanceMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getChunks();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43bddfb7-ffb6-4e64-960a-7e04a0412484&quot;,&quot;parentUUID&quot;:&quot;7a8dac2e-bdd9-4fd2-b4a7-5de392c1af92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance with user Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    }\n});\nrequest.zipResponseHandlerType = InstanceZipResponseHandler;\nrequest.multipartResponseHandlerType = InstanceMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b16984b-1fbb-47da-9abb-82e7cff8108b&quot;,&quot;parentUUID&quot;:&quot;7a8dac2e-bdd9-4fd2-b4a7-5de392c1af92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d99a8af-cd16-47f3-bae9-348d3b31c91d&quot;,&quot;43bddfb7-ffb6-4e64-960a-7e04a0412484&quot;,&quot;8b16984b-1fbb-47da-9abb-82e7cff8108b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;072397fa-7b7b-40ef-8867-3639a17a80f7&quot;,&quot;title&quot;:&quot;retrieve study-series with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveStudySeriesWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveStudySeriesWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series with user \&quot;before all\&quot; hook in \&quot;retrieve study-series with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:638,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7589571-30f6-4965-91d1-2156c8f54fa2&quot;,&quot;parentUUID&quot;:&quot;072397fa-7b7b-40ef-8867-3639a17a80f7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series with user Should retrieve study-series with 5 instances with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nrequest.zipResponseHandlerType = SeriesZipResponseHandler;\nrequest.multipartResponseHandlerType = SeriesMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getChunks();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c0c2166-105f-417a-afb4-cd1b583241d0&quot;,&quot;parentUUID&quot;:&quot;072397fa-7b7b-40ef-8867-3639a17a80f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study-series with 5 instances with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series with user Should retrieve study-series with 5 instances with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nrequest.zipResponseHandlerType = SeriesZipResponseHandler;\nrequest.multipartResponseHandlerType = SeriesMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getChunks();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;588e044a-6d4d-4cde-a473-d733f3381a01&quot;,&quot;parentUUID&quot;:&quot;072397fa-7b7b-40ef-8867-3639a17a80f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series with user Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    }\n});\nrequest.zipResponseHandlerType = SeriesZipResponseHandler;\nrequest.multipartResponseHandlerType = SeriesMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80ff89b3-7c87-404e-9c4b-bfa8abe517f8&quot;,&quot;parentUUID&quot;:&quot;072397fa-7b7b-40ef-8867-3639a17a80f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c0c2166-105f-417a-afb4-cd1b583241d0&quot;,&quot;588e044a-6d4d-4cde-a473-d733f3381a01&quot;,&quot;80ff89b3-7c87-404e-9c4b-bfa8abe517f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:44,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0cabcb63-36db-4c53-8313-7c6d43268f87&quot;,&quot;title&quot;:&quot;retrieve study with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveStudyWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\retrieveStudyWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study with user \&quot;before all\&quot; hook in \&quot;retrieve study with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:636,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../test/testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e4bc4f8-6fe7-4d20-9b8a-001a089c9098&quot;,&quot;parentUUID&quot;:&quot;0cabcb63-36db-4c53-8313-7c6d43268f87&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study with 11 instances with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study with user Should retrieve study with 11 instances with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    }\n});\nrequest.zipResponseHandlerType = StudyZipResponseHandler;\nrequest.multipartResponseHandlerType = StudyMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[0];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getChunks();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f3938e0-0d63-49fa-9967-6826665d8c7d&quot;,&quot;parentUUID&quot;:&quot;0cabcb63-36db-4c53-8313-7c6d43268f87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve study with 11 instances with user &#x27;test2&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study with user Should retrieve study with 11 instances with user &#x27;test2&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    }\n});\nrequest.zipResponseHandlerType = StudyZipResponseHandler;\nrequest.multipartResponseHandlerType = StudyMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[1];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);\n\nlet data = response._getChunks();\nexpect(data).to.be.an(\&quot;array\&quot;);\nexpect(data.length).to.equal(11);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa43cf5e-cbed-4d88-8031-55ea648d305d&quot;,&quot;parentUUID&quot;:&quot;0cabcb63-36db-4c53-8313-7c6d43268f87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study with user Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}`,\n    headers: {\n        \&quot;accept\&quot;: \&quot;multipart/related; type=\\\&quot;application/dicom\\\&quot;\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    }\n});\nrequest.zipResponseHandlerType = StudyZipResponseHandler;\nrequest.multipartResponseHandlerType = StudyMultipartRelatedResponseHandler;\nrequest.user = TEST_USERS[2];\nlet response = createResponse();\nlet controller = new BaseRetrieveController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90ea9717-f39a-4f97-87e2-9988edfb5bfb&quot;,&quot;parentUUID&quot;:&quot;0cabcb63-36db-4c53-8313-7c6d43268f87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6f3938e0-0d63-49fa-9967-6826665d8c7d&quot;,&quot;aa43cf5e-cbed-4d88-8031-55ea648d305d&quot;,&quot;90ea9717-f39a-4f97-87e2-9988edfb5bfb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:51,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a95b86d6-9a22-4853-96c6-9ebb13de4c18&quot;,&quot;title&quot;:&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\thumbnail\\retrieveStudySeriesInstanceThumbnailWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\thumbnail\\retrieveStudySeriesInstanceThumbnailWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2474,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8af06f63-39d4-4127-a042-6a296b8f6a43&quot;,&quot;parentUUID&quot;:&quot;a95b86d6-9a22-4853-96c6-9ebb13de4c18&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bda011eb-2503-437d-a909-a4fd7f88a935&quot;,&quot;parentUUID&quot;:&quot;a95b86d6-9a22-4853-96c6-9ebb13de4c18&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series-instance thumbnail with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; Should retrieve study-series-instance thumbnail with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/instances/${INSTANCE_UID}/thumbnail`,\n    user: TEST_USERS[0],\n    headers: {\n        \&quot;accept\&quot;: \&quot;*/*\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    factory: InstanceThumbnailFactory\n});\nlet response = createResponse();\nlet controller = new BaseThumbnailController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7d93384-e19d-4bec-8a50-6d2440a21752&quot;,&quot;parentUUID&quot;:&quot;a95b86d6-9a22-4853-96c6-9ebb13de4c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instance thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/instances/:instanceUID/thumbnail&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}2486/instances/${INSTANCE_UID}2486/thumbnail`,\n    user: TEST_USERS[2],\n    headers: {\n        \&quot;accept\&quot;: \&quot;*/*\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID,\n        instanceUID: INSTANCE_UID\n    },\n    factory: InstanceThumbnailFactory\n});\nlet response = createResponse();\nlet controller = new BaseThumbnailController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd322506-884e-4397-b6dc-1e5b60bcb854&quot;,&quot;parentUUID&quot;:&quot;a95b86d6-9a22-4853-96c6-9ebb13de4c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7d93384-e19d-4bec-8a50-6d2440a21752&quot;,&quot;bd322506-884e-4397-b6dc-1e5b60bcb854&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;b0223ea9-7bfe-457c-9913-f76b1d6b7eda&quot;,&quot;title&quot;:&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\thumbnail\\retrieveStudySeriesThumbnailWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\thumbnail\\retrieveStudySeriesThumbnailWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2360,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5f36c7e-a5ce-4a51-b002-18ee2536bcd5&quot;,&quot;parentUUID&quot;:&quot;b0223ea9-7bfe-457c-9913-f76b1d6b7eda&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50b5669c-8520-4c7e-8776-481edd2ba4d8&quot;,&quot;parentUUID&quot;:&quot;b0223ea9-7bfe-457c-9913-f76b1d6b7eda&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study-series thumbnail with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; Should retrieve study-series thumbnail with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}/thumbnail`,\n    user: TEST_USERS[0],\n    headers: {\n        \&quot;accept\&quot;: \&quot;*/*\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    factory: SeriesThumbnailFactory\n});\nlet response = createResponse();\nlet controller = new BaseThumbnailController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e135074b-1c05-48aa-bbbc-33a0850c3725&quot;,&quot;parentUUID&quot;:&quot;b0223ea9-7bfe-457c-9913-f76b1d6b7eda&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series thumbnail with user &#x27;/dicom-web/studies/:studyUID/series/:seriesUID/thumbnail&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/series/${SERIES_UID}2486/thumbnail`,\n    user: TEST_USERS[2],\n    headers: {\n        \&quot;accept\&quot;: \&quot;*/*\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID,\n        seriesUID: SERIES_UID\n    },\n    factory: SeriesThumbnailFactory\n});\nlet response = createResponse();\nlet controller = new BaseThumbnailController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46d0aae3-eceb-4ad6-b16d-e88140d74019&quot;,&quot;parentUUID&quot;:&quot;b0223ea9-7bfe-457c-9913-f76b1d6b7eda&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e135074b-1c05-48aa-bbbc-33a0850c3725&quot;,&quot;46d0aae3-eceb-4ad6-b16d-e88140d74019&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e41c8ff6-2951-44e9-b9bb-31e697096e24&quot;,&quot;title&quot;:&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-RS\\withUser\\thumbnail\\retrieveStudyThumbnailWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-RS\\withUser\\thumbnail\\retrieveStudyThumbnailWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; \&quot;before all\&quot; hook in \&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2535,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../../../testData/dicomFiles/C3N-00953\&quot;),\n    absolute: true\n});\nfor (let file of testDicomFiles) {\n    await storeInstanceWithUserForTest(file, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc589a9b-385a-474a-b53e-3842c7358120&quot;,&quot;parentUUID&quot;:&quot;e41c8ff6-2951-44e9-b9bb-31e697096e24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; \&quot;after all\&quot; hook in \&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e196606-68bc-4514-acb6-b81bb5511d2e&quot;,&quot;parentUUID&quot;:&quot;e41c8ff6-2951-44e9-b9bb-31e697096e24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve study thumbnail with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; Should retrieve study thumbnail with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/thumbnail`,\n    user: TEST_USERS[0],\n    headers: {\n        \&quot;accept\&quot;: \&quot;*/*\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    factory: StudyThumbnailFactory\n});\nlet response = createResponse();\nlet controller = new BaseThumbnailController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;928f3337-62e1-4b05-a05c-145b709d8749&quot;,&quot;parentUUID&quot;:&quot;e41c8ff6-2951-44e9-b9bb-31e697096e24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study thumbnail with user &#x27;/dicom-web/studies/:studyUID/thumbnail&#x27; Should return 404 with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/thumbnail`,\n    user: TEST_USERS[2],\n    headers: {\n        \&quot;accept\&quot;: \&quot;*/*\&quot;,\n        \&quot;host\&quot;: \&quot;localhost:3000\&quot;\n    },\n    params: {\n        studyUID: STUDY_UID\n    },\n    factory: StudyThumbnailFactory\n});\nlet response = createResponse();\nlet controller = new BaseThumbnailController(request, response);\nawait controller.doPipeline();\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;342c2ec8-a4aa-42c9-a75e-2bd0ebed4629&quot;,&quot;parentUUID&quot;:&quot;e41c8ff6-2951-44e9-b9bb-31e697096e24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;928f3337-62e1-4b05-a05c-145b709d8749&quot;,&quot;342c2ec8-a4aa-42c9-a75e-2bd0ebed4629&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;title&quot;:&quot;retrieve study-series-instances using WADO-URI&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-URI\\retrieveInstanceWadoUri.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-URI\\retrieveInstanceWadoUri.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances using WADO-URI\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances using WADO-URI\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3726,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3af5c04c-e785-4bc9-a098-220fce43bd50&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;retrieve study-series-instances using WADO-URI\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI \&quot;after all\&quot; hook in \&quot;retrieve study-series-instances using WADO-URI\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bdfbd26-e081-4016-8412-657392f7cee9&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve DICOM instance&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;contentType=application/dicom`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76bcec73-8fcc-4d07-a194-0237a79ca10b&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance in JPEG&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance in JPEG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;contentType=image/jpeg`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b435b6a-a136-4517-841f-505f97a6953c&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance with frameNumber=1&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance with frameNumber=1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6200790-97a2-41cf-96f2-5f041b9242ad&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance with imageQuality=50&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance with imageQuality=50&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;336ac2bc-e31a-4d7b-bcfd-1c8735df083f&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance with region=0.1,0.1,1,1&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance with region=0.1,0.1,1,1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97781c5b-3ed6-4667-9b10-bac79d2b0731&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance with rows=500&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance with rows=500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7033f666-0a78-4f8f-9df8-cf91e5a32cc1&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance with columns=500&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance with columns=500&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93838258-ef0c-4817-971e-35015bd396c8&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance with iccprofile=yes&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI Should retrieve DICOM instance with iccprofile=yes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;${param}=${value}`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8135bfe6-03a2-4326-98b7-bd543ad0917f&quot;,&quot;parentUUID&quot;:&quot;cb1d6434-6519-4b74-b2cf-649bd7316cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5e617c4c-6715-4618-a05c-1ca687d01438&quot;,&quot;title&quot;:&quot;windowing&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-URI\\retrieveInstanceWadoUri.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-URI\\retrieveInstanceWadoUri.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve instance with param windowing&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI windowing Should retrieve instance with param windowing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;windowCenter=100&amp;windowWidth=200`\n});\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8a62ed3-aa35-4bde-8533-f0fe063f972c&quot;,&quot;parentUUID&quot;:&quot;5e617c4c-6715-4618-a05c-1ca687d01438&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 when missing windowCenter&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI windowing Should raise 400 when missing windowCenter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;windowWidth=200`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ea60236-d069-405d-996e-e0bd6eb26b05&quot;,&quot;parentUUID&quot;:&quot;5e617c4c-6715-4618-a05c-1ca687d01438&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 when missing windowWidth&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI windowing Should raise 400 when missing windowWidth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;windowCenter=200`\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e6b2400-5523-470e-857f-3800dbc366d1&quot;,&quot;parentUUID&quot;:&quot;5e617c4c-6715-4618-a05c-1ca687d01438&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8a62ed3-aa35-4bde-8533-f0fe063f972c&quot;,&quot;3ea60236-d069-405d-996e-e0bd6eb26b05&quot;,&quot;0e6b2400-5523-470e-857f-3800dbc366d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;12a9af70-714b-4fd3-8a2b-a1029a412d85&quot;,&quot;title&quot;:&quot;param &#x27;region&#x27; error cases&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-URI\\retrieveInstanceWadoUri.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-URI\\retrieveInstanceWadoUri.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when region is not have complete values&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI param &#x27;region&#x27; error cases Should raise 400 (Bad Request) when region is not have complete values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;region=0.1,0.1,1`\n});\n    \nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2838e210-cd4c-4622-8459-ce9a6b6e7cac&quot;,&quot;parentUUID&quot;:&quot;12a9af70-714b-4fd3-8a2b-a1029a412d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when region is not between 0 and 1&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI param &#x27;region&#x27; error cases Should raise 400 (Bad Request) when region is not between 0 and 1&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;region=0.1,0.1,1,100`\n});\n    \nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bcc4bc7-7aff-43c2-9e43-8ebded7bd86b&quot;,&quot;parentUUID&quot;:&quot;12a9af70-714b-4fd3-8a2b-a1029a412d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when xMin &gt; xMax&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI param &#x27;region&#x27; error cases Should raise 400 (Bad Request) when xMin &gt; xMax&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;region=1,0.1,0.5,1`\n});\n    \nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b21635e-8b3a-449b-93d1-d44fd7eb93b6&quot;,&quot;parentUUID&quot;:&quot;12a9af70-714b-4fd3-8a2b-a1029a412d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when yMin &gt; yMax&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI param &#x27;region&#x27; error cases Should raise 400 (Bad Request) when yMin &gt; yMax&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;contentType=image/jpeg&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;region=0.1,1,1,0.5`\n});\n    \nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f611a1d9-0118-4501-90ee-df334ce6621c&quot;,&quot;parentUUID&quot;:&quot;12a9af70-714b-4fd3-8a2b-a1029a412d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2838e210-cd4c-4622-8459-ce9a6b6e7cac&quot;,&quot;5bcc4bc7-7aff-43c2-9e43-8ebded7bd86b&quot;,&quot;3b21635e-8b3a-449b-93d1-d44fd7eb93b6&quot;,&quot;f611a1d9-0118-4501-90ee-df334ce6621c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;76bcec73-8fcc-4d07-a194-0237a79ca10b&quot;,&quot;8b435b6a-a136-4517-841f-505f97a6953c&quot;,&quot;f6200790-97a2-41cf-96f2-5f041b9242ad&quot;,&quot;336ac2bc-e31a-4d7b-bcfd-1c8735df083f&quot;,&quot;97781c5b-3ed6-4667-9b10-bac79d2b0731&quot;,&quot;7033f666-0a78-4f8f-9df8-cf91e5a32cc1&quot;,&quot;93838258-ef0c-4817-971e-35015bd396c8&quot;,&quot;8135bfe6-03a2-4326-98b7-bd543ad0917f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:653,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;767e710a-c7ef-4001-853c-33a914d5d60a&quot;,&quot;title&quot;:&quot;retrieve study-series-instances using WADO-URI with user&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\dicom-web\\WADO-URI\\withUser\\retrieveInstanceWadoUriWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\dicom-web\\WADO-URI\\withUser\\retrieveInstanceWadoUriWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;retrieve study-series-instances using WADO-URI with user\&quot;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI with user \&quot;before all\&quot; hook in \&quot;retrieve study-series-instances using WADO-URI with user\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:131,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nconst testDicomFile = resolve(__dirname, \&quot;../../../../testData/dicomFiles/jpeg2000/example-jpeg-2000.dcm\&quot;);\nawait storeInstanceWithUserForTest(testDicomFile, TEST_USERS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90fbb85c-45ba-4349-80da-6c22afe90303&quot;,&quot;parentUUID&quot;:&quot;767e710a-c7ef-4001-853c-33a914d5d60a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should retrieve DICOM instance with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI with user Should retrieve DICOM instance with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;contentType=application/dicom`,\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait RetrieveSingleInstanceController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7683cd7-d976-4287-9d77-310b06cb2614&quot;,&quot;parentUUID&quot;:&quot;767e710a-c7ef-4001-853c-33a914d5d60a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not retrieve DICOM instance with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI with user Should not retrieve DICOM instance with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;contentType=application/dicom`,\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait RetrieveSingleInstanceController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af968021-48cd-4ba8-8b62-b61e82285819&quot;,&quot;parentUUID&quot;:&quot;767e710a-c7ef-4001-853c-33a914d5d60a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should retrieve DICOM instance&#x27;s JPEG with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI with user Should retrieve DICOM instance&#x27;s JPEG with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;contentType=image/jpeg`,\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait RetrieveSingleInstanceController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0909dafa-e4d6-4ef4-9966-8e7e573573b2&quot;,&quot;parentUUID&quot;:&quot;767e710a-c7ef-4001-853c-33a914d5d60a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not retrieve DICOM instance&#x27;s JPEG with user &#x27;oTest&#x27;&quot;,&quot;fullTitle&quot;:&quot;retrieve study-series-instances using WADO-URI with user Should not retrieve DICOM instance&#x27;s JPEG with user &#x27;oTest&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/wado?requestType=WADO&amp;studyUID=${STUDY_UID}&amp;seriesUID=${SERIES_UID}&amp;objectUID=${INSTANCE_UID}&amp;contentType=image/jpeg`,\n    headers: {\n        \&quot;host\&quot;: \&quot;localhost:8080\&quot;\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait RetrieveSingleInstanceController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d535bb4c-28eb-4c43-a554-2357dea7d911&quot;,&quot;parentUUID&quot;:&quot;767e710a-c7ef-4001-853c-33a914d5d60a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7683cd7-d976-4287-9d77-310b06cb2614&quot;,&quot;af968021-48cd-4ba8-8b62-b61e82285819&quot;,&quot;0909dafa-e4d6-4ef4-9966-8e7e573573b2&quot;,&quot;d535bb4c-28eb-4c43-a554-2357dea7d911&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:121,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;642b4ba1-11f4-4556-b09a-fb64357b70c7&quot;,&quot;title&quot;:&quot;Convert DICOM to FHIR &#x27;/fhir-convert&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\fhir-convert\\convertDicomToFhir.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\fhir-convert\\convertDicomToFhir.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Convert DICOM to FHIR &#x27;/fhir-convert&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Convert DICOM to FHIR &#x27;/fhir-convert&#x27; \&quot;before all\&quot; hook in \&quot;Convert DICOM to FHIR &#x27;/fhir-convert&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85150d6b-7f7c-4b61-9c7a-e16ec053450d&quot;,&quot;parentUUID&quot;:&quot;642b4ba1-11f4-4556-b09a-fb64357b70c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should convert DICOM to FHIR&quot;,&quot;fullTitle&quot;:&quot;Convert DICOM to FHIR &#x27;/fhir-convert&#x27; Should convert DICOM to FHIR&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const myForm = formAutoContent({\n    file: createReadStream(\n        resolve(__dirname, \&quot;../../testData/forStore/1-01-mod-vo-updated\&quot;)\n    )\n});\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/fhir-convert\&quot;,\n    ...myForm\n});\nexpect(response.statusCode).to.equal(200);\nlet data = await response.json();\nexpect(data).to.have.property(\&quot;patient\&quot;);\nexpect(data.patient).to.have.property(\&quot;resourceType\&quot;).to.be.equal(\&quot;Patient\&quot;);\nexpect(data).to.have.property(\&quot;imagingStudy\&quot;);\nexpect(data.imagingStudy).to.have.property(\&quot;resourceType\&quot;).to.be.equal(\&quot;ImagingStudy\&quot;);\nexpect(data).to.have.property(\&quot;endpoint\&quot;);\nexpect(data.endpoint).to.have.property(\&quot;resourceType\&quot;).to.be.equal(\&quot;Endpoint\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5194566e-72b4-4123-bef7-4e2f6c9669c2&quot;,&quot;parentUUID&quot;:&quot;642b4ba1-11f4-4556-b09a-fb64357b70c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when missing DICOM file&quot;,&quot;fullTitle&quot;:&quot;Convert DICOM to FHIR &#x27;/fhir-convert&#x27; Should raise 400 (Bad Request) when missing DICOM file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/fhir-convert\&quot;\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19f8dc96-0cb1-42d1-9965-bdccdd50b8cb&quot;,&quot;parentUUID&quot;:&quot;642b4ba1-11f4-4556-b09a-fb64357b70c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5194566e-72b4-4123-bef7-4e2f6c9669c2&quot;,&quot;19f8dc96-0cb1-42d1-9965-bdccdd50b8cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;47a82f1c-3ea6-489c-9ede-bf611db7a641&quot;,&quot;title&quot;:&quot;Label create label for image &#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\createLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\createLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label create label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label create label for image &#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label create label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1857,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7de6083a-8b3c-47d2-99dd-dbe4e293610b&quot;,&quot;parentUUID&quot;:&quot;47a82f1c-3ea6-489c-9ede-bf611db7a641&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create label&quot;,&quot;fullTitle&quot;:&quot;Label create label for image &#x27;/label/:uid&#x27; Should create label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(201);\nlet createdLabel = await response.json();\nexpect(createdLabel).have.property(\&quot;uid\&quot;).to.be.equal(STUDY_UID);\nexpect(createdLabel)\n.have.property(\&quot;label\&quot;);\nexpect(createdLabel.label)\n.have.property(\&quot;name\&quot;)\n.to.be.equal(\&quot;test\&quot;);\nexpect(createdLabel.label)\n.have.property(\&quot;color\&quot;)\n.to.be.equal(\&quot;blue\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07dae378-0a95-403e-baa3-6b7cbb370f23&quot;,&quot;parentUUID&quot;:&quot;47a82f1c-3ea6-489c-9ede-bf611db7a641&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when image not found&quot;,&quot;fullTitle&quot;:&quot;Label create label for image &#x27;/label/:uid&#x27; Should raise 404 (Not Found) when image not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}2486`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c69fcc24-39e9-4624-acb5-5b8b37a2a5e5&quot;,&quot;parentUUID&quot;:&quot;47a82f1c-3ea6-489c-9ede-bf611db7a641&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when label already exists&quot;,&quot;fullTitle&quot;:&quot;Label create label for image &#x27;/label/:uid&#x27; Should raise 400 (Bad Request) when label already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58da2d96-1bda-482b-a778-0a8868af420c&quot;,&quot;parentUUID&quot;:&quot;47a82f1c-3ea6-489c-9ede-bf611db7a641&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07dae378-0a95-403e-baa3-6b7cbb370f23&quot;,&quot;c69fcc24-39e9-4624-acb5-5b8b37a2a5e5&quot;,&quot;58da2d96-1bda-482b-a778-0a8868af420c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;b660d58d-d711-486d-a954-f9a55c069f08&quot;,&quot;title&quot;:&quot;Label delete label for image &#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\deleteLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\deleteLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label delete label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label delete label for image &#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label delete label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1895,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(201);\nlet createdLabel = await response.json();\nlabelID = createdLabel.label.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2f1a18e-ce8f-454e-ba43-d182d9e5cedf&quot;,&quot;parentUUID&quot;:&quot;b660d58d-d711-486d-a954-f9a55c069f08&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete label&quot;,&quot;fullTitle&quot;:&quot;Label delete label for image &#x27;/label/:uid&#x27; Should delete label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/label/${STUDY_UID}/${labelID}`\n});\nexpect(response.statusCode).to.equal(200);\nlet deleteResult = await response.json();\nexpect(deleteResult).to.have.property(\&quot;deleteStatus\&quot;).to.be.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea59adde-e63d-445a-b91e-151cd137b1a6&quot;,&quot;parentUUID&quot;:&quot;b660d58d-d711-486d-a954-f9a55c069f08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when label or image not found&quot;,&quot;fullTitle&quot;:&quot;Label delete label for image &#x27;/label/:uid&#x27; Should raise 404 (Not Found) when label or image not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/label/${STUDY_UID}/2486`\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e95a1296-68e8-4226-bec2-4fe89da9d1e7&quot;,&quot;parentUUID&quot;:&quot;b660d58d-d711-486d-a954-f9a55c069f08&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea59adde-e63d-445a-b91e-151cd137b1a6&quot;,&quot;e95a1296-68e8-4226-bec2-4fe89da9d1e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;028132af-1c90-4398-b3ec-07acde123713&quot;,&quot;title&quot;:&quot;Label get label for image &#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\getLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\getLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label get label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label get label for image &#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label get label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1728,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7003d08a-388d-4086-9818-912b2c09ea29&quot;,&quot;parentUUID&quot;:&quot;028132af-1c90-4398-b3ec-07acde123713&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should get label by specified uid&quot;,&quot;fullTitle&quot;:&quot;Label get label for image &#x27;/label/:uid&#x27; Should get label by specified uid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Accept\&quot;: \&quot;application/json\&quot;\n    }\n});\nexpect(response.statusCode).to.equal(200);\nlet labels = await response.json();\nexpect(labels).to.be.an(\&quot;array\&quot;);\nexpect(labels).have.lengthOf(1);\nlet label = labels[0];\nexpect(label).have.property(\&quot;uid\&quot;).to.be.equal(STUDY_UID);\nexpect(label)\n.have.property(\&quot;label\&quot;);\nexpect(label.label)\n.have.property(\&quot;name\&quot;)\n.to.be.equal(\&quot;test\&quot;);\nexpect(label.label)\n.have.property(\&quot;color\&quot;)\n.to.be.equal(\&quot;blue\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09f5f3bd-0ded-45d3-add8-0b0102d64bea&quot;,&quot;parentUUID&quot;:&quot;028132af-1c90-4398-b3ec-07acde123713&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09f5f3bd-0ded-45d3-add8-0b0102d64bea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6a607f68-0af7-44bc-95ec-d5ea5d8640b5&quot;,&quot;title&quot;:&quot;Label update label for image &#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\updateLabel.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\updateLabel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label update label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label update label for image &#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label update label for image &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1728,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nlet response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(201);\nlet createdLabel = await response.json();\nlabelID = createdLabel.label.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;225bf7a1-79c7-4bbc-83f0-2905b72a58db&quot;,&quot;parentUUID&quot;:&quot;6a607f68-0af7-44bc-95ec-d5ea5d8640b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should update label&quot;,&quot;fullTitle&quot;:&quot;Label update label for image &#x27;/label/:uid&#x27; Should update label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/label/${STUDY_UID}/${labelID}`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test-updated\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(200);\nlet updatedLabel = await response.json();\nexpect(updatedLabel).have.property(\&quot;uid\&quot;).to.be.equal(STUDY_UID);\nexpect(updatedLabel)\n.have.property(\&quot;label\&quot;);\nexpect(updatedLabel.label)\n.have.property(\&quot;name\&quot;)\n.to.be.equal(\&quot;test-updated\&quot;);\nexpect(updatedLabel.label)\n.have.property(\&quot;color\&quot;)\n.to.be.equal(\&quot;blue\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ad93104-3917-4810-97ab-1b2fd1d65c0c&quot;,&quot;parentUUID&quot;:&quot;6a607f68-0af7-44bc-95ec-d5ea5d8640b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when label or image not found&quot;,&quot;fullTitle&quot;:&quot;Label update label for image &#x27;/label/:uid&#x27; Should raise 404 (Not Found) when label or image not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;PUT\&quot;,\n    url: `/label/${STUDY_UID}/2486`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/json\&quot;\n    },\n    payload: JSON.stringify({\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    })\n});\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad622984-1de3-4e6e-8354-cbea59ab1d3b&quot;,&quot;parentUUID&quot;:&quot;6a607f68-0af7-44bc-95ec-d5ea5d8640b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ad93104-3917-4810-97ab-1b2fd1d65c0c&quot;,&quot;ad622984-1de3-4e6e-8354-cbea59ab1d3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2a99087f-f1f8-4a0e-bdd5-8b2b6cba1e4c&quot;,&quot;title&quot;:&quot;Label create label for image with user &#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\withUser\\createLabelWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\withUser\\createLabelWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label create label for image with user &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label create label for image with user &#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label create label for image with user &#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1831,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\n\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../testData/dicomFiles\&quot;),\n    absolute: true\n});\nfor (let dicomFile of testDicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;321eafbc-046a-4cde-ae09-f1a91bdffb34&quot;,&quot;parentUUID&quot;:&quot;2a99087f-f1f8-4a0e-bdd5-8b2b6cba1e4c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create label with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Label create label for image with user &#x27;/label/:uid&#x27; Should create label with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    params: {\n        uid: STUDY_UID\n    },\n    body: {\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateLabelController(request, response);\nexpect(response.statusCode).to.equal(201);\n\nlet createdLabel = response._getJSONData();\nexpect(createdLabel).to.have.property(\&quot;uid\&quot;).to.equal(STUDY_UID);\nexpect(createdLabel).to.have.property(\&quot;label\&quot;);\nexpect(createdLabel.label).to.have.property(\&quot;name\&quot;).to.equal(\&quot;test\&quot;);\nexpect(createdLabel.label).to.have.property(\&quot;color\&quot;).to.equal(\&quot;blue\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d89d022f-dc6e-464e-809c-47ff0eb916dd&quot;,&quot;parentUUID&quot;:&quot;2a99087f-f1f8-4a0e-bdd5-8b2b6cba1e4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d89d022f-dc6e-464e-809c-47ff0eb916dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;87bb6d36-fa83-434a-8e26-4e365bae9cde&quot;,&quot;title&quot;:&quot;Label delete label for image with user&#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\withUser\\deleteLabelWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\withUser\\deleteLabelWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label delete label for image with user&#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label delete label for image with user&#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label delete label for image with user&#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1758,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../testData/dicomFiles\&quot;),\n    absolute: true\n});\nfor (let dicomFile of testDicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    params: {\n        uid: STUDY_UID\n    },\n    body: {\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateLabelController(request, response);\nlet createdLabel = response._getJSONData();\nlabelID = createdLabel.label.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31ec07d9-474a-4041-9828-efa8f24b4c82&quot;,&quot;parentUUID&quot;:&quot;87bb6d36-fa83-434a-8e26-4e365bae9cde&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete label with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Label delete label for image with user&#x27;/label/:uid&#x27; Should delete label with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;DELETE\&quot;,\n    url: `/label/${STUDY_UID}/${labelID}`,\n    params: {\n        uid: STUDY_UID,\n        labelID: labelID\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait DeleteLabelController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet deleteResult = response._getJSONData();\nexpect(deleteResult).to.have.property(\&quot;deleteStatus\&quot;).to.be.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5940a40-c28b-463e-992f-5d463c590add&quot;,&quot;parentUUID&quot;:&quot;87bb6d36-fa83-434a-8e26-4e365bae9cde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27; when study uid not found&quot;,&quot;fullTitle&quot;:&quot;Label delete label for image with user&#x27;/label/:uid&#x27; Should return 404 with user &#x27;oTest&#x27; when study uid not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;DELETE\&quot;,\n    url: `/label/${STUDY_UID}/${labelID}`,\n    params: {\n        uid: STUDY_UID,\n        labelID: labelID\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait DeleteLabelController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf80c4a6-e08c-4108-9173-108018487f12&quot;,&quot;parentUUID&quot;:&quot;87bb6d36-fa83-434a-8e26-4e365bae9cde&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a5940a40-c28b-463e-992f-5d463c590add&quot;,&quot;cf80c4a6-e08c-4108-9173-108018487f12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3b8abc3e-77cc-4582-bf08-f7919d5da541&quot;,&quot;title&quot;:&quot;Label get label for image with user&#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\withUser\\getLabelWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\withUser\\getLabelWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label get label for image with user&#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label get label for image with user&#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label get label for image with user&#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1690,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../testData/dicomFiles\&quot;),\n    absolute: true\n});\nfor (let dicomFile of testDicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    params: {\n        uid: STUDY_UID\n    },\n    body: {\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateLabelController(request, response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f94d3e11-a603-442a-a923-89f6f24b0504&quot;,&quot;parentUUID&quot;:&quot;3b8abc3e-77cc-4582-bf08-f7919d5da541&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should get label with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Label get label for image with user&#x27;/label/:uid&#x27; Should get label with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/label/${STUDY_UID}`,\n    params: {\n        uid: STUDY_UID\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetLabelController(request, response);\nexpect(response.statusCode).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e19f50a9-f5a9-4d3e-aef9-c5576194ee09&quot;,&quot;parentUUID&quot;:&quot;3b8abc3e-77cc-4582-bf08-f7919d5da541&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27; when study uid not found&quot;,&quot;fullTitle&quot;:&quot;Label get label for image with user&#x27;/label/:uid&#x27; Should return 404 with user &#x27;oTest&#x27; when study uid not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: `/label/${STUDY_UID}`,\n    params: {\n        uid: STUDY_UID\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait GetLabelController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e09bab5-3337-46a5-9d3c-6945498af6d8&quot;,&quot;parentUUID&quot;:&quot;3b8abc3e-77cc-4582-bf08-f7919d5da541&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e19f50a9-f5a9-4d3e-aef9-c5576194ee09&quot;,&quot;8e09bab5-3337-46a5-9d3c-6945498af6d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;80ea3413-7cf0-4ad5-97ec-b98725086dd7&quot;,&quot;title&quot;:&quot;Label update label for image with user&#x27;/label/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\label\\withUser\\updateLabelWithUser.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\label\\withUser\\updateLabelWithUser.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Label update label for image with user&#x27;/label/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;Label update label for image with user&#x27;/label/:uid&#x27; \&quot;before all\&quot; hook in \&quot;Label update label for image with user&#x27;/label/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1749,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet testDicomFiles = glob.sync(\&quot;**/*.dcm\&quot;, {\n    cwd: resolve(__dirname, \&quot;../../../testData/dicomFiles\&quot;),\n    absolute: true\n});\nfor (let dicomFile of testDicomFiles) {\n    await storeInstanceWithUserForTest(dicomFile, TEST_USERS[0]);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: `/label/${STUDY_UID}`,\n    params: {\n        uid: STUDY_UID\n    },\n    body: {\n        label: {\n            name: \&quot;test\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateLabelController(request, response);\nlet createdLabel = response._getJSONData();\nlabelID = createdLabel.label.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2038ed7-3773-49c6-bed3-0f31bc6dfa98&quot;,&quot;parentUUID&quot;:&quot;80ea3413-7cf0-4ad5-97ec-b98725086dd7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should update label with user &#x27;test&#x27;&quot;,&quot;fullTitle&quot;:&quot;Label update label for image with user&#x27;/label/:uid&#x27; Should update label with user &#x27;test&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;PUT\&quot;,\n    url: `/label/${STUDY_UID}/${labelID}`,\n    params: {\n        uid: STUDY_UID,\n        labelID: labelID\n    },\n    body: {\n        label: {\n            name: \&quot;test-updated\&quot;,\n            color: \&quot;blue\&quot;\n        }\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait UpdateLabelController(request, response);\nexpect(response.statusCode).to.equal(200);\nlet updatedLabel = response._getJSONData();\nexpect(updatedLabel).have.property(\&quot;uid\&quot;).to.be.equal(STUDY_UID);\nexpect(updatedLabel).have.property(\&quot;label\&quot;);\nexpect(updatedLabel.label).have.property(\&quot;name\&quot;).to.be.equal(\&quot;test-updated\&quot;);\nexpect(updatedLabel.label).have.property(\&quot;color\&quot;).to.be.equal(\&quot;blue\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b062de4-2987-43cf-9102-43d91d7e56e0&quot;,&quot;parentUUID&quot;:&quot;80ea3413-7cf0-4ad5-97ec-b98725086dd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 404 with user &#x27;oTest&#x27; when study uid not found&quot;,&quot;fullTitle&quot;:&quot;Label update label for image with user&#x27;/label/:uid&#x27; Should return 404 with user &#x27;oTest&#x27; when study uid not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;PUT\&quot;,\n    url: `/label/${STUDY_UID}/${labelID}`,\n    params: {\n        uid: STUDY_UID,\n        labelID: labelID\n    },\n    user: TEST_USERS[2]\n});\nlet response = createResponse();\nawait UpdateLabelController(request, response);\nexpect(response.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b038c622-1236-4006-80bb-390c43e5e2a2&quot;,&quot;parentUUID&quot;:&quot;80ea3413-7cf0-4ad5-97ec-b98725086dd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b062de4-2987-43cf-9102-43d91d7e56e0&quot;,&quot;b038c622-1236-4006-80bb-390c43e5e2a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3f5d74e2-6354-4601-9381-434e9b581675&quot;,&quot;title&quot;:&quot;basicAuth Middleware&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\middleware\\basicAuth.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\middleware\\basicAuth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;basicAuth Middleware\&quot;&quot;,&quot;fullTitle&quot;:&quot;basicAuth Middleware \&quot;before each\&quot; hook in \&quot;basicAuth Middleware\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = {\n    headers: {}\n};\nres = {};\nnext = () =&gt; {};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b79567b0-1567-4888-bea5-73af1f90a475&quot;,&quot;parentUUID&quot;:&quot;3f5d74e2-6354-4601-9381-434e9b581675&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should call next when there is no authorization header&quot;,&quot;fullTitle&quot;:&quot;basicAuth Middleware Should call next when there is no authorization header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let nextCalled = false;\nnext = () =&gt; { nextCalled = true; };\nbasicAuth(req, res, next);\nexpect(nextCalled).to.be.true;\nexpect(req.user).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07fc5b7b-8277-40bf-85d6-d10d0a30f5ca&quot;,&quot;parentUUID&quot;:&quot;3f5d74e2-6354-4601-9381-434e9b581675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should set req.user when providing correct system admin credentials&quot;,&quot;fullTitle&quot;:&quot;basicAuth Middleware Should set req.user when providing correct system admin credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = Buffer.from(&#x27;admin:password123&#x27;).toString(&#x27;base64&#x27;);\nreq.headers.authorization = `Basic ${credentials}`;\n\nlet nextCalled = false;\nnext = () =&gt; { nextCalled = true; };\nbasicAuth(req, res, next);\n\nexpect(nextCalled).to.be.true;\nexpect(req.user).to.deep.equal({\n    username: &#x27;admin&#x27;,\n    role: &#x27;system-admin&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5bbc98c-bb61-4d0d-9ad8-9890ebced358&quot;,&quot;parentUUID&quot;:&quot;3f5d74e2-6354-4601-9381-434e9b581675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not set req.user when providing incorrect credentials&quot;,&quot;fullTitle&quot;:&quot;basicAuth Middleware Should not set req.user when providing incorrect credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = Buffer.from(&#x27;wrong:credentials&#x27;).toString(&#x27;base64&#x27;);\nreq.headers.authorization = `Basic ${credentials}`;\n\nlet nextCalled = false;\nnext = () =&gt; { nextCalled = true; };\nbasicAuth(req, res, next);\n\nexpect(nextCalled).to.be.true;\nexpect(req.user).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e7148ff-7cd9-4a82-94b5-1a05e9f9f524&quot;,&quot;parentUUID&quot;:&quot;3f5d74e2-6354-4601-9381-434e9b581675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should not set req.user when Basic Auth format is incorrect&quot;,&quot;fullTitle&quot;:&quot;basicAuth Middleware Should not set req.user when Basic Auth format is incorrect&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.headers.authorization = &#x27;InvalidFormat&#x27;;\n\nlet nextCalled = false;\nnext = () =&gt; { nextCalled = true; };\nbasicAuth(req, res, next);\n\nexpect(nextCalled).to.be.true;\nexpect(req.user).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f288d2f-e997-4176-93dd-7a5d8d8c3159&quot;,&quot;parentUUID&quot;:&quot;3f5d74e2-6354-4601-9381-434e9b581675&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07fc5b7b-8277-40bf-85d6-d10d0a30f5ca&quot;,&quot;d5bbc98c-bb61-4d0d-9ad8-9890ebced358&quot;,&quot;2e7148ff-7cd9-4a82-94b5-1a05e9f9f524&quot;,&quot;9f288d2f-e997-4176-93dd-7a5d8d8c3159&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;4d5618bb-db49-4094-9add-132609891dbb&quot;,&quot;title&quot;:&quot;Create user config&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\user-config\\createUserConfig.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\user-config\\createUserConfig.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Create user config\&quot;&quot;,&quot;fullTitle&quot;:&quot;Create user config \&quot;before all\&quot; hook in \&quot;Create user config\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a52a5f26-bb51-4478-ba4e-96b3014804c9&quot;,&quot;parentUUID&quot;:&quot;4d5618bb-db49-4094-9add-132609891dbb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should create user config successfully&quot;,&quot;fullTitle&quot;:&quot;Create user config Should create user config successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: \&quot;/user-config\&quot;,\n    body: {\n        enabledModalityWorkList: true\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateUserConfigController(request, response);\nexpect(response.statusCode).to.be.equal(201);\nlet result = response._getJSONData();\n\nexpect(result).to\n.have.property(\&quot;config\&quot;)\n.have.property(\&quot;enabledModalityWorkList\&quot;)\n.to.be.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1173bbbe-5ef6-4b71-902a-7503857ec3f0&quot;,&quot;parentUUID&quot;:&quot;4d5618bb-db49-4094-9add-132609891dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1173bbbe-5ef6-4b71-902a-7503857ec3f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f6014279-fa48-49ba-8967-84bd5b416966&quot;,&quot;title&quot;:&quot;Get user config&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\user-config\\getUserConfig.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\user-config\\getUserConfig.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Get user config\&quot;&quot;,&quot;fullTitle&quot;:&quot;Get user config \&quot;before all\&quot; hook in \&quot;Get user config\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\n\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: \&quot;/user-config\&quot;,\n    body: {\n        enabledModalityWorkList: true\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateUserConfigController(request, response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a04ec5a7-c626-45f3-863c-779f939a37bb&quot;,&quot;parentUUID&quot;:&quot;f6014279-fa48-49ba-8967-84bd5b416966&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should get user config successfully&quot;,&quot;fullTitle&quot;:&quot;Get user config Should get user config successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;GET\&quot;,\n    url: \&quot;/user-config\&quot;,\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait GetUserConfigController(request, response);\nexpect(response.statusCode).to.be.equal(200);\nlet result = response._getJSONData();\n\nexpect(result).to\n.have.property(\&quot;config\&quot;)\n.have.property(\&quot;enabledModalityWorkList\&quot;)\n.to.be.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bc54bd8-02c9-4633-9025-33fd554a1b4a&quot;,&quot;parentUUID&quot;:&quot;f6014279-fa48-49ba-8967-84bd5b416966&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bc54bd8-02c9-4633-9025-33fd554a1b4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e6264113-50df-4c61-bfa6-213f0b882c53&quot;,&quot;title&quot;:&quot;Update user config&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\api\\user-config\\updateUserConfig.test.js&quot;,&quot;file&quot;:&quot;\\test\\api\\user-config\\updateUserConfig.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Update user config\&quot;&quot;,&quot;fullTitle&quot;:&quot;Update user config \&quot;before all\&quot; hook in \&quot;Update user config\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nfor (let user of TEST_USERS) {\n    await TenantUserModel.createTenantUser(user);\n}\nlet request = createRequest({\n    method: \&quot;POST\&quot;,\n    url: \&quot;/user-config\&quot;,\n    body: {\n        enabledModalityWorkList: true\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait CreateUserConfigController(request, response);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbba1c40-cbd5-4218-a32a-ffa821d6cbf3&quot;,&quot;parentUUID&quot;:&quot;e6264113-50df-4c61-bfa6-213f0b882c53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should update user config successfully&quot;,&quot;fullTitle&quot;:&quot;Update user config Should update user config successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let request = createRequest({\n    method: \&quot;PUT\&quot;,\n    url: \&quot;/user-config\&quot;,\n    body: {\n        enabledModalityWorkList: false\n    },\n    user: TEST_USERS[0]\n});\nlet response = createResponse();\nawait UpdateUserConfigController(request, response);\nlet result = response._getJSONData();\n\nexpect(result).to\n.have.property(\&quot;config\&quot;)\n.have.property(\&quot;enabledModalityWorkList\&quot;)\n.to.be.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d12d5dee-6c86-4b9b-81ad-a2378b1ec634&quot;,&quot;parentUUID&quot;:&quot;e6264113-50df-4c61-bfa6-213f0b882c53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d12d5dee-6c86-4b9b-81ad-a2378b1ec634&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;title&quot;:&quot;Delete DICOM Instances by SOPInstanceUID&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete DICOM Instances by SOPInstanceUID\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID \&quot;before all\&quot; hook in \&quot;Delete DICOM Instances by SOPInstanceUID\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1651,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd4c0619-6674-44b7-a00b-2d825297acbd&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise error if not using POST &#x27;delete-with-reason&#x27; first&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise error if not using POST &#x27;delete-with-reason&#x27; first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/${sopInstanceUid}`\n});\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;897ce767-b4ef-4ebd-a6d3-23bb17d7ed42&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) using undo delete when instance fine&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise 400 (Bad Request) using undo delete when instance fine&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/${sopInstanceUid}/undoDelete`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64583f07-f57a-4a5e-a991-bc79e5b4e1c2&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) if instance not found when using &#x27;delete-with-reason&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise 404 (Not Found) if instance not found when using &#x27;delete-with-reason&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/${sopInstanceUid}2486/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nexpect(response.statusCode).to.be.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfe94351-0f68-4278-8ccc-37715adf696b&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when using delete with param &#x27;deleteStatus&#x27; at instance level&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise 400 (Bad Request) when using delete with param &#x27;deleteStatus&#x27; at instance level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/${sopInstanceUid}?deleteStatus=1`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d1bd696-4f02-4d8b-a787-3e9bf487a3b6&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete instance with reason and expect 4 instances in series&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should delete instance with reason and expect 4 instances in series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonBySopInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15e7523d-345b-49d0-b70e-1e43cdda5d97&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when instance already deleted with reason&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise 400 (Bad Request) when instance already deleted with reason&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/${sopInstanceUid}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc5ca690-6898-4ed3-af24-c81bb23e69f1&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should expect 3 series in study because of delete with instance&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should expect 3 series in study because of delete with instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;series\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e7ecef2-9776-4fdf-baed-4202c40e6a2f&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should expect 4 studies because of delete with instance&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should expect 4 studies because of delete with instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {},\n    params: {},\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;study\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c47358e4-6422-476e-9d50-98f4c594e648&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 400 (Bad Request) when using undo delete with param &#x27;deleteStatus&#x27;&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise 400 (Bad Request) when using undo delete with param &#x27;deleteStatus&#x27;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/${sopInstanceUid}/undoDelete?deleteStatus=1`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    }\n});\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bd4a5a9-6777-4b61-9fbd-b712f3003e2c&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete instance and expect 5 instances in series&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should undo delete instance and expect 5 instances in series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await undoDeleteBySopInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12744f0b-ead0-42fe-9917-76877ea98e0e&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete instance using study level and expect 5 instances in series&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should undo delete instance using study level and expect 5 instances in series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonBySopInstanceUid();\nawait undoDeleteByStudyInstanceUid({ deleteStatus: 1 });\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fea7e78a-2f13-4c80-b23f-33d9f0e28fc8&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete series using series level and expect 5 instances in series&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should undo delete series using series level and expect 5 instances in series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonBySopInstanceUid();\nawait undoDeleteBySeriesInstanceUid({ deleteStatus: 1 });\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1166fd1-d46d-43b7-91d5-1339f1b95343&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when instance not exists&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUID Should raise 404 (Not Found) when instance not exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/1/series/2/instances/3/undoDelete`\n});\nexpect(response.statusCode).to.be.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fb827aa-e458-4465-905c-619a83e942f1&quot;,&quot;parentUUID&quot;:&quot;3b614237-95d5-4b2a-9639-b4b5e67ad3bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;897ce767-b4ef-4ebd-a6d3-23bb17d7ed42&quot;,&quot;64583f07-f57a-4a5e-a991-bc79e5b4e1c2&quot;,&quot;dfe94351-0f68-4278-8ccc-37715adf696b&quot;,&quot;9d1bd696-4f02-4d8b-a787-3e9bf487a3b6&quot;,&quot;15e7523d-345b-49d0-b70e-1e43cdda5d97&quot;,&quot;dc5ca690-6898-4ed3-af24-c81bb23e69f1&quot;,&quot;8e7ecef2-9776-4fdf-baed-4202c40e6a2f&quot;,&quot;c47358e4-6422-476e-9d50-98f4c594e648&quot;,&quot;8bd4a5a9-6777-4b61-9fbd-b712f3003e2c&quot;,&quot;12744f0b-ead0-42fe-9917-76877ea98e0e&quot;,&quot;fea7e78a-2f13-4c80-b23f-33d9f0e28fc8&quot;,&quot;a1166fd1-d46d-43b7-91d5-1339f1b95343&quot;,&quot;0fb827aa-e458-4465-905c-619a83e942f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:146,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9130e839-750b-488e-85aa-14e8dc3b9198&quot;,&quot;title&quot;:&quot;Delete DICOM Instance using specified delete status with study level&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Delete DICOM Instance using specified delete status with study level\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instance using specified delete status with study level \&quot;after all\&quot; hook in \&quot;Delete DICOM Instance using specified delete status with study level\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await undoDeleteBySopInstanceUid();\nawait undoDeleteBySopInstanceUid();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ce74f26-98b5-4b4d-9319-a4d607fed204&quot;,&quot;parentUUID&quot;:&quot;9130e839-750b-488e-85aa-14e8dc3b9198&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should move instance to waiting permanently queue using specified delete status&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instance using specified delete status with study level Should move instance to waiting permanently queue using specified delete status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonBySopInstanceUid();\nawait deleteByStudyInstanceUid({ deleteStatus: 1 });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32d318db-8be2-45a1-9ae6-9326824d0705&quot;,&quot;parentUUID&quot;:&quot;9130e839-750b-488e-85aa-14e8dc3b9198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 4 instances when query with delete status = 0 (NONE)&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instance using specified delete status with study level Should return 4 instances when query with delete status = 0 (NONE)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;326b1331-3372-42b7-bae5-e7608899ad6a&quot;,&quot;parentUUID&quot;:&quot;9130e839-750b-488e-85aa-14e8dc3b9198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 0 instances when query with delete status = 1 (RECYCLE)&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instance using specified delete status with study level Should return 0 instances when query with delete status = 1 (RECYCLE)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.RECYCLE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f67a761-9f92-4753-b210-226ac8c1e813&quot;,&quot;parentUUID&quot;:&quot;9130e839-750b-488e-85aa-14e8dc3b9198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 1 instance when query with delete status = 2 (PERMANENT_QUEUE)&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instance using specified delete status with study level Should return 1 instance when query with delete status = 2 (PERMANENT_QUEUE)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.PERMANENT_QUEUE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8629bcb1-ad99-43a8-8223-150e1c58e2f4&quot;,&quot;parentUUID&quot;:&quot;9130e839-750b-488e-85aa-14e8dc3b9198&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;32d318db-8be2-45a1-9ae6-9326824d0705&quot;,&quot;326b1331-3372-42b7-bae5-e7608899ad6a&quot;,&quot;7f67a761-9f92-4753-b210-226ac8c1e813&quot;,&quot;8629bcb1-ad99-43a8-8223-150e1c58e2f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;7033a32e-9efb-4267-85b3-87284c8bc1d3&quot;,&quot;title&quot;:&quot;Delete DICOM Instances by SeriesInstanceUID&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise error if not using POST &#x27;delete-with-reason&#x27; first&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SeriesInstanceUID Should raise error if not using POST &#x27;delete-with-reason&#x27; first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}`\n});\n\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9d48bf8-6e1e-44c3-abb0-6012d7bbca56&quot;,&quot;parentUUID&quot;:&quot;7033a32e-9efb-4267-85b3-87284c8bc1d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete series with reason and expect 2 series in study&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SeriesInstanceUID Should delete series with reason and expect 2 series in study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonBySeriesInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;series\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a1c2202-c7d6-4be6-84b6-e69407e89499&quot;,&quot;parentUUID&quot;:&quot;7033a32e-9efb-4267-85b3-87284c8bc1d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete series and expect 3 series in study&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SeriesInstanceUID Should undo delete series and expect 3 series in study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await undoDeleteBySeriesInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;series\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0007f34-ba00-4c3a-afbf-48bada4976c2&quot;,&quot;parentUUID&quot;:&quot;7033a32e-9efb-4267-85b3-87284c8bc1d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete instances and expect 3 series in study&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SeriesInstanceUID Should undo delete instances and expect 3 series in study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonBySeriesInstanceUid();\nawait undoDeleteBySeriesInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;series\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15ae8497-28ff-46ad-a446-3d842f1eb203&quot;,&quot;parentUUID&quot;:&quot;7033a32e-9efb-4267-85b3-87284c8bc1d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d9d48bf8-6e1e-44c3-abb0-6012d7bbca56&quot;,&quot;2a1c2202-c7d6-4be6-84b6-e69407e89499&quot;,&quot;d0007f34-ba00-4c3a-afbf-48bada4976c2&quot;,&quot;15ae8497-28ff-46ad-a446-3d842f1eb203&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e8372c3d-f108-4f45-98c6-3ff388dc2200&quot;,&quot;title&quot;:&quot;Delete DICOM Instances by SOPInstanceUIDs&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete all instances to recycle bin and expect 2 series&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUIDs Should delete all instances to recycle bin and expect 2 series&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;for (let instanceUid of instanceUidsInSeries) {\n    await deleteWithReasonBySopInstanceUid(instanceUid);\n}\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {\n        studyUID: studyInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;series\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af3427d2-1820-4d41-8ee4-b64d28029db0&quot;,&quot;parentUUID&quot;:&quot;e8372c3d-f108-4f45-98c6-3ff388dc2200&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete all instances to waiting permanently delete using series level deletion&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by SOPInstanceUIDs Should delete all instances to waiting permanently delete using series level deletion&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteBySeriesInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.PERMANENT_QUEUE\n    },\n    params: {\n        studyUID: studyInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;series\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2261499d-bfa6-4213-bf74-d99fcd3c7d1b&quot;,&quot;parentUUID&quot;:&quot;e8372c3d-f108-4f45-98c6-3ff388dc2200&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af3427d2-1820-4d41-8ee4-b64d28029db0&quot;,&quot;2261499d-bfa6-4213-bf74-d99fcd3c7d1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:61,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;39efb171-5b43-4bbe-9cd4-e769f84fef64&quot;,&quot;title&quot;:&quot;Delete DICOM Instances by StudyInstanceUID&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete DICOM Instances by StudyInstanceUID\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by StudyInstanceUID \&quot;before all\&quot; hook in \&quot;Delete DICOM Instances by StudyInstanceUID\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// revert delete\nawait undoDeleteBySeriesInstanceUid();\nawait undoDeleteBySeriesInstanceUid();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb81c5f1-c167-472f-916f-390bc4abed76&quot;,&quot;parentUUID&quot;:&quot;39efb171-5b43-4bbe-9cd4-e769f84fef64&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should raise error if not using POST &#x27;delete-with-reason&#x27; first&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by StudyInstanceUID Should raise error if not using POST &#x27;delete-with-reason&#x27; first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}`\n});\nexpect(response.statusCode).to.be.equal(400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a37a503-9b02-4089-8758-62212b751e39&quot;,&quot;parentUUID&quot;:&quot;39efb171-5b43-4bbe-9cd4-e769f84fef64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete study with reason and expect 3 studies&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by StudyInstanceUID Should delete study with reason and expect 3 studies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonByStudyInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {},\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;study\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20375ddf-7ba9-437a-8526-3d76465e4d10&quot;,&quot;parentUUID&quot;:&quot;39efb171-5b43-4bbe-9cd4-e769f84fef64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete study and expect 4 studies&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by StudyInstanceUID Should undo delete study and expect 4 studies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await undoDeleteByStudyInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {},\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;study\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4e4e0d7-b14e-48ec-843d-1fd8222c2e8e&quot;,&quot;parentUUID&quot;:&quot;39efb171-5b43-4bbe-9cd4-e769f84fef64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should undo delete instances and expect 4 studies&quot;,&quot;fullTitle&quot;:&quot;Delete DICOM Instances by StudyInstanceUID Should undo delete instances and expect 4 studies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonByStudyInstanceUid();\nawait undoDeleteBySopInstanceUid();\nlet qidoRsService = new QidoRsService({\n    query: {},\n    params: {},\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;study\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;141e79fc-683b-4c61-b213-60957e16e971&quot;,&quot;parentUUID&quot;:&quot;39efb171-5b43-4bbe-9cd4-e769f84fef64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a37a503-9b02-4089-8758-62212b751e39&quot;,&quot;20375ddf-7ba9-437a-8526-3d76465e4d10&quot;,&quot;f4e4e0d7-b14e-48ec-843d-1fd8222c2e8e&quot;,&quot;141e79fc-683b-4c61-b213-60957e16e971&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:70,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f942755a-6f24-4dc7-909e-15f9d84146c2&quot;,&quot;title&quot;:&quot;Delete Study to recycle status&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Delete Study to recycle status\&quot;&quot;,&quot;fullTitle&quot;:&quot;Delete Study to recycle status \&quot;before all\&quot; hook in \&quot;Delete Study to recycle status\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await undoDeleteByStudyInstanceUid({ deleteStatus: 1 });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56411509-0a9d-4179-821a-2e905fdfdfc9&quot;,&quot;parentUUID&quot;:&quot;f942755a-6f24-4dc7-909e-15f9d84146c2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should delete with reason successfully&quot;,&quot;fullTitle&quot;:&quot;Delete Study to recycle status Should delete with reason successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteWithReasonByStudyInstanceUid();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59a54f01-e8f9-4e6f-8ef3-e34c2672631b&quot;,&quot;parentUUID&quot;:&quot;f942755a-6f24-4dc7-909e-15f9d84146c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return 1 study when search with recycle status&quot;,&quot;fullTitle&quot;:&quot;Delete Study to recycle status Should return 1 study when search with recycle status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.RECYCLE\n    },\n    params: {},\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;study\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60b19999-2c8d-4292-a6fd-a54b1f4e3b60&quot;,&quot;parentUUID&quot;:&quot;f942755a-6f24-4dc7-909e-15f9d84146c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should automatically move 1 study to waiting delete status after 5 seconds&quot;,&quot;fullTitle&quot;:&quot;Delete Study to recycle status Should automatically move 1 study to waiting delete status after 5 seconds&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6018,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await sleep(6000);\nlet qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.PERMANENT_QUEUE\n    },\n    params: {},\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;study\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8912ced-3b05-4997-8bab-34b2a9933a4e&quot;,&quot;parentUUID&quot;:&quot;f942755a-6f24-4dc7-909e-15f9d84146c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59a54f01-e8f9-4e6f-8ef3-e34c2672631b&quot;,&quot;60b19999-2c8d-4292-a6fd-a54b1f4e3b60&quot;,&quot;e8912ced-3b05-4997-8bab-34b2a9933a4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6032,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;title&quot;:&quot;Delete Permanently&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should have files in disk before delete&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should have files in disk before delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;for (let i = 0 ; i &lt; instanceUidsInSeries.length ; i++) {\n    let instancePath = path.join(\n        raccoonConfig.dicomWebConfig.storeRootPath,\n        `files/2010/02/${shortHash(studyInstanceUid)}/${shortHash(seriesInstanceUid)}/${instanceUidsInSeries[i]}.dcm`\n    );\n    expect(fs.existsSync(instancePath)).to.be.true;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa62fc76-9297-4a36-8c64-b14626d46bf2&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should have 5 instances when query before delete&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should have 5 instances when query before delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.PERMANENT_QUEUE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a4f7a5a-c6d7-45f4-b684-4e5f1aeaae15&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should raise 404 (Not Found) when instance not found&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should raise 404 (Not Found) when instance not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;DELETE\&quot;,\n    url: `/dicom-web/studies/${studyInstanceUid}/series/${seriesInstanceUid}/instances/2486`\n});\nexpect(response.statusCode).to.be.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cae0efd6-2fb6-480e-bd64-c9fb88afa5e0&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete 4 instances permanently (total: 5)&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should delete 4 instances permanently (total: 5)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;for (let i = 0 ; i &lt; instanceUidsInSeries.length - 1 ; i++) {\n    await deleteBySopInstanceUid(instanceUidsInSeries[i]);\n    let instancePath = path.join(\n        raccoonConfig.dicomWebConfig.storeRootPath,\n        `files/2010/02/${shortHash(studyInstanceUid)}/${shortHash(seriesInstanceUid)}/${instanceUidsInSeries[i]}.dcm`\n    );\n    expect(fs.existsSync(instancePath)).to.be.false;\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82d79d16-1a0f-4afe-8108-5dda0d72c468&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should have one instance when query&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should have one instance when query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.PERMANENT_QUEUE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f2ad1b7-6fbd-488d-80e8-da65576f71f7&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should delete 1 instance permanently and remove series because it is empty&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should delete 1 instance permanently and remove series because it is empty&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteBySopInstanceUid(instanceUidsInSeries[instanceUidsInSeries.length - 1]);\nlet instancePath = path.join(\n    raccoonConfig.dicomWebConfig.storeRootPath,\n    `files/2010/02/${shortHash(studyInstanceUid)}/${shortHash(seriesInstanceUid)}/${instanceUidsInSeries[instanceUidsInSeries.length - 1]}.dcm`\n);\nlet seriesPath = path.join(\n    raccoonConfig.dicomWebConfig.storeRootPath,\n    `files/2010/02/${shortHash(studyInstanceUid)}/${shortHash(seriesInstanceUid)}`\n);\nexpect(fs.existsSync(instancePath)).to.be.false;\nexpect(fs.existsSync(seriesPath)).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1caff37e-35da-4c79-9b42-5973c373056a&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should return empty when query after delete&quot;,&quot;fullTitle&quot;:&quot;Delete Permanently Should return empty when query after delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let qidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.NONE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\nlet dicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(0);\nqidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.RECYCLE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\ndicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(0);\nqidoRsService = new QidoRsService({\n    query: {\n        deleteStatus: DICOM_INSTANCE_DELETE_STATUS.PERMANENT_QUEUE\n    },\n    params: {\n        studyUID: studyInstanceUid,\n        seriesUID: seriesInstanceUid\n    },\n    headers: {\n        host: \&quot;test-host\&quot;\n    }\n}, {}, \&quot;instance\&quot;);\ndicomJson = await qidoRsService.getDicomJson();\nexpect(dicomJson).have.lengthOf(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1fc9b16-58e0-4aea-85ff-a8e91f9f5939&quot;,&quot;parentUUID&quot;:&quot;cbb94dbd-f08a-4704-9aa4-d7c1500dcb88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa62fc76-9297-4a36-8c64-b14626d46bf2&quot;,&quot;7a4f7a5a-c6d7-45f4-b684-4e5f1aeaae15&quot;,&quot;cae0efd6-2fb6-480e-bd64-c9fb88afa5e0&quot;,&quot;82d79d16-1a0f-4afe-8108-5dda0d72c468&quot;,&quot;4f2ad1b7-6fbd-488d-80e8-da65576f71f7&quot;,&quot;1caff37e-35da-4c79-9b42-5973c373056a&quot;,&quot;d1fc9b16-58e0-4aea-85ff-a8e91f9f5939&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;060b779e-b2b8-4a9e-b740-d3fea23fd243&quot;,&quot;title&quot;:&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\delete002.test.js&quot;,&quot;file&quot;:&quot;\\test\\delete002.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again\&quot;&quot;,&quot;fullTitle&quot;:&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again \&quot;before all\&quot; hook in \&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2616,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;562c40fc-7f26-4a50-b8ab-6d61d4fc18a6&quot;,&quot;parentUUID&quot;:&quot;060b779e-b2b8-4a9e-b740-d3fea23fd243&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Delete Series A&quot;,&quot;fullTitle&quot;:&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Delete Series A&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.deleteWithReasonBySeriesInstanceUid(app, STUDY_INSTANCE_UID, SERIES_INSTANCE_UIDS[0]);\nlet deleteReason = await DicomInstanceDeleteReasonModel.findReasonByUid(SERIES_INSTANCE_UIDS[0]);\nexpect(deleteReason).not.to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b008e876-4e1b-44b4-aee8-46241c8a4ec7&quot;,&quot;parentUUID&quot;:&quot;060b779e-b2b8-4a9e-b740-d3fea23fd243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete Series B&quot;,&quot;fullTitle&quot;:&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Delete Series B&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.deleteWithReasonBySeriesInstanceUid(app, STUDY_INSTANCE_UID, SERIES_INSTANCE_UIDS[1]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f930115-7928-4f3e-8835-ae0af716e5ec&quot;,&quot;parentUUID&quot;:&quot;060b779e-b2b8-4a9e-b740-d3fea23fd243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Recover Series A&quot;,&quot;fullTitle&quot;:&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Recover Series A&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.undoDeleteBySeriesInstanceUid(app, STUDY_INSTANCE_UID, SERIES_INSTANCE_UIDS[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bf26f8b-6e90-4eea-9b81-84e60e6e0d69&quot;,&quot;parentUUID&quot;:&quot;060b779e-b2b8-4a9e-b740-d3fea23fd243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete Series B Again&quot;,&quot;fullTitle&quot;:&quot;Series A, B, C: Delete A, Delete B, Recover A, Delete B Again Delete Series B Again&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await TestDeleteUtils.deleteBySeriesInstanceUid(app, STUDY_INSTANCE_UID, SERIES_INSTANCE_UIDS[1]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2082aa4b-14eb-41fa-91e1-963c48e2656e&quot;,&quot;parentUUID&quot;:&quot;060b779e-b2b8-4a9e-b740-d3fea23fd243&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b008e876-4e1b-44b4-aee8-46241c8a4ec7&quot;,&quot;6f930115-7928-4f3e-8835-ae0af716e5ec&quot;,&quot;5bf26f8b-6e90-4eea-9b81-84e60e6e0d69&quot;,&quot;2082aa4b-14eb-41fa-91e1-963c48e2656e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;031ecc40-fd52-4dab-99c9-3f9e08a34376&quot;,&quot;title&quot;:&quot;DIMSE C-FIND Study-Series-Instance&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Study-Series-Instance\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance \&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Study-Series-Instance\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:207,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../testData/dicomFiles/1-01-mod-vo\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b76f099d-181b-4bdb-9c3f-89a020ee4de9&quot;,&quot;parentUUID&quot;:&quot;031ecc40-fd52-4dab-99c9-3f9e08a34376&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DIMSE C-FIND Study-Series-Instance\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance \&quot;after all\&quot; hook in \&quot;DIMSE C-FIND Study-Series-Instance\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;432b4b31-6f3b-4c23-b236-a8ff257f72ed&quot;,&quot;parentUUID&quot;:&quot;031ecc40-fd52-4dab-99c9-3f9e08a34376&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find 1 instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance Should find 1 instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 1 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 2 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3042e61-c50b-4dda-83cc-bd9d3314770a&quot;,&quot;parentUUID&quot;:&quot;031ecc40-fd52-4dab-99c9-3f9e08a34376&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;62794ca5-63f9-4116-a233-62c6fce926c6&quot;,&quot;title&quot;:&quot;find with a filter&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fcbf481c-32a3-4ed2-9ef5-0524bcde4c7c&quot;,&quot;title&quot;:&quot;query instances with &#x27;SOPClassUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series-Instance with SOPClassUID=1.2.840.10008.5.1.4.1.1.4 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;SOPClassUID&#x27; Should find Study-Series-Instance with SOPClassUID=1.2.840.10008.5.1.4.1.1.4 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:97,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4f5ebd6-9368-4342-8f31-9d20f3180698&quot;,&quot;parentUUID&quot;:&quot;fcbf481c-32a3-4ed2-9ef5-0524bcde4c7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series-Instance with SOPClassUID=foobar and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;SOPClassUID&#x27; Should find Study-Series-Instance with SOPClassUID=foobar and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c94cf368-0ff6-4aed-9490-9d2cbe991499&quot;,&quot;parentUUID&quot;:&quot;fcbf481c-32a3-4ed2-9ef5-0524bcde4c7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c4f5ebd6-9368-4342-8f31-9d20f3180698&quot;,&quot;c94cf368-0ff6-4aed-9490-9d2cbe991499&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:186,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c44bfbfa-0ee0-484c-aaa6-6d17b355e17d&quot;,&quot;title&quot;:&quot;query instances with &#x27;SOPInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series-Instance with SOPInstanceUID=1.2.276.0.7230010.3.1.4.2304755699.3648.1691733220.920 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;SOPInstanceUID&#x27; Should find Study-Series-Instance with SOPInstanceUID=1.2.276.0.7230010.3.1.4.2304755699.3648.1691733220.920 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82138ebc-258b-4079-8eb3-456f5bcbf26e&quot;,&quot;parentUUID&quot;:&quot;c44bfbfa-0ee0-484c-aaa6-6d17b355e17d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series-Instance with SOPInstanceUID=foobar and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;SOPInstanceUID&#x27; Should find Study-Series-Instance with SOPInstanceUID=foobar and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5cbc38e-717d-4aee-9f56-d1029097d413&quot;,&quot;parentUUID&quot;:&quot;c44bfbfa-0ee0-484c-aaa6-6d17b355e17d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;82138ebc-258b-4079-8eb3-456f5bcbf26e&quot;,&quot;a5cbc38e-717d-4aee-9f56-d1029097d413&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;36152898-5a62-4702-9ca2-b78aa2b0088b&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentDate&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series-Instance with ContentDate=20090721 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;ContentDate Should find Study-Series-Instance with ContentDate=20090721 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc9bdbca-b95f-4306-9d01-5dd3ea5630f0&quot;,&quot;parentUUID&quot;:&quot;36152898-5a62-4702-9ca2-b78aa2b0088b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series-Instance with ContentDate=20090101 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;ContentDate Should find Study-Series-Instance with ContentDate=20090101 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f888924-932e-46a4-86bc-91efc3ed09c5&quot;,&quot;parentUUID&quot;:&quot;36152898-5a62-4702-9ca2-b78aa2b0088b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc9bdbca-b95f-4306-9d01-5dd3ea5630f0&quot;,&quot;0f888924-932e-46a4-86bc-91efc3ed09c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:175,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;28e44dad-7317-42f5-a479-b5bb5a7d8cc9&quot;,&quot;title&quot;:&quot;query instances with &#x27;ContentTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series-Instance with ContentTime=115519.159000 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;ContentTime&#x27; Should find Study-Series-Instance with ContentTime=115519.159000 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3916309-aa19-4a7e-8940-67a81c4319e4&quot;,&quot;parentUUID&quot;:&quot;28e44dad-7317-42f5-a479-b5bb5a7d8cc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series-Instance with ContentTime=115518 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;ContentTime&#x27; Should find Study-Series-Instance with ContentTime=115518 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:200,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;650ecf48-2941-4430-922d-bee512c2b7eb&quot;,&quot;parentUUID&quot;:&quot;28e44dad-7317-42f5-a479-b5bb5a7d8cc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3916309-aa19-4a7e-8940-67a81c4319e4&quot;,&quot;650ecf48-2941-4430-922d-bee512c2b7eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:316,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;305a420c-6e0f-47bd-b6cd-0c41079f5bd0&quot;,&quot;title&quot;:&quot;query instances with &#x27;InstanceNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series-Instance with InstanceNumber=224 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;InstanceNumber&#x27; Should find Study-Series-Instance with InstanceNumber=224 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dd6ad35-de43-4ddd-811d-cac0f090202d&quot;,&quot;parentUUID&quot;:&quot;305a420c-6e0f-47bd-b6cd-0c41079f5bd0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series-Instance with InstanceNumber=1 and get instance successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series-Instance find with a filter query instances with &#x27;InstanceNumber&#x27; Should find Study-Series-Instance with InstanceNumber=1 and get instance successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToInstanceLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(\&quot;SeriesInstanceUID\&quot;, SERIES_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd.join(\&quot; \&quot;));\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83740d9e-5776-42ce-954d-919bac759c19&quot;,&quot;parentUUID&quot;:&quot;305a420c-6e0f-47bd-b6cd-0c41079f5bd0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5dd6ad35-de43-4ddd-811d-cac0f090202d&quot;,&quot;83740d9e-5776-42ce-954d-919bac759c19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:183,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;e3042e61-c50b-4dda-83cc-bd9d3314770a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6d91e714-549a-4b92-9047-58a81c72061f&quot;,&quot;title&quot;:&quot;DIMSE C-FIND MWL&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-FIND MWL\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL \&quot;before all\&quot; hook in \&quot;DIMSE C-FIND MWL\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1744,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/mwlitems\&quot;,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    body: JSON.stringify([testMwlItem])\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32122c2e-2112-4eb4-97b1-85e83bd84071&quot;,&quot;parentUUID&quot;:&quot;6d91e714-549a-4b92-9047-58a81c72061f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DIMSE C-FIND MWL\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL \&quot;after all\&quot; hook in \&quot;DIMSE C-FIND MWL\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdafbdc5-fc93-48f2-a33a-9683f7a16115&quot;,&quot;parentUUID&quot;:&quot;6d91e714-549a-4b92-9047-58a81c72061f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find 1 mwl successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL Should find 1 mwl successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, \&quot;\&quot;);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 1 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 2 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25dc1528-6461-4a4d-8fec-14ca17180963&quot;,&quot;parentUUID&quot;:&quot;6d91e714-549a-4b92-9047-58a81c72061f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;95902c3f-85ab-4d5c-a2f8-d4ec18910a13&quot;,&quot;title&quot;:&quot;find with a filter&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a378acb7-d99d-4255-9842-832cb5a7ccc0&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;StudyInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with StudyInstanceUID=1.2.276.0.7230010.3.2.102 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;StudyInstanceUID&#x27; Should find modality worklist with StudyInstanceUID=1.2.276.0.7230010.3.2.102 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb45ec54-bfca-4ed2-9126-283316b1b572&quot;,&quot;parentUUID&quot;:&quot;a378acb7-d99d-4255-9842-832cb5a7ccc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with StudyInstanceUID=1.2.3.4 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;StudyInstanceUID&#x27; Should find modality worklist with StudyInstanceUID=1.2.3.4 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;211de288-7e26-4169-8095-8d9e07bbfcb7&quot;,&quot;parentUUID&quot;:&quot;a378acb7-d99d-4255-9842-832cb5a7ccc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb45ec54-bfca-4ed2-9126-283316b1b572&quot;,&quot;211de288-7e26-4169-8095-8d9e07bbfcb7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:139,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c69fbb10-d578-4ab8-9d0a-66bf811eaf99&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;AccessionNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with AccessionNumber=acc-123456 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;AccessionNumber&#x27; Should find modality worklist with AccessionNumber=acc-123456 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a59024-d505-44b4-add6-3ebff8e959a1&quot;,&quot;parentUUID&quot;:&quot;c69fbb10-d578-4ab8-9d0a-66bf811eaf99&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with AccessionNumber=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;AccessionNumber&#x27; Should find modality worklist with AccessionNumber=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:67,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8ce9da9-0ea6-4ae3-977d-6bfd6929d30e&quot;,&quot;parentUUID&quot;:&quot;c69fbb10-d578-4ab8-9d0a-66bf811eaf99&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5a59024-d505-44b4-add6-3ebff8e959a1&quot;,&quot;c8ce9da9-0ea6-4ae3-977d-6bfd6929d30e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;85095416-a19f-47a9-a0eb-026ca41944a3&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;RequestedProcedureID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with RequestedProcedureID=RP488M9439 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;RequestedProcedureID&#x27; Should find modality worklist with RequestedProcedureID=RP488M9439 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b2e1e45-4039-477a-8ab1-7b34f591004c&quot;,&quot;parentUUID&quot;:&quot;85095416-a19f-47a9-a0eb-026ca41944a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with RequestedProcedureID=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;RequestedProcedureID&#x27; Should find modality worklist with RequestedProcedureID=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01785ddf-1718-4ad1-936b-c6d5d8738224&quot;,&quot;parentUUID&quot;:&quot;85095416-a19f-47a9-a0eb-026ca41944a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b2e1e45-4039-477a-8ab1-7b34f591004c&quot;,&quot;01785ddf-1718-4ad1-936b-c6d5d8738224&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;d798d4a1-da50-43e6-bd87-9db527e0299b&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;AdmissionID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with AdmissionID=A-987 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;AdmissionID&#x27; Should find modality worklist with AdmissionID=A-987 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc099ed2-1638-4d6e-92e7-6eab5124d399&quot;,&quot;parentUUID&quot;:&quot;d798d4a1-da50-43e6-bd87-9db527e0299b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with AdmissionID=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;AdmissionID&#x27; Should find modality worklist with AdmissionID=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457a3638-9a80-456e-9699-1fc82fec2f62&quot;,&quot;parentUUID&quot;:&quot;d798d4a1-da50-43e6-bd87-9db527e0299b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc099ed2-1638-4d6e-92e7-6eab5124d399&quot;,&quot;457a3638-9a80-456e-9699-1fc82fec2f62&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:139,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;ed8830ca-c122-4013-867b-c411da4909ef&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;InstitutionName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with InstitutionName=HELL and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;InstitutionName&#x27; Should find modality worklist with InstitutionName=HELL and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fac02f0e-8d1b-4659-bc86-ffa400e28edb&quot;,&quot;parentUUID&quot;:&quot;ed8830ca-c122-4013-867b-c411da4909ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with InstitutionName=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;InstitutionName&#x27; Should find modality worklist with InstitutionName=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b969f5a-e9d0-44e0-abf5-d2437106ae28&quot;,&quot;parentUUID&quot;:&quot;ed8830ca-c122-4013-867b-c411da4909ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fac02f0e-8d1b-4659-bc86-ffa400e28edb&quot;,&quot;6b969f5a-e9d0-44e0-abf5-d2437106ae28&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:140,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9713d932-b726-441b-a235-7d0af0b74c00&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;InstitutionalDepartmentName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with InstitutionalDepartmentName=FLOOR18 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;InstitutionalDepartmentName&#x27; Should find modality worklist with InstitutionalDepartmentName=FLOOR18 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb411405-a4cb-4e1e-b33a-f47f26844d36&quot;,&quot;parentUUID&quot;:&quot;9713d932-b726-441b-a235-7d0af0b74c00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with InstitutionalDepartmentName=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;InstitutionalDepartmentName&#x27; Should find modality worklist with InstitutionalDepartmentName=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;044c818d-cc7a-461b-9e83-63a02ac8e1f6&quot;,&quot;parentUUID&quot;:&quot;9713d932-b726-441b-a235-7d0af0b74c00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb411405-a4cb-4e1e-b33a-f47f26844d36&quot;,&quot;044c818d-cc7a-461b-9e83-63a02ac8e1f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:144,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;132bdc51-8699-49c8-ba14-c9ac538e2dbb&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledStationAETitle&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationAETitle=WORKLIST and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledStationAETitle&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationAETitle=WORKLIST and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abd2a814-c7cc-4481-b46e-be14bf4d039f&quot;,&quot;parentUUID&quot;:&quot;132bdc51-8699-49c8-ba14-c9ac538e2dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationAETitle=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledStationAETitle&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationAETitle=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:169,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba7a75b7-7ab9-4c97-97ea-ffcc3ea4a1b4&quot;,&quot;parentUUID&quot;:&quot;132bdc51-8699-49c8-ba14-c9ac538e2dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abd2a814-c7cc-4481-b46e-be14bf4d039f&quot;,&quot;ba7a75b7-7ab9-4c97-97ea-ffcc3ea4a1b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:242,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;616323aa-3ac9-46f7-8ed0-09da9b4c8662&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledStationName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationName=GG and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledStationName&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationName=GG and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91a04098-b01c-4678-b1f9-cf2a06e61c48&quot;,&quot;parentUUID&quot;:&quot;616323aa-3ac9-46f7-8ed0-09da9b4c8662&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationName=foobar and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledStationName&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledStationName=foobar and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;443cb230-a958-414b-8bfd-101dca0c643d&quot;,&quot;parentUUID&quot;:&quot;616323aa-3ac9-46f7-8ed0-09da9b4c8662&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91a04098-b01c-4678-b1f9-cf2a06e61c48&quot;,&quot;443cb230-a958-414b-8bfd-101dca0c643d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:143,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a294e3da-4460-4239-8b2f-5ea5839aca84&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate=20231021 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate=20231021 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f69b8fb3-6597-4d33-96cd-bed1db6f93cc&quot;,&quot;parentUUID&quot;:&quot;a294e3da-4460-4239-8b2f-5ea5839aca84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate=19990101 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartDate=19990101 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8114dce6-69e3-4324-b599-41bf65849040&quot;,&quot;parentUUID&quot;:&quot;a294e3da-4460-4239-8b2f-5ea5839aca84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f69b8fb3-6597-4d33-96cd-bed1db6f93cc&quot;,&quot;8114dce6-69e3-4324-b599-41bf65849040&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;f6f88284-c921-4548-b251-06ee0406092b&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate=20231212 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate=20231212 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0babfe67-2e97-485a-9cc6-e1574866d1a3&quot;,&quot;parentUUID&quot;:&quot;f6f88284-c921-4548-b251-06ee0406092b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate=19990101 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndDate=19990101 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fe2a734-a83d-4197-9d65-c19567018d96&quot;,&quot;parentUUID&quot;:&quot;f6f88284-c921-4548-b251-06ee0406092b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0babfe67-2e97-485a-9cc6-e1574866d1a3&quot;,&quot;2fe2a734-a83d-4197-9d65-c19567018d96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:143,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0799b19d-9588-46ec-adbb-d963a5aee7cd&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime=003525.475 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime=003525.475 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e2d9709-4357-48b8-a49f-d97529b412d8&quot;,&quot;parentUUID&quot;:&quot;0799b19d-9588-46ec-adbb-d963a5aee7cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime=013525 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStartTime=013525 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1acf563-172b-4426-86fe-94fb80c125ec&quot;,&quot;parentUUID&quot;:&quot;0799b19d-9588-46ec-adbb-d963a5aee7cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e2d9709-4357-48b8-a49f-d97529b412d8&quot;,&quot;e1acf563-172b-4426-86fe-94fb80c125ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;420eef53-31bf-407e-bad5-192c61184012&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime=123525.475 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime=123525.475 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;507bae58-53db-4549-bc38-33767a42514d&quot;,&quot;parentUUID&quot;:&quot;420eef53-31bf-407e-bad5-192c61184012&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime=003525 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepEndTime=003525 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84a9d7b9-9860-4eaf-8932-9f491de812b5&quot;,&quot;parentUUID&quot;:&quot;420eef53-31bf-407e-bad5-192c61184012&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;507bae58-53db-4549-bc38-33767a42514d&quot;,&quot;84a9d7b9-9860-4eaf-8932-9f491de812b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:138,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;a3352d76-02db-4988-8436-bdcbe68c65cc&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName=ENT00373 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName=ENT00373 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e70f1b-b66d-4d44-adcf-6b6c03ad7757&quot;,&quot;parentUUID&quot;:&quot;a3352d76-02db-4988-8436-bdcbe68c65cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName=ENT123 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledPerformingPhysicianName=ENT123 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:67,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1564680-f424-426e-a8f5-5124714646db&quot;,&quot;parentUUID&quot;:&quot;a3352d76-02db-4988-8436-bdcbe68c65cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8e70f1b-b66d-4d44-adcf-6b6c03ad7757&quot;,&quot;a1564680-f424-426e-a8f5-5124714646db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:147,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5d471068-c0d7-401e-bebd-dc1e7d2ba5cb&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription=EXAM-DESC and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription=EXAM-DESC and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abfd083f-5478-48b3-b2cc-9dd18c560bbf&quot;,&quot;parentUUID&quot;:&quot;5d471068-c0d7-401e-bebd-dc1e7d2ba5cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription=ENT123 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepDescription=ENT123 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a208ba8-88f0-41a1-bf52-23410d3ab1df&quot;,&quot;parentUUID&quot;:&quot;5d471068-c0d7-401e-bebd-dc1e7d2ba5cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abfd083f-5478-48b3-b2cc-9dd18c560bbf&quot;,&quot;4a208ba8-88f0-41a1-bf52-23410d3ab1df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:144,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2d197e6f-fa97-472b-9394-93315a8b5e3e&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepID=SPS-00000002 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepID&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepID=SPS-00000002 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;357a1871-cec3-4359-9636-49e547351be6&quot;,&quot;parentUUID&quot;:&quot;2d197e6f-fa97-472b-9394-93315a8b5e3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepID=ENT123 and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepID&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepID=ENT123 and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:67,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333902af-d055-4bee-9060-d605aa83b028&quot;,&quot;parentUUID&quot;:&quot;2d197e6f-fa97-472b-9394-93315a8b5e3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;357a1871-cec3-4359-9636-49e547351be6&quot;,&quot;333902af-d055-4bee-9060-d605aa83b028&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:139,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e2831e5d-0ed0-4a12-9cfa-4f751a9c1dc7&quot;,&quot;title&quot;:&quot;query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindMWL.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus=SCHEDULED and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus=SCHEDULED and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7909731-82a7-4870-85f2-dd78b9a12497&quot;,&quot;parentUUID&quot;:&quot;e2831e5d-0ed0-4a12-9cfa-4f751a9c1dc7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus=COMPLETED and get modality workitem successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND MWL find with a filter query modality worklist with param &#x27;ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus&#x27; Should find modality worklist with ScheduledProcedureStepSequence[0].ScheduledProcedureStepStatus=COMPLETED and get modality workitem successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToMwlLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nconsole.log(cmd);\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;306c186b-fe5f-4d1f-9cca-75eeab10723e&quot;,&quot;parentUUID&quot;:&quot;e2831e5d-0ed0-4a12-9cfa-4f751a9c1dc7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7909731-82a7-4870-85f2-dd78b9a12497&quot;,&quot;306c186b-fe5f-4d1f-9cca-75eeab10723e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:143,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;25dc1528-6461-4a4d-8fec-14ca17180963&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:74,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c6b3803f-6799-49b9-af79-99a77e68750d&quot;,&quot;title&quot;:&quot;DIMSE C-FIND Patient&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Patient\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient \&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Patient\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: \&quot;/dicom-web/patients\&quot;,\n    body: testPatient\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bd9abf5-da26-4dac-a33b-30ac4847ec67&quot;,&quot;parentUUID&quot;:&quot;c6b3803f-6799-49b9-af79-99a77e68750d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find patients&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient Should find patients&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 1 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 2 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4e337f1-1400-4ca0-8c5d-f803d2c920ae&quot;,&quot;parentUUID&quot;:&quot;c6b3803f-6799-49b9-af79-99a77e68750d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c3bfeb8c-d15f-4bb8-9b48-aafab95da017&quot;,&quot;title&quot;:&quot;find with a filter&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dae4a9ca-ae29-41cb-9e76-fa3718b0d3f3&quot;,&quot;title&quot;:&quot;find with filter &#x27;PatientName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find patient with PatientName=\&quot;John^Doe\&quot; and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientName&#x27; Should find patient with PatientName=\&quot;John^Doe\&quot; and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f58716d4-f181-44a3-8071-934b15357ea7&quot;,&quot;parentUUID&quot;:&quot;dae4a9ca-ae29-41cb-9e76-fa3718b0d3f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find patient with PatientName=foo and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientName&#x27; Should find patient with PatientName=foo and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13088739-c483-402b-9e0a-b6cfb94d4bb6&quot;,&quot;parentUUID&quot;:&quot;dae4a9ca-ae29-41cb-9e76-fa3718b0d3f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find patients with filter &#x27;PatientName=John*&amp;PatientName=*Doe&#x27; and get 1 patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientName&#x27; Should find patients with filter &#x27;PatientName=John*&amp;PatientName=*Doe&#x27; and get 1 patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel()\n    .addKeyAndValue(\&quot;PatientName\&quot;, \&quot;John*\&quot;)\n    .addKeyAndValue(\&quot;PatientName\&quot;, \&quot;*Doe\&quot;);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 1 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 2 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24862853-6b21-4091-ae5e-245c74c0e6b6&quot;,&quot;parentUUID&quot;:&quot;dae4a9ca-ae29-41cb-9e76-fa3718b0d3f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f58716d4-f181-44a3-8071-934b15357ea7&quot;,&quot;13088739-c483-402b-9e0a-b6cfb94d4bb6&quot;,&quot;24862853-6b21-4091-ae5e-245c74c0e6b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:194,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;91165d1c-8146-4a95-802f-402703e62aea&quot;,&quot;title&quot;:&quot;find with filter &#x27;PatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find patient with PatientID=12345 and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientID&#x27; Should find patient with PatientID=12345 and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0aee726f-99de-44b0-a9bf-f6da1e911b02&quot;,&quot;parentUUID&quot;:&quot;91165d1c-8146-4a95-802f-402703e62aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find patient with PatientID=foo and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientID&#x27; Should find patient with PatientID=foo and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b8dccaa-ce99-4a3a-91e6-4d922f328ad6&quot;,&quot;parentUUID&quot;:&quot;91165d1c-8146-4a95-802f-402703e62aea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0aee726f-99de-44b0-a9bf-f6da1e911b02&quot;,&quot;4b8dccaa-ce99-4a3a-91e6-4d922f328ad6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:125,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;50f29f90-7514-4a7b-ba9b-fdba2fff8a13&quot;,&quot;title&quot;:&quot;find with filter &#x27;PatientBirthDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindPatient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find patient with PatientBirthDate=19800101 and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientBirthDate&#x27; Should find patient with PatientBirthDate=19800101 and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54e29042-44a0-4208-846d-8cd179dd2b11&quot;,&quot;parentUUID&quot;:&quot;50f29f90-7514-4a7b-ba9b-fdba2fff8a13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find patient with PatientBirthDate=19800102 and get patient successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Patient find with a filter find with filter &#x27;PatientBirthDate&#x27; Should find patient with PatientBirthDate=19800102 and get patient successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToPatientLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;496ae146-572f-45e9-b4e7-fde6ce361da8&quot;,&quot;parentUUID&quot;:&quot;50f29f90-7514-4a7b-ba9b-fdba2fff8a13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54e29042-44a0-4208-846d-8cd179dd2b11&quot;,&quot;496ae146-572f-45e9-b4e7-fde6ce361da8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:125,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;a4e337f1-1400-4ca0-8c5d-f803d2c920ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;882f5926-f45e-4a42-95b9-73774412b4ab&quot;,&quot;title&quot;:&quot;DIMSE C-FIND Study-Series&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Study-Series\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series \&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Study-Series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait storeInstanceForTest(\n    resolve(__dirname, \&quot;../../testData/dicomFiles/1-01-mod-vo\&quot;)\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b644604b-3e79-4825-a5a7-4a397c5ac040&quot;,&quot;parentUUID&quot;:&quot;882f5926-f45e-4a42-95b9-73774412b4ab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DIMSE C-FIND Study-Series\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series \&quot;after all\&quot; hook in \&quot;DIMSE C-FIND Study-Series\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78b95965-f159-4890-a0ab-bb7148a9e0ae&quot;,&quot;parentUUID&quot;:&quot;882f5926-f45e-4a42-95b9-73774412b4ab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find 1 series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series Should find 1 series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 1 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 2 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b1d5319-9e3f-4c7b-9fea-269268b303ca&quot;,&quot;parentUUID&quot;:&quot;882f5926-f45e-4a42-95b9-73774412b4ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5141a033-b59a-4122-beef-3ed50706dc22&quot;,&quot;title&quot;:&quot;find with a filter&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9a2dcaea-89cc-41d8-a707-f2eb890531d2&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;Modality&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with Modality=MR and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;Modality&#x27; Should find Study-Series with Modality=MR and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd88471f-7c67-4477-9651-1b8e20c70035&quot;,&quot;parentUUID&quot;:&quot;9a2dcaea-89cc-41d8-a707-f2eb890531d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with Modality=DOC and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;Modality&#x27; Should find Study-Series with Modality=DOC and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41746f53-7240-4ff0-b434-e2eabd75ebc6&quot;,&quot;parentUUID&quot;:&quot;9a2dcaea-89cc-41d8-a707-f2eb890531d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd88471f-7c67-4477-9651-1b8e20c70035&quot;,&quot;41746f53-7240-4ff0-b434-e2eabd75ebc6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:163,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;cd60bd04-ccc8-4f0f-9c24-bdd5fc7c72fc&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with SeriesInstanceUID=1.3.6.1.4.1.14519.5.2.1.62266640231940987006694557463549207147 and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesInstanceUID&#x27; Should find Study-Series with SeriesInstanceUID=1.3.6.1.4.1.14519.5.2.1.62266640231940987006694557463549207147 and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7c23eb9-e765-4a19-9298-28a369b7d287&quot;,&quot;parentUUID&quot;:&quot;cd60bd04-ccc8-4f0f-9c24-bdd5fc7c72fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with SeriesInstanceUID=123456 and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesInstanceUID&#x27; Should find Study-Series with SeriesInstanceUID=123456 and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36b97b80-24fe-43c8-9f88-6832da3a4083&quot;,&quot;parentUUID&quot;:&quot;cd60bd04-ccc8-4f0f-9c24-bdd5fc7c72fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7c23eb9-e765-4a19-9298-28a369b7d287&quot;,&quot;36b97b80-24fe-43c8-9f88-6832da3a4083&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:160,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c3856bc0-11fc-46d1-8479-1ca02f39fd5b&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with SeriesNumber=13 and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesNumber&#x27; Should find Study-Series with SeriesNumber=13 and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b311290b-2dab-48a8-a9c9-d6ceec90d394&quot;,&quot;parentUUID&quot;:&quot;c3856bc0-11fc-46d1-8479-1ca02f39fd5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with SeriesNumber=1 and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesNumber&#x27; Should find Study-Series with SeriesNumber=1 and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3683999-e335-4c6c-bdf6-76b79e7edc87&quot;,&quot;parentUUID&quot;:&quot;c3856bc0-11fc-46d1-8479-1ca02f39fd5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b311290b-2dab-48a8-a9c9-d6ceec90d394&quot;,&quot;b3683999-e335-4c6c-bdf6-76b79e7edc87&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:154,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e9054abe-5264-425d-aa47-387deecbf628&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with SeriesDate=20090721 and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesDate&#x27; Should find Study-Series with SeriesDate=20090721 and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39dbe1e7-9317-49a3-85a9-289607b6a91b&quot;,&quot;parentUUID&quot;:&quot;e9054abe-5264-425d-aa47-387deecbf628&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with SeriesDate=19990101 and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesDate&#x27; Should find Study-Series with SeriesDate=19990101 and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78c642fb-6432-4d7c-95a6-02b673a95b9d&quot;,&quot;parentUUID&quot;:&quot;e9054abe-5264-425d-aa47-387deecbf628&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39dbe1e7-9317-49a3-85a9-289607b6a91b&quot;,&quot;78c642fb-6432-4d7c-95a6-02b673a95b9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:162,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;761629b6-79c2-4a84-8c8c-42125b014ca5&quot;,&quot;title&quot;:&quot;query study-series with param &#x27;SeriesDescription&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with SeriesDescription=*BRAIN* and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesDescription&#x27; Should find Study-Series with SeriesDescription=*BRAIN* and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07a240f0-fd5a-42f2-945f-e1a9d63f6c36&quot;,&quot;parentUUID&quot;:&quot;761629b6-79c2-4a84-8c8c-42125b014ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with SeriesDescription=*Capture* and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query study-series with param &#x27;SeriesDescription&#x27; Should find Study-Series with SeriesDescription=*Capture* and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a51e204-c229-45de-97c0-741ff92497b5&quot;,&quot;parentUUID&quot;:&quot;761629b6-79c2-4a84-8c8c-42125b014ca5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07a240f0-fd5a-42f2-945f-e1a9d63f6c36&quot;,&quot;9a51e204-c229-45de-97c0-741ff92497b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:156,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;faeab4e2-39d0-4d29-9227-6670d3e5ae85&quot;,&quot;title&quot;:&quot;query series with param &#x27;PerformingPhysicianName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with PerformingPhysicianName=cName and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query series with param &#x27;PerformingPhysicianName&#x27; Should find Study-Series with PerformingPhysicianName=cName and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bac8fdc-655f-4e04-9799-564e68d2a19a&quot;,&quot;parentUUID&quot;:&quot;faeab4e2-39d0-4d29-9227-6670d3e5ae85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with PerformingPhysicianName=dName and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query series with param &#x27;PerformingPhysicianName&#x27; Should find Study-Series with PerformingPhysicianName=dName and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7be36362-8c60-4a88-a75c-210e6e31a0b9&quot;,&quot;parentUUID&quot;:&quot;faeab4e2-39d0-4d29-9227-6670d3e5ae85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with PerformingPhysicianName=foobar and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query series with param &#x27;PerformingPhysicianName&#x27; Should find Study-Series with PerformingPhysicianName=foobar and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;773f42d1-ed87-4273-b5ae-0a3d78fd420b&quot;,&quot;parentUUID&quot;:&quot;faeab4e2-39d0-4d29-9227-6670d3e5ae85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8bac8fdc-655f-4e04-9799-564e68d2a19a&quot;,&quot;7be36362-8c60-4a88-a75c-210e6e31a0b9&quot;,&quot;773f42d1-ed87-4273-b5ae-0a3d78fd420b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:246,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;c76ac0ec-73d6-48ba-9991-576d6f6610cd&quot;,&quot;title&quot;:&quot;query series with param &#x27;OperatorsName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindSeries.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study-Series with OperatorsName=pyName and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query series with param &#x27;OperatorsName&#x27; Should find Study-Series with OperatorsName=pyName and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe41e75f-28e7-49f6-b991-28e74bcf4bd5&quot;,&quot;parentUUID&quot;:&quot;c76ac0ec-73d6-48ba-9991-576d6f6610cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with OperatorsName=py and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query series with param &#x27;OperatorsName&#x27; Should find Study-Series with OperatorsName=py and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5939c08d-f1a7-49f7-9b98-346297433905&quot;,&quot;parentUUID&quot;:&quot;c76ac0ec-73d6-48ba-9991-576d6f6610cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study-Series with OperatorsName=foobar and get series successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study-Series find with a filter query series with param &#x27;OperatorsName&#x27; Should find Study-Series with OperatorsName=foobar and get series successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToSeriesLevel();\nfindScuCmdBuilder.addKeyAndValue(\&quot;StudyInstanceUID\&quot;, STUDY_UID);\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a667758-c015-4a4d-82a3-0c5db10700b8&quot;,&quot;parentUUID&quot;:&quot;c76ac0ec-73d6-48ba-9991-576d6f6610cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe41e75f-28e7-49f6-b991-28e74bcf4bd5&quot;,&quot;5939c08d-f1a7-49f7-9b98-346297433905&quot;,&quot;6a667758-c015-4a4d-82a3-0c5db10700b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:244,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;2b1d5319-9e3f-4c7b-9fea-269268b303ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:79,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;5f7b5d05-a99f-421f-b2e9-8642e141b5ee&quot;,&quot;title&quot;:&quot;DIMSE C-FIND Study&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Study\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study \&quot;before all\&quot; hook in \&quot;DIMSE C-FIND Study\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1688,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4de22d03-a6c3-487a-8db9-524a95b8fdd7&quot;,&quot;parentUUID&quot;:&quot;5f7b5d05-a99f-421f-b2e9-8642e141b5ee&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DIMSE C-FIND Study\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study \&quot;after all\&quot; hook in \&quot;DIMSE C-FIND Study\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f2943bf-3ee6-416d-a151-20da8302e918&quot;,&quot;parentUUID&quot;:&quot;5f7b5d05-a99f-421f-b2e9-8642e141b5ee&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find 4 studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study Should find 4 studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:106,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 4 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 5 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbd54005-ec65-4862-8cc1-7276c06e288a&quot;,&quot;parentUUID&quot;:&quot;5f7b5d05-a99f-421f-b2e9-8642e141b5ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6c1046b6-9be5-431f-b6f2-f24bd4e39b55&quot;,&quot;title&quot;:&quot;find with a filter&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a55db279-6930-46aa-8952-dbe54ff0f859&quot;,&quot;title&quot;:&quot;find with filter &#x27;StudyDate&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with StudyDate=20100213 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyDate&#x27; Should find Study with StudyDate=20100213 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d4c8807-7e8d-4930-8657-29c256e4dad0&quot;,&quot;parentUUID&quot;:&quot;a55db279-6930-46aa-8952-dbe54ff0f859&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyDate=-20100213 and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyDate&#x27; Should find Study with StudyDate=-20100213 and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;622abfc4-40eb-4f0c-806f-975a35a23c80&quot;,&quot;parentUUID&quot;:&quot;a55db279-6930-46aa-8952-dbe54ff0f859&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyDate=20100101- and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyDate&#x27; Should find Study with StudyDate=20100101- and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e1252f5-8b4d-4f80-885a-fd6f4823aeef&quot;,&quot;parentUUID&quot;:&quot;a55db279-6930-46aa-8952-dbe54ff0f859&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyDate=20100212-20181031 and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyDate&#x27; Should find Study with StudyDate=20100212-20181031 and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa022719-dc01-44b4-96a7-b2c674d4ba92&quot;,&quot;parentUUID&quot;:&quot;a55db279-6930-46aa-8952-dbe54ff0f859&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d4c8807-7e8d-4930-8657-29c256e4dad0&quot;,&quot;622abfc4-40eb-4f0c-806f-975a35a23c80&quot;,&quot;6e1252f5-8b4d-4f80-885a-fd6f4823aeef&quot;,&quot;aa022719-dc01-44b4-96a7-b2c674d4ba92&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:380,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;802297a2-9d9b-4e5a-ba41-3278212392f2&quot;,&quot;title&quot;:&quot;find with filter &#x27;StudyTime&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with StudyTime=170922 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyTime&#x27; Should find Study with StudyTime=170922 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5918a12f-c983-4700-9aa1-d2eeec8560b8&quot;,&quot;parentUUID&quot;:&quot;802297a2-9d9b-4e5a-ba41-3278212392f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyTime=-170922 and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyTime&#x27; Should find Study with StudyTime=-170922 and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea6498ee-1615-438b-ab5a-8965ecb084a3&quot;,&quot;parentUUID&quot;:&quot;802297a2-9d9b-4e5a-ba41-3278212392f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyTime=150000- and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyTime&#x27; Should find Study with StudyTime=150000- and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eff8c094-38a4-4049-9009-550e905e3dce&quot;,&quot;parentUUID&quot;:&quot;802297a2-9d9b-4e5a-ba41-3278212392f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyTime=130000-160000 and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;StudyTime&#x27; Should find Study with StudyTime=130000-160000 and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05b17ecb-a94e-4a47-b25c-ead3a019b4f0&quot;,&quot;parentUUID&quot;:&quot;802297a2-9d9b-4e5a-ba41-3278212392f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5918a12f-c983-4700-9aa1-d2eeec8560b8&quot;,&quot;ea6498ee-1615-438b-ab5a-8965ecb084a3&quot;,&quot;eff8c094-38a4-4049-9009-550e905e3dce&quot;,&quot;05b17ecb-a94e-4a47-b25c-ead3a019b4f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:384,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;0b770dd5-e070-467f-842e-737d069ec238&quot;,&quot;title&quot;:&quot;find with filter &#x27;AccessionNumber&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with AccessionNumber=3266660953883852 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;AccessionNumber&#x27; Should find Study with AccessionNumber=3266660953883852 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ba7ad41-2e54-4257-b34d-6fd88736d174&quot;,&quot;parentUUID&quot;:&quot;0b770dd5-e070-467f-842e-737d069ec238&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with AccessionNumber=123456 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;AccessionNumber&#x27; Should find Study with AccessionNumber=123456 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e31ae359-8c8c-468c-8b0e-0babd1a8e108&quot;,&quot;parentUUID&quot;:&quot;0b770dd5-e070-467f-842e-737d069ec238&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ba7ad41-2e54-4257-b34d-6fd88736d174&quot;,&quot;e31ae359-8c8c-468c-8b0e-0babd1a8e108&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:167,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;34c80a59-c96f-4e5d-bf5e-1c094e6bb320&quot;,&quot;title&quot;:&quot;find with filter &#x27;ModalitiesInStudy&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with ModalitiesInStudy=CT and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;ModalitiesInStudy&#x27; Should find Study with ModalitiesInStudy=CT and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4767901-7564-46fe-b416-80bfb614458f&quot;,&quot;parentUUID&quot;:&quot;34c80a59-c96f-4e5d-bf5e-1c094e6bb320&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with ModalitiesInStudy=DOC and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter find with filter &#x27;ModalitiesInStudy&#x27; Should find Study with ModalitiesInStudy=DOC and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cb80473-1e9c-45ff-887b-a55789dac6cc&quot;,&quot;parentUUID&quot;:&quot;34c80a59-c96f-4e5d-bf5e-1c094e6bb320&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4767901-7564-46fe-b416-80bfb614458f&quot;,&quot;8cb80473-1e9c-45ff-887b-a55789dac6cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:173,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;04b95885-a3e6-4c92-bb6a-0719feaed922&quot;,&quot;title&quot;:&quot;query studies with param &#x27;PatientName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with PatientName=\&quot;Philips^Amy\&quot; and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientName&#x27; Should find Study with PatientName=\&quot;Philips^Amy\&quot; and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:180,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16780c5b-4c90-43e2-8aa3-fd07588df1c0&quot;,&quot;parentUUID&quot;:&quot;04b95885-a3e6-4c92-bb6a-0719feaed922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with PatientName=\&quot;Philips*\&quot; and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientName&#x27; Should find Study with PatientName=\&quot;Philips*\&quot; and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66afe317-dbc5-4770-b443-e75b221fac62&quot;,&quot;parentUUID&quot;:&quot;04b95885-a3e6-4c92-bb6a-0719feaed922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with PatientName=\&quot;foobar\&quot; and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientName&#x27; Should find Study with PatientName=\&quot;foobar\&quot; and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38c01e78-fb75-40da-8bb2-cc42ec936f8d&quot;,&quot;parentUUID&quot;:&quot;04b95885-a3e6-4c92-bb6a-0719feaed922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find studies with filter &#x27;PatientName=Philips*&amp;PatientName=*Amy&#x27; and get 1 study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientName&#x27; Should find studies with filter &#x27;PatientName=Philips*&amp;PatientName=*Amy&#x27; and get 1 study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel()\n    .addKeyAndValue(\&quot;PatientName\&quot;, `\&quot;Philips*\&quot;`)\n    .addKeyAndValue(\&quot;PatientName\&quot;, `\&quot;*Amy\&quot;`);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nexpect(message).have.string(\&quot;Find Response: 1 (Pending)\&quot;);\nexpect(message).not.have.string(\&quot;Find Response: 2 (Pending)\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2d3a597-edb3-4191-bbee-ea0194023b8f&quot;,&quot;parentUUID&quot;:&quot;04b95885-a3e6-4c92-bb6a-0719feaed922&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16780c5b-4c90-43e2-8aa3-fd07588df1c0&quot;,&quot;66afe317-dbc5-4770-b443-e75b221fac62&quot;,&quot;38c01e78-fb75-40da-8bb2-cc42ec936f8d&quot;,&quot;d2d3a597-edb3-4191-bbee-ea0194023b8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:403,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1a2025d2-d8f2-4693-b771-01cbfec11fd8&quot;,&quot;title&quot;:&quot;query studies with param &#x27;PatientID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with PatientID=123456 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientID&#x27; Should find Study with PatientID=123456 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e7c4ee3-327f-46e2-beed-9e2a3e76c3ad&quot;,&quot;parentUUID&quot;:&quot;1a2025d2-d8f2-4693-b771-01cbfec11fd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with PatientID=C3* and get studies successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientID&#x27; Should find Study with PatientID=C3* and get studies successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8138524e-037d-4748-9012-d5d708129499&quot;,&quot;parentUUID&quot;:&quot;1a2025d2-d8f2-4693-b771-01cbfec11fd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with PatientID=foobar and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;PatientID&#x27; Should find Study with PatientID=foobar and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:67,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a96177-6804-4167-93ce-1bfb8d9342ba&quot;,&quot;parentUUID&quot;:&quot;1a2025d2-d8f2-4693-b771-01cbfec11fd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e7c4ee3-327f-46e2-beed-9e2a3e76c3ad&quot;,&quot;8138524e-037d-4748-9012-d5d708129499&quot;,&quot;41a96177-6804-4167-93ce-1bfb8d9342ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:222,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;069fead2-45bd-4bcd-8dfd-740c09330e62&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyInstanceUID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596634768 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;StudyInstanceUID&#x27; Should find Study with StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596634768 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;245d074b-f0ec-4e68-a6b9-a3087ab1bf76&quot;,&quot;parentUUID&quot;:&quot;069fead2-45bd-4bcd-8dfd-740c09330e62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596123456 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;StudyInstanceUID&#x27; Should find Study with StudyInstanceUID=1.3.6.1.4.1.14519.5.2.1.3023.4017.246199836259881483055596123456 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb713ffb-4d0e-4db8-bb44-a13155c48582&quot;,&quot;parentUUID&quot;:&quot;069fead2-45bd-4bcd-8dfd-740c09330e62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;245d074b-f0ec-4e68-a6b9-a3087ab1bf76&quot;,&quot;bb713ffb-4d0e-4db8-bb44-a13155c48582&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:168,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;6832e4d6-b326-4353-bd52-e85c0f0bc056&quot;,&quot;title&quot;:&quot;query studies with param &#x27;StudyID&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with StudyID=D18-1001 and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;StudyID&#x27; Should find Study with StudyID=D18-1001 and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1848c9c-f581-46cd-b1c0-2b2240bd4806&quot;,&quot;parentUUID&quot;:&quot;6832e4d6-b326-4353-bd52-e85c0f0bc056&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with StudyID=foo and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;StudyID&#x27; Should find Study with StudyID=foo and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac3fdedb-25f3-4d9a-b4c4-27f75380e641&quot;,&quot;parentUUID&quot;:&quot;6832e4d6-b326-4353-bd52-e85c0f0bc056&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1848c9c-f581-46cd-b1c0-2b2240bd4806&quot;,&quot;ac3fdedb-25f3-4d9a-b4c4-27f75380e641&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:167,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;480eb15b-4f74-46a3-bdff-e71152471e22&quot;,&quot;title&quot;:&quot;query studies with param &#x27;ReferringPhysicianName&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-find\\cFindStudy.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should find Study with ReferringPhysicianName=\&quot;ROBERT^BROWN\&quot; and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;ReferringPhysicianName&#x27; Should find Study with ReferringPhysicianName=\&quot;ROBERT^BROWN\&quot; and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2b4ea3b-d2f6-4d82-ac69-2bc8394b91c6&quot;,&quot;parentUUID&quot;:&quot;480eb15b-4f74-46a3-bdff-e71152471e22&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should find Study with ReferringPhysicianName=\&quot;foo\&quot; and get study successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-FIND Study find with a filter query studies with param &#x27;ReferringPhysicianName&#x27; Should find Study with ReferringPhysicianName=\&quot;foo\&quot; and get study successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let findScuCmdBuilder = new FindScuCmdBuilder(GlobalQrScpForTest.ip, GlobalQrScpForTest.port, \&quot;RACCOON_TEST\&quot;);\nfindScuCmdBuilder.setToStudyLevel();\nfindScuCmdBuilder.addKeyAndValue(param, value);\nlet cmd = findScuCmdBuilder.getCmd();\nlet { code, message } = await doCFind(cmd);\nexpect(code).to.be.equal(0);\nif (expectedCount === 0) {\n    expect(message).have.string(\&quot;I: Received Final Find Response (Success)\&quot;);\n    expect(message).not.have.string(\&quot;Find Response: 1 (Pending)\&quot;);\n    return;\n}\nexpect(message).have.string(`Find Response: ${expectedCount} (Pending)`);\nexpect(message).not.have.string(`Find Response: ${expectedCount + 1} (Pending)`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a153a2c1-32c6-42fd-89f0-35be62f802e6&quot;,&quot;parentUUID&quot;:&quot;480eb15b-4f74-46a3-bdff-e71152471e22&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2b4ea3b-d2f6-4d82-ac69-2bc8394b91c6&quot;,&quot;a153a2c1-32c6-42fd-89f0-35be62f802e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:169,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[&quot;dbd54005-ec65-4862-8cc1-7276c06e288a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:106,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2b4aa095-23de-492e-bd58-d67b2040b875&quot;,&quot;title&quot;:&quot;DIMSE C-MOVE&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\c-move\\c-move.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\c-move\\c-move.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-MOVE\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-MOVE \&quot;before all\&quot; hook in \&quot;DIMSE C-MOVE\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1688,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait storeTestDicomFiles();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;766e4f1e-4c32-4531-a7a5-b9ddbeb64e7a&quot;,&quot;parentUUID&quot;:&quot;2b4aa095-23de-492e-bd58-d67b2040b875&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should download 11 instances with patient level&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-MOVE Should download 11 instances with patient level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1213,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let moveResult = await doCMove([\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=PATIENT\&quot;,\n    \&quot;-k\&quot;,\n    `0010,0020=${PATIENT_ID}`\n]);\nexpect(moveResult.code).to.equal(0);\nexpect(moveResult.message).have.string(\&quot;I: Received Store Request (MsgID 11\&quot;);\nexpect(moveResult.message).have.string(\&quot;I: Received Final Move Response (Success)\&quot;);\nexpect(moveResult.message).not.have.string(\&quot;I: Received Store Request (MsgID 12\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d04fe24e-d5e5-41b8-bb44-9dc34337c748&quot;,&quot;parentUUID&quot;:&quot;2b4aa095-23de-492e-bd58-d67b2040b875&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should download 11 instances with patient-study level&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-MOVE Should download 11 instances with patient-study level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1210,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let moveResult = await doCMove([\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=STUDY\&quot;,\n    \&quot;-k\&quot;,\n    `0010,0020=${PATIENT_ID}`,\n    \&quot;-k\&quot;,\n    `0020,000d=${STUDY_UID}`\n]);\nexpect(moveResult.code).to.equal(0);\nexpect(moveResult.message).have.string(\&quot;I: Received Store Request (MsgID 11\&quot;);\nexpect(moveResult.message).have.string(\&quot;I: Received Final Move Response (Success)\&quot;);\nexpect(moveResult.message).not.have.string(\&quot;I: Received Store Request (MsgID 12\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a60a2f1-a553-4c96-b770-f0b070abeefb&quot;,&quot;parentUUID&quot;:&quot;2b4aa095-23de-492e-bd58-d67b2040b875&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should download 5 instances with patient-study-series level&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-MOVE Should download 5 instances with patient-study-series level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1147,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let moveResult = await doCMove([\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=SERIES\&quot;,\n    \&quot;-k\&quot;,\n    `0010,0020=${PATIENT_ID}`,\n    \&quot;-k\&quot;,\n    `0020,000d=${STUDY_UID}`,\n    \&quot;-k\&quot;,\n    `0020,000e=${SERIES_UID}`\n]);\nexpect(moveResult.code).to.equal(0);\nexpect(moveResult.message).have.string(\&quot;I: Received Store Request (MsgID 5\&quot;);\nexpect(moveResult.message).have.string(\&quot;I: Received Final Move Response (Success)\&quot;);\nexpect(moveResult.message).not.have.string(\&quot;I: Received Store Request (MsgID 6\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;016fb66c-59bd-47ff-a4a3-9f9d84c1959e&quot;,&quot;parentUUID&quot;:&quot;2b4aa095-23de-492e-bd58-d67b2040b875&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should download 1 instance with patient-study-series-instance level&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-MOVE Should download 1 instance with patient-study-series-instance level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1077,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let moveResult = await doCMove([\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=IMAGE\&quot;,\n    \&quot;-k\&quot;,\n    `0010,0020=${PATIENT_ID}`,\n    \&quot;-k\&quot;,\n    `0020,000d=${STUDY_UID}`,\n    \&quot;-k\&quot;,\n    `0020,000e=${SERIES_UID}`,\n    \&quot;-k\&quot;,\n    `0008,0018=${INSTANCE_UID}`\n]);\nexpect(moveResult.code).to.equal(0);\nexpect(moveResult.message).have.string(\&quot;I: Received Store Request (MsgID 1\&quot;);\nexpect(moveResult.message).have.string(\&quot;I: Received Final Move Response (Success)\&quot;);\nexpect(moveResult.message).not.have.string(\&quot;I: Received Store Request (MsgID 2\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6960ed93-8e7f-444f-98a1-b605f2d55b47&quot;,&quot;parentUUID&quot;:&quot;2b4aa095-23de-492e-bd58-d67b2040b875&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d04fe24e-d5e5-41b8-bb44-9dc34337c748&quot;,&quot;1a60a2f1-a553-4c96-b770-f0b070abeefb&quot;,&quot;016fb66c-59bd-47ff-a4a3-9f9d84c1959e&quot;,&quot;6960ed93-8e7f-444f-98a1-b605f2d55b47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4647,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;title&quot;:&quot;DIMSE Check Source AE&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\checktSourceAE.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\checktSourceAE.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE Check Source AE\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE \&quot;before all\&quot; hook in \&quot;DIMSE Check Source AE\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;process.env.DIMSE_CHECK_STORE_SCU_AE = true;\nprocess.env.DIMSE_CHECK_FIND_SCU_AE = true;\nprocess.env.DIMSE_CHECK_MOVE_SCU_AE = true;\nip = getLocalIp();\nport = await getPorts();\nscp = new DcmQrScp(ip, port, \&quot;RACCOON_TEST\&quot;, TEST_ALLOW_AEs);\nawait scp.start();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa21f50c-e401-4983-a79f-7490ca069b27&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;DIMSE Check Source AE\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE \&quot;after all\&quot; hook in \&quot;DIMSE Check Source AE\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;process.env.DIMSE_CHECK_STORE_SCU_AE = false;\nprocess.env.DIMSE_CHECK_FIND_SCU_AE = false;\nprocess.env.DIMSE_CHECK_MOVE_SCU_AE = false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6ccceae-8ce7-4a6d-9028-8409159e5192&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;C-FIND: Should raise error when using invalid AE&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE C-FIND: Should raise error when using invalid AE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { message } = await doCFind([\n    \&quot;-aet\&quot;,\n    \&quot;INVALID\&quot;,\n    \&quot;-aec\&quot;,\n    \&quot;RACCOON_TEST\&quot;,\n    \&quot;-v\&quot;,\n    ip,\n    port,\n    \&quot;-P\&quot;,\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=PATIENT\&quot;\n]);\nexpect(message).have.string(Status.NotAuthorized.toString(16));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acc000d4-353e-4d2e-b118-74f5c5b88b14&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;C-FIND: Should work properly when using valid AE&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE C-FIND: Should work properly when using valid AE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { message } = await doCFind([\n    \&quot;-aet\&quot;,\n    TEST_ALLOW_AEs.sources.find[0].aeTitle,\n    \&quot;-aec\&quot;,\n    \&quot;RACCOON_TEST\&quot;,\n    \&quot;-v\&quot;,\n    ip,\n    port,\n    \&quot;-P\&quot;,\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=PATIENT\&quot;\n]);\nexpect(message).not.have.string(Status.NotAuthorized.toString(16));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2ee1e62-fa74-44fc-b4bf-9cb2d7d49016&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;C-MOVE: Should raise error when using invalid AE&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE C-MOVE: Should raise error when using invalid AE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { message } = await doCMove(\&quot;INVALID\&quot;, [\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=PATIENT\&quot;,\n    \&quot;-k\&quot;,\n    `0010,0020=${\&quot;1234567890\&quot;}`\n]);\nexpect(message).have.string(Status.NotAuthorized.toString(16));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58916a36-109e-485f-9d93-db5ac2db81a6&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;C-MOVE: Should work properly when using valid AE&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE C-MOVE: Should work properly when using valid AE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { message } = await doCMove(TEST_ALLOW_AEs.sources.move[0].aeTitle, [\n    \&quot;-k\&quot;,\n    \&quot;0008,0052=PATIENT\&quot;,\n    \&quot;-k\&quot;,\n    `0010,0020=${\&quot;1234567890\&quot;}`\n]);\nexpect(message).not.have.string(Status.NotAuthorized.toString(16));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c8b2c86-e382-4ee4-996f-f7c45ca39f15&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;C-STORE: Should raise error when using invalid AE&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE C-STORE: Should raise error when using invalid AE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { message } = await doCStore(\&quot;INVALID\&quot;, pathResolve(__dirname, \&quot;../testData/dicomFiles/1-01-mod-vo\&quot;));\nexpect(message).have.string(Status.NotAuthorized.toString(16));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6fcd844-6e1f-4c31-93cc-00631f147c56&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;C-STORE: Should work properly when using valid AE&quot;,&quot;fullTitle&quot;:&quot;DIMSE Check Source AE C-STORE: Should work properly when using valid AE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:149,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let { message } = await doCStore(TEST_ALLOW_AEs.sources.store[0].aeTitle, pathResolve(__dirname, \&quot;../testData/dicomFiles/1-01-mod-vo\&quot;));\nexpect(message).not.have.string(Status.NotAuthorized.toString(16));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b282647-1e88-4a51-9b29-758dc32b27b1&quot;,&quot;parentUUID&quot;:&quot;539c2ac5-55a7-4ca2-814c-12ceeaffe501&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;acc000d4-353e-4d2e-b118-74f5c5b88b14&quot;,&quot;d2ee1e62-fa74-44fc-b4bf-9cb2d7d49016&quot;,&quot;58916a36-109e-485f-9d93-db5ac2db81a6&quot;,&quot;2c8b2c86-e382-4ee4-996f-f7c45ca39f15&quot;,&quot;c6fcd844-6e1f-4c31-93cc-00631f147c56&quot;,&quot;2b282647-1e88-4a51-9b29-758dc32b27b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:497,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;2b21bde4-6020-4941-9227-717886c8856e&quot;,&quot;title&quot;:&quot;DIMSE STGCMT&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\stgcmt.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\stgcmt.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE STGCMT\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE STGCMT \&quot;before all\&quot; hook in \&quot;DIMSE STGCMT\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1841,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();\nawait storeTestDicomFiles(STUDY_PATH);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaec6d08-b3c2-45fc-9b34-24d5b11971e6&quot;,&quot;parentUUID&quot;:&quot;2b21bde4-6020-4941-9227-717886c8856e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should not have FailureReason when all instances exist&quot;,&quot;fullTitle&quot;:&quot;DIMSE STGCMT Should not have FailureReason when all instances exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:716,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await doStgCmt(STUDY_PATH);\n\nexpect(response.code).to.equal(0);\nexpect(response.message).not.have.string(\&quot;FailureReason\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c90dbd38-4922-45dc-a5f7-82002b9cc3ce&quot;,&quot;parentUUID&quot;:&quot;2b21bde4-6020-4941-9227-717886c8856e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should have FailureReason when instance not exist&quot;,&quot;fullTitle&quot;:&quot;DIMSE STGCMT Should have FailureReason when instance not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:651,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await doStgCmt(NOT_FOUND_PATH);\n\nexpect(response.code).to.equal(0);\nexpect(response.message).have.string(\&quot;FailureReason\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;846782f7-a937-4bd3-b126-c955aeddfc47&quot;,&quot;parentUUID&quot;:&quot;2b21bde4-6020-4941-9227-717886c8856e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c90dbd38-4922-45dc-a5f7-82002b9cc3ce&quot;,&quot;846782f7-a937-4bd3-b126-c955aeddfc47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1367,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;title&quot;:&quot;DIMSE C-STORE&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\dimse\\storescp.test.js&quot;,&quot;file&quot;:&quot;\\test\\dimse\\storescp.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DIMSE C-STORE\&quot;&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE \&quot;before all\&quot; hook in \&quot;DIMSE C-STORE\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await GlobalQrScpForTest.createQrScp();\nawait dbInstance.destroyAll();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c01f7357-230d-416e-9236-3c6a5c5413e9&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should store a DICOM instance with complete attributes successfully and have proper attributes&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store a DICOM instance with complete attributes successfully and have proper attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDicomFilename = path.resolve(__dirname, \&quot;../testData/dicomFiles/1-01-mod-vo\&quot;);\n        const { code, message } = await doCStore(testDicomFilename);\n        expect(code).to.be.equal(0);\n        expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n        let testFileDicomJson = await JDcm2Json.get(testDicomFilename);\n        await expectInstanceHaveProperAttributes(testFileDicomJson);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b13d61b-0aab-47e6-b04d-067c0432cb8b&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should update a DICOM instance&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should update a DICOM instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:150,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const testDicomFilename = path.resolve(__dirname, \&quot;../testData/forStore/1-01-mod-vo-updated\&quot;);\nconst { code, message } = await doCStore(testDicomFilename);\nexpect(code).to.be.equal(0);\nexpect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\nlet testFileDicomJson = await JDcm2Json.get(testDicomFilename);\nawait expectInstanceHaveProperAttributes(testFileDicomJson);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba3b3ac5-c206-4e68-a561-0896cdd3d32d&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1, CR) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1, CR) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ff346d6-f214-4ed7-92d9-bdb2aec89d53&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1.1, DX) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.1.1, DX) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:511,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2620816a-8df5-4fd2-b4f3-c1a698806f5b&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, CT) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, CT) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf713639-6bc1-4c06-a07b-fb10d4900d19&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.4, MR) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.4, MR) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df89c2ae-ae7b-4253-a9c1-bc0ed101f54e&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, US) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, US) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;365f5e8b-69c6-4ccb-b53b-2074434cd683&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.104.1, US) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.104.1, US) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bfd4c44-125e-4532-b5af-03b56c8f3b33&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, SC) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.7, SC) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;479c0e8d-1e1e-4adc-a618-fc0854f4377e&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, OT) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.2, OT) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cbcd541-a44c-4a34-be52-1d7582e1bcb3&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.9.1.1, ECG) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.9.1.1, ECG) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba86125d-f0b4-4a8a-a032-30bcc2f8a36a&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.12.1, XA) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.12.1, XA) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:173,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;604aef4c-f21c-451b-93be-6798ca5b42be&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.3.1, Multi-Frame (US)) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.3.1, Multi-Frame (US)) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;158f2dba-8917-4f20-b87b-17da3822d9b6&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.91.1, ANN) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.91.1, ANN) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;768f01e8-b92a-4ef7-bf7b-90fa4c5feefa&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.481.3, RTSTRUCT) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.481.3, RTSTRUCT) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:212,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4bd6ba8-9b71-4e1e-89c8-ed3e71505804&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.66.4, SEG) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.66.4, SEG) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d249cdf-eb05-4e15-a2de-0c160e88fd1a&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.11.1, GSPS) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (SOP Class: 1.2.840.10008.5.1.4.1.1.11.1, GSPS) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56520296-aca3-42e2-9837-fab185a3a318&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.91, JPEG 2000) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.91, JPEG 2000) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a35dec1d-2af5-430c-ba24-1a601d0b35bc&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.51, JPEG Lossless) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.51, JPEG Lossless) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:171,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52a67b4e-27bf-4240-9b01-55c43bc0d7fd&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.50, JPEG Baseline) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.4.50, JPEG Baseline) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ac72208-7929-40bf-96ef-3b9fb5ca360b&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.1, Explicit VR Little Endian (Uncompressed)) successfully&quot;,&quot;fullTitle&quot;:&quot;DIMSE C-STORE Should store DICOM instance (Transfer Syntax: 1.2.840.10008.1.2.1, Explicit VR Little Endian (Uncompressed)) successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;doCStore(filename).then(({ code, message }) =&gt; {\n    expect(code).to.be.equal(0);\n    expect(message).contain(\&quot;with status SUCCESS  : 1\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6eeef4af-479e-4083-87b7-5269c920d23f&quot;,&quot;parentUUID&quot;:&quot;daa4d23c-2d3b-4b79-a4a6-b5b1fb44bea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b13d61b-0aab-47e6-b04d-067c0432cb8b&quot;,&quot;ba3b3ac5-c206-4e68-a561-0896cdd3d32d&quot;,&quot;0ff346d6-f214-4ed7-92d9-bdb2aec89d53&quot;,&quot;2620816a-8df5-4fd2-b4f3-c1a698806f5b&quot;,&quot;bf713639-6bc1-4c06-a07b-fb10d4900d19&quot;,&quot;df89c2ae-ae7b-4253-a9c1-bc0ed101f54e&quot;,&quot;365f5e8b-69c6-4ccb-b53b-2074434cd683&quot;,&quot;0bfd4c44-125e-4532-b5af-03b56c8f3b33&quot;,&quot;479c0e8d-1e1e-4adc-a618-fc0854f4377e&quot;,&quot;4cbcd541-a44c-4a34-be52-1d7582e1bcb3&quot;,&quot;ba86125d-f0b4-4a8a-a032-30bcc2f8a36a&quot;,&quot;604aef4c-f21c-451b-93be-6798ca5b42be&quot;,&quot;158f2dba-8917-4f20-b87b-17da3822d9b6&quot;,&quot;768f01e8-b92a-4ef7-bf7b-90fa4c5feefa&quot;,&quot;b4bd6ba8-9b71-4e1e-89c8-ed3e71505804&quot;,&quot;0d249cdf-eb05-4e15-a2de-0c160e88fd1a&quot;,&quot;56520296-aca3-42e2-9837-fab185a3a318&quot;,&quot;a35dec1d-2af5-430c-ba24-1a601d0b35bc&quot;,&quot;52a67b4e-27bf-4240-9b01-55c43bc0d7fd&quot;,&quot;2ac72208-7929-40bf-96ef-3b9fb5ca360b&quot;,&quot;6eeef4af-479e-4083-87b7-5269c920d23f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;12c6c6f2-3039-4c58-944d-ffd2ad840f98&quot;,&quot;title&quot;:&quot;WADO-RS get delete reason &#x27;/dicom-web/delete-reason/:uid&#x27;&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\getDeleteReason.test.js&quot;,&quot;file&quot;:&quot;\\test\\getDeleteReason.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;WADO-RS get delete reason &#x27;/dicom-web/delete-reason/:uid&#x27;\&quot;&quot;,&quot;fullTitle&quot;:&quot;WADO-RS get delete reason &#x27;/dicom-web/delete-reason/:uid&#x27; \&quot;before all\&quot; hook in \&quot;WADO-RS get delete reason &#x27;/dicom-web/delete-reason/:uid&#x27;\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1674,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dbInstance.destroyAll();\nawait storeTestDicomFiles();\nawait inject(app, {\n    method: \&quot;POST\&quot;,\n    url: `/dicom-web/studies/${STUDY_UID}/delete-with-reason`,\n    headers: {\n        \&quot;Content-Type\&quot;: \&quot;application/dicom+json\&quot;\n    },\n    payload: JSON.stringify({ reason: \&quot;test\&quot; })\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56c0f4a8-45c5-4680-80d8-09b02c88234d&quot;,&quot;parentUUID&quot;:&quot;12c6c6f2-3039-4c58-944d-ffd2ad840f98&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should get delete reason for study&quot;,&quot;fullTitle&quot;:&quot;WADO-RS get delete reason &#x27;/dicom-web/delete-reason/:uid&#x27; Should get delete reason for study&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let response = await inject(app, {\n    method: \&quot;GET\&quot;,\n    url: `/dicom-web/delete-reason/${STUDY_UID}`\n});\nexpect(response.statusCode).to.equal(200);\nlet deleteReason = await response.json();\nexpect(deleteReason).have.property(\&quot;reason\&quot;).to.be.equal(\&quot;test\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19945399-984f-4353-a8a6-fc90802d93d7&quot;,&quot;parentUUID&quot;:&quot;12c6c6f2-3039-4c58-944d-ffd2ad840f98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19945399-984f-4353-a8a6-fc90802d93d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;9e7c198b-ed9e-45e8-b24f-77a3b71fa15e&quot;,&quot;title&quot;:&quot;HL7 OMI&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\hl7\\hl7-omi-to-dicom-json.test.js&quot;,&quot;file&quot;:&quot;\\test\\hl7\\hl7-omi-to-dicom-json.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9c9dea1-ade9-4413-b84e-b0b767b79843&quot;,&quot;title&quot;:&quot;Parse OMI To DICOM Json&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\hl7\\hl7-omi-to-dicom-json.test.js&quot;,&quot;file&quot;:&quot;\\test\\hl7\\hl7-omi-to-dicom-json.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should parse OMI to dicom json and have correct properties&quot;,&quot;fullTitle&quot;:&quot;HL7 OMI Parse OMI To DICOM Json should parse OMI to dicom json and have correct properties&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ormMessage = fs.readFileSync(\n    join(__dirname, \&quot;../testData/hl7/omi-for-adt.hl7\&quot;),\n    \&quot;utf-8\&quot;\n);\nlet ormMessageSplit = ormMessage.split(/(\\r\\n|\\n|$)/m);\normMessage = ormMessageSplit.join(\&quot;\\r\&quot;);\nlet hl7Parser = new Hl7Parser();\nlet dicomJsonParser = new Hl7ToDicomMwlParser(hl7Parser.parse(ormMessage));\nlet mwl = dicomJsonParser.toDicomMwlJson(\&quot;OMI\&quot;);\n    \n// Patient ID\nexpect(mwl).has.property(\&quot;00100020\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;454721\&quot;);\n// Patient Name\nexpect(mwl).has.property(\&quot;00100010\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).has.property(\&quot;Alphabetic\&quot;).to.be.equal(\&quot;DOE^JOHN^^^^\&quot;);\n// Patient Birth Date\nexpect(mwl).has.property(\&quot;00100030\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;19480203\&quot;);\n// Patient Sex\nexpect(mwl).has.property(\&quot;00100040\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;M\&quot;);\n// Scheduled Procedure Step Sequence\nexpect(mwl).has.property(\&quot;00400100\&quot;).has.property(\&quot;Value\&quot;).has.lengthOf(1);\nlet spsSeq = mwl[\&quot;00400100\&quot;][\&quot;Value\&quot;][0];\n// Scheduled Station AE Title\nexpect(spsSeq).has.property(\&quot;00400001\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;ScheduledStationAET1\&quot;);\nexpect(spsSeq).has.property(\&quot;00400001\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;1\&quot;).to.be.equal(\&quot;ScheduledStationAET2\&quot;);\n// Scheduled Procedure Step Start Date\nexpect(spsSeq).has.property(\&quot;00400002\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;20000816\&quot;);\n// Scheduled Procedure Step Start Time\nexpect(spsSeq).has.property(\&quot;00400003\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;151000\&quot;);\n// Modality\nexpect(spsSeq).has.property(\&quot;00080060\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;CT\&quot;);\n// Scheduled Performing Physician&#x27;s Name\nexpect(spsSeq).has.property(\&quot;00400006\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).has.property(\&quot;Alphabetic\&quot;).to.be.equal(\&quot;ScheduledPerformingPhysicianNameFN^ScheduledPerformingPhysicianNameGN^ScheduledPerformingPhysicianNameMN^^DR^Md\&quot;);\n// Scheduled Procedure Step Description\nexpect(spsSeq).has.property(\&quot;00400007\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;Microscopic Observation\&quot;);\n// Scheduled Protocol Code Sequence\nexpect(spsSeq).has.property(\&quot;00400008\&quot;).has.property(\&quot;Value\&quot;).has.lengthOf(1);\nlet spsScheduledProtocolCodeSeq = spsSeq[\&quot;00400008\&quot;][\&quot;Value\&quot;][0];\n// Scheduled Protocol Code Value\nexpect(spsScheduledProtocolCodeSeq).has.property(\&quot;00080100\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;10637-7\&quot;);\n// Scheduled Protocol Code Scheme Designator\nexpect(spsScheduledProtocolCodeSeq).has.property(\&quot;00080102\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;LN\&quot;);\n// Scheduled Protocol Code Meaning\nexpect(spsScheduledProtocolCodeSeq).has.property(\&quot;00080104\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;Microscopic Observation\&quot;);\n// Scheduled Procedure Step ID\nexpect(spsSeq).has.property(\&quot;00400009\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;SPS-johs4U\&quot;);\n// Scheduled Procedure Step Status\nexpect(spsSeq).has.property(\&quot;00400020\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;SCHEDULED\&quot;);\n\n// Requested Procedure ID\nexpect(mwl).has.property(\&quot;00401001\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;RP-chaeF9\&quot;);\n// Accession Number\nexpect(mwl).has.property(\&quot;00080050\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;ACC-shi3Ub\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42a63b1f-e35e-40f7-bb8d-8d652c6a2dae&quot;,&quot;parentUUID&quot;:&quot;f9c9dea1-ade9-4413-b84e-b0b767b79843&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42a63b1f-e35e-40f7-bb8d-8d652c6a2dae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;e84e1378-5906-44f2-9679-fd3aa58e2cf2&quot;,&quot;title&quot;:&quot;HL7 ORM&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\hl7\\hl7-orm-to-dicom-json.test.js&quot;,&quot;file&quot;:&quot;\\test\\hl7\\hl7-orm-to-dicom-json.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e6c75c0c-c0d2-4923-850f-bedc2c664cb1&quot;,&quot;title&quot;:&quot;Parse ORM To DICOM Json&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\hl7\\hl7-orm-to-dicom-json.test.js&quot;,&quot;file&quot;:&quot;\\test\\hl7\\hl7-orm-to-dicom-json.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should parse orm to dicom json and have correct properties&quot;,&quot;fullTitle&quot;:&quot;HL7 ORM Parse ORM To DICOM Json should parse orm to dicom json and have correct properties&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let ormMessage = fs.readFileSync(\n    join(__dirname, \&quot;../testData/hl7/orm-for-adt.hl7\&quot;),\n    \&quot;utf-8\&quot;\n);\nlet ormMessageSplit = ormMessage.split(/(\\r\\n|\\n|$)/m);\normMessage = ormMessageSplit.join(\&quot;\\r\&quot;);\nlet hl7Parser = new Hl7Parser();\nlet dicomJsonParser = new Hl7ToDicomMwlParser(hl7Parser.parse(ormMessage));\nlet mwl = dicomJsonParser.toDicomMwlJson(\&quot;ORM\&quot;);\n    \n// Patient ID\nexpect(mwl).has.property(\&quot;00100020\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;454721\&quot;);\n// Patient Name\nexpect(mwl).has.property(\&quot;00100010\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).has.property(\&quot;Alphabetic\&quot;).to.be.equal(\&quot;DOE^JOHN^^^^\&quot;);\n// Patient Birth Date\nexpect(mwl).has.property(\&quot;00100030\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;19480203\&quot;);\n// Patient Sex\nexpect(mwl).has.property(\&quot;00100040\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;M\&quot;);\n// Scheduled Procedure Step Sequence\nexpect(mwl).has.property(\&quot;00400100\&quot;).has.property(\&quot;Value\&quot;).has.lengthOf(1);\nlet spsSeq = mwl[\&quot;00400100\&quot;][\&quot;Value\&quot;][0];\n// Scheduled Procedure Step Start Date\nexpect(spsSeq).has.property(\&quot;00400002\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;20150325\&quot;);\n// Scheduled Procedure Step Start Time\nexpect(spsSeq).has.property(\&quot;00400003\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;160228\&quot;);\n// Modality\nexpect(spsSeq).has.property(\&quot;00080060\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;CT\&quot;);\n// Scheduled Performing Physician&#x27;s Name\nexpect(spsSeq).has.property(\&quot;00400006\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).has.property(\&quot;Alphabetic\&quot;).to.be.equal(\&quot;^AMY^JANE^^^^\&quot;);\n// Scheduled Procedure Step Description\nexpect(spsSeq).has.property(\&quot;00400007\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;Description\&quot;);\n// Scheduled Protocol Code Sequence\nexpect(spsSeq).has.property(\&quot;00400008\&quot;).has.property(\&quot;Value\&quot;).has.lengthOf(1);\nlet spsScheduledProtocolCodeSeq = spsSeq[\&quot;00400008\&quot;][\&quot;Value\&quot;][0];\n// Scheduled Protocol Code Value\nexpect(spsScheduledProtocolCodeSeq).has.property(\&quot;00080100\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;CodeValue\&quot;);\n// Scheduled Protocol Code Scheme Designator\nexpect(spsScheduledProtocolCodeSeq).has.property(\&quot;00080102\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;99Designator\&quot;);\n// Scheduled Protocol Code Meaning\nexpect(spsScheduledProtocolCodeSeq).has.property(\&quot;00080104\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;Description\&quot;);\n// Scheduled Procedure Step ID\nexpect(spsSeq).has.property(\&quot;00400009\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;SPS-ohgh3W\&quot;);\n// Scheduled Procedure Step Status\nexpect(spsSeq).has.property(\&quot;00400020\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;SCHEDULED\&quot;);\n// Requested Procedure ID\nexpect(mwl).has.property(\&quot;00401001\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;RP-aeW9ee\&quot;);\n// Accession Number\nexpect(mwl).has.property(\&quot;00080050\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;ACC-bei3AP\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8dacbd3-4255-4763-93f8-4b37656991a8&quot;,&quot;parentUUID&quot;:&quot;e6c75c0c-c0d2-4923-850f-bedc2c664cb1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8dacbd3-4255-4763-93f8-4b37656991a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;1ae1b734-bd14-49c6-b264-99d977fe7ae2&quot;,&quot;title&quot;:&quot;HL7 Patient&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\hl7\\hl7-patient-to-dicom-json.test.js&quot;,&quot;file&quot;:&quot;\\test\\hl7\\hl7-patient-to-dicom-json.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;36fec150-dc78-4d37-a1a0-f783836f000f&quot;,&quot;title&quot;:&quot;Parse Patient To DICOM Json&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\hl7\\hl7-patient-to-dicom-json.test.js&quot;,&quot;file&quot;:&quot;\\test\\hl7\\hl7-patient-to-dicom-json.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should parse patient to dicom json and have correct properties&quot;,&quot;fullTitle&quot;:&quot;HL7 Patient Parse Patient To DICOM Json should parse patient to dicom json and have correct properties&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let adtMessage = fs.readFileSync(\n    join(__dirname, \&quot;../testData/hl7/adt.hl7\&quot;),\n    \&quot;utf-8\&quot;\n);\nlet adtMessageSplit = adtMessage.split(/(\\r\\n|\\n|$)/m);\nadtMessage = adtMessageSplit.join(\&quot;\\r\&quot;);\nlet hl7Parser = new Hl7Parser();\nlet dicomJsonParser = new Hl7ToDicomPatientParser(hl7Parser.parse(adtMessage));\nlet patient = dicomJsonParser.toDicomPatientJson();\n    \n// Patient ID\nexpect(patient).has.property(\&quot;00100020\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;454721\&quot;);\n// Patient Name\nexpect(patient).has.property(\&quot;00100010\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).has.property(\&quot;Alphabetic\&quot;).to.be.equal(\&quot;DOE^JOHN^^^^\&quot;);\n// Patient Birth Date\nexpect(patient).has.property(\&quot;00100030\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;19480203\&quot;);\n// Patient Sex\nexpect(patient).has.property(\&quot;00100040\&quot;).has.property(\&quot;Value\&quot;).has.property(\&quot;0\&quot;).to.be.equal(\&quot;M\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaa2422f-c07e-46b4-a39d-e4dc154bcff4&quot;,&quot;parentUUID&quot;:&quot;36fec150-dc78-4d37-a1a0-f783836f000f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aaa2422f-c07e-46b4-a39d-e4dc154bcff4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000},{&quot;uuid&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;title&quot;:&quot;isRouterCanAccess&quot;,&quot;fullFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\test\\plugins\\isRouterCanAccess.test.js&quot;,&quot;file&quot;:&quot;\\test\\plugins\\isRouterCanAccess.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;isRouterCanAccess\&quot;&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess \&quot;before all\&quot; hook in \&quot;isRouterCanAccess\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;mockPluginsConfig = {\n    \&quot;test-plugin\&quot;: {\n        acl: {\n            enable: true,\n            roles: [\n                {\n                    name: \&quot;admin\&quot;,\n                    routers: [\n                        { path: \&quot;/admin/*\&quot;, method: \&quot;GET\&quot; },\n                        { path: \&quot;/api/*\&quot;, method: \&quot;*\&quot; }\n                    ]\n                },\n                {\n                    name: \&quot;user\&quot;,\n                    routers: [\n                        { path: \&quot;/api/public/*\&quot;, method: \&quot;GET\&quot; }\n                    ]\n                }\n            ]\n        }\n    }\n};\nconst utils = proxyquire(\&quot;../../plugins/plugins-utils\&quot;, {\n    \&quot;./plugin.class\&quot;: {\n        Plugin: {\n            getConfig: () =&gt; ({ pluginsConfig: mockPluginsConfig })\n        }\n    }\n});\nisRouterCanAccess = utils.isRouterCanAccess;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5be150b3-890b-45ee-9602-3a99a9654577&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;應該在沒有 ACL 配置時返回 true&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 應該在沒有 ACL 配置時返回 true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { baseUrl: \&quot;\&quot;, path: \&quot;/any\&quot;, method: \&quot;GET\&quot; };\nconst result = isRouterCanAccess(req, \&quot;plugin-without-acl\&quot;, [\&quot;user\&quot;]);\nexpect(result).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5846d4b-31bd-41b2-97ba-7df432a0e226&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;應該在沒有 ACL 配置時返回 true&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 應該在沒有 ACL 配置時返回 true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;mockPluginsConfig[\&quot;test-plugin\&quot;].acl.enable = false;\nconst req = { baseUrl: \&quot;\&quot;, path: \&quot;/any\&quot;, method: \&quot;GET\&quot; };\nconst result = isRouterCanAccess(req, \&quot;test-plugin\&quot;, [\&quot;user\&quot;]);\nexpect(result).to.be.true;\nmockPluginsConfig[\&quot;test-plugin\&quot;].acl.enable = true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bc6fbfc-38f6-44d9-9dfc-abed5d455bec&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;應該允許 admin 訪問指定路由&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 應該允許 admin 訪問指定路由&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { baseUrl: \&quot;\&quot;, path: \&quot;/admin/dashboard\&quot;, method: \&quot;GET\&quot; };\nconst result = isRouterCanAccess(req, \&quot;test-plugin\&quot;, [\&quot;admin\&quot;]);\nexpect(result).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;131c5e65-ae9b-4915-8d9e-0aa21d70ec1c&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;應該允許 admin 使用任何 method 呼叫路由&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 應該允許 admin 使用任何 method 呼叫路由&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { baseUrl: \&quot;\&quot;, path: \&quot;/api/users\&quot;, method: \&quot;POST\&quot; };\nconst result = isRouterCanAccess(req, \&quot;test-plugin\&quot;, [\&quot;admin\&quot;]);\nexpect(result).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;792ababd-e332-473f-945f-914ae61c8c57&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;應該允許普通 user 訪問公開路由&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 應該允許普通 user 訪問公開路由&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { baseUrl: \&quot;\&quot;, path: \&quot;/api/public/studies\&quot;, method: \&quot;GET\&quot; };\nconst result = isRouterCanAccess(req, \&quot;test-plugin\&quot;, [\&quot;user\&quot;]);\nexpect(result).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38e4e09a-bc92-493f-bfd9-3b4837b0acd9&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;不應該允許普通 user 訪問 admin 路由&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 不應該允許普通 user 訪問 admin 路由&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { baseUrl: \&quot;\&quot;, path: \&quot;/admin/dashboard\&quot;, method: \&quot;GET\&quot; };\nconst result = isRouterCanAccess(req, \&quot;test-plugin\&quot;, [\&quot;user\&quot;]);\nexpect(result).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22b1b159-e32e-46df-9f3b-8a5064aa53f8&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;應該支持多個 role&quot;,&quot;fullTitle&quot;:&quot;isRouterCanAccess 應該支持多個 role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { baseUrl: \&quot;\&quot;, path: \&quot;/admin/dashboard\&quot;, method: \&quot;GET\&quot; };\nconst result = isRouterCanAccess(req, \&quot;test-plugin\&quot;, [\&quot;user\&quot;, \&quot;admin\&quot;]);\nexpect(result).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1be5ab4f-156b-4692-a7b5-26d2d1bde7c3&quot;,&quot;parentUUID&quot;:&quot;cf01bba7-bca2-489f-94e4-657a751b9abf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c5846d4b-31bd-41b2-97ba-7df432a0e226&quot;,&quot;2bc6fbfc-38f6-44d9-9dfc-abed5d455bec&quot;,&quot;131c5e65-ae9b-4915-8d9e-0aa21d70ec1c&quot;,&quot;792ababd-e332-473f-945f-914ae61c8c57&quot;,&quot;38e4e09a-bc92-493f-bfd9-3b4837b0acd9&quot;,&quot;22b1b159-e32e-46df-9f3b-8a5064aa53f8&quot;,&quot;1be5ab4f-156b-4692-a7b5-26d2d1bde7c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:3000000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:3000000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.6.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;raccoon-business&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;K:\\nodejs\\_my-project\\DICOM\\raccoon-workspace\\raccoon-business\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>